<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Racks - Every piece in its place</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Force scrolling to work specifically for settings */
        body[x-data] {
            overflow-y: scroll !important;
            height: auto !important;
        }

        .tab-content.active {
            overflow: visible !important;
            height: auto !important;
            max-height: none !important;
        }

        html {
            height: 100%;
            overflow: visible !important;
            overflow-y: scroll !important;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #faf8f5 0%, #f8f6f3 50%, #f5f3f0 100%);
            color: #374151;
            line-height: 1.6;
            height: auto !important;
            min-height: 100vh;
            font-weight: 400;
            letter-spacing: -0.01em;
            padding-top: 80px; /* Reduced space for fixed header */
            padding-bottom: 150px; /* Extra space at bottom */
            overflow: visible !important;
            overflow-y: scroll !important;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #db2777, #be185d, #a21caf);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(219, 39, 119, 0.3);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .header-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-link.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }

        .signin-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .signin-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            font-size: 1.5rem;
            font-weight: bold;
            justify-content: flex-start;
        }

        .logo-icon {
            position: relative;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Custom Racks Logo */
        .racks-logo {
            position: relative;
            width: 40px;
            height: 32px;
            flex-shrink: 0;
            display: block;
        }

        .racks-logo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 4px;
            right: 4px;
            height: 3px;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .racks-logo::after {
            content: '';
            position: absolute;
            top: 8px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(180deg, 
                transparent 0%, 
                transparent 15%, 
                rgba(255, 255, 255, 0.3) 15%, 
                rgba(255, 255, 255, 0.3) 25%, 
                transparent 25%, 
                transparent 40%, 
                rgba(255, 255, 255, 0.3) 40%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 50%, 
                transparent 65%, 
                rgba(255, 255, 255, 0.3) 65%, 
                rgba(255, 255, 255, 0.3) 75%, 
                transparent 75%, 
                transparent 90%, 
                rgba(255, 255, 255, 0.3) 90%, 
                rgba(255, 255, 255, 0.3) 100%);
            border-left: 2px solid rgba(255, 255, 255, 0.6);
            border-right: 2px solid rgba(255, 255, 255, 0.6);
            border-radius: 1px;
        }

        .racks-logo .hanger-1,
        .racks-logo .hanger-2,
        .racks-logo .hanger-3 {
            position: absolute;
            top: 2px;
            width: 8px;
            height: 1px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 1px;
        }

        .racks-logo .hanger-1 { left: 8px; }
        .racks-logo .hanger-2 { left: 16px; }
        .racks-logo .hanger-3 { left: 24px; }


        .logo-style-modern {
            font-weight: 900;
            font-size: 1.3rem;
            letter-spacing: -0.05em;
            color: white;
            text-transform: uppercase;
        }


        .brand-text {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .logo-text-only {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
            align-items: flex-start;
        }

        .logo-display {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-name {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1;
            background: linear-gradient(45deg, #ffffff, #f8fafc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .brand-tagline {
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            font-weight: 400;
            opacity: 0.9;
            font-style: italic;
            letter-spacing: 0.05em;
            text-transform: lowercase;
        }

        .stats {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            align-items: center;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            display: block;
        }

        .accessibility-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .accessibility-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

                 .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            padding-bottom: 200px; /* Extra space for bottom tabs */
            overflow: visible !important;
            height: auto !important;
            min-height: unset !important;
            max-height: none !important;
        }

         /* Adjust container padding when filter bar is visible */
         .container:has(~ .filter-bar) {
             padding-top: 3rem;
         }

         /* Alternative approach for better browser support */
         body:has(.filter-bar) .container {
             padding-top: 3rem;
         }

         @media (max-width: 768px) {
            .container {
                padding: 0.5rem 1.5rem;
                padding-bottom: 120px;
                max-width: 1200px;
            }
             
             .header-wrapper, .header-content, .tabs-container, .filter-bar-content {
                 max-width: 1200px;
                 padding-left: 1.5rem;
                 padding-right: 1.5rem;
             }
             
             body {
                 padding-top: 70px; /* Reduced for mobile */
             }
        }

        /* Cute Robot AI Scan Notification */
        .ai-robot-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            text-align: center;
            min-width: 320px;
            animation: robotSlideIn 0.6s ease-out;
            backdrop-filter: blur(10px);
        }

        .ai-robot-notification.success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .ai-robot-notification.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .robot-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .robot-body {
            font-size: 4rem;
            animation: robotFloat 2s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            position: relative;
        }

        .robot-eyes {
            position: absolute;
            top: -0.1em;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.3em;
            font-size: 0.25em;
        }

        .robot-eye {
            width: 1em;
            height: 1em;
            background: #00ff88;
            border-radius: 50%;
            animation: robotBlink 3s ease-in-out infinite;
            box-shadow: 0 0 10px #00ff88;
        }

        .robot-antenna {
            position: absolute;
            top: -0.4em;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 0.3em;
            background: #fff;
            border-radius: 1px;
        }

        .robot-antenna::after {
            content: '';
            position: absolute;
            top: -0.1em;
            left: 50%;
            transform: translateX(-50%);
            width: 0.15em;
            height: 0.15em;
            background: #ff6b6b;
            border-radius: 50%;
            animation: antennaGlow 1.5s ease-in-out infinite alternate;
        }

        .scan-message {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            animation: textPulse 2s ease-in-out infinite;
        }

        .scan-details {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .scanning-progress {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .scan-dot {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: scanDots 1.4s ease-in-out infinite;
        }

        .scan-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .scan-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .success-sparkles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            color: #ffd700;
            font-size: 1.5rem;
            animation: sparkleFloat 2s ease-out infinite;
        }

        .sparkle:nth-child(1) { top: 10%; left: 15%; animation-delay: 0s; }
        .sparkle:nth-child(2) { top: 20%; right: 20%; animation-delay: 0.3s; }
        .sparkle:nth-child(3) { bottom: 25%; left: 25%; animation-delay: 0.6s; }
        .sparkle:nth-child(4) { bottom: 15%; right: 15%; animation-delay: 0.9s; }

        @keyframes robotSlideIn {
            0% {
                transform: translate(-50%, -50%) scale(0.3) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1) rotate(5deg);
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes robotFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            25% {
                transform: translateY(-8px) rotate(-1deg);
            }
            50% {
                transform: translateY(-4px) rotate(1deg);
            }
            75% {
                transform: translateY(-12px) rotate(-0.5deg);
            }
        }

        @keyframes robotBlink {
            0%, 85%, 100% {
                opacity: 1;
                transform: scaleY(1);
            }
            90%, 95% {
                opacity: 0.3;
                transform: scaleY(0.1);
            }
        }

        @keyframes antennaGlow {
            0% {
                box-shadow: 0 0 5px #ff6b6b;
                background: #ff6b6b;
            }
            100% {
                box-shadow: 0 0 15px #ff6b6b, 0 0 25px #ff6b6b;
                background: #ff9999;
            }
        }

        @keyframes textPulse {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            }
            50% {
                transform: scale(1.05);
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            }
        }

        @keyframes scanDots {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        @keyframes sparkleFloat {
            0% {
                transform: translateY(0px) rotate(0deg) scale(0);
                opacity: 0;
            }
            20% {
                opacity: 1;
                transform: translateY(-10px) rotate(90deg) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateY(-30px) rotate(270deg) scale(1);
            }
            100% {
                transform: translateY(-50px) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        @media (max-width: 480px) {
           .container {
                padding: 0.5rem 1rem;
                padding-bottom: 120px;
                max-width: 100%;
                overflow-x: hidden;
                overflow-y: visible;
                 height: auto;
             }
             
             .header-wrapper, .header-content, .tabs-container, .filter-bar-content {
                 max-width: 100%;
                 padding-left: 1rem;
                 padding-right: 1rem;
             }
             
             body {
                 padding-top: 60px; /* Even more reduced for small mobile */
             }
         }

         /* Fixed Bottom Tabs */
         .bottom-tabs {
             position: fixed;
             bottom: 0;
             left: 0;
             right: 0;
             background: rgba(255, 255, 255, 0.95);
             backdrop-filter: blur(20px);
             border-top: 3px solid #fecaca;
             box-shadow: 0 -8px 32px rgba(219, 39, 119, 0.15);
             z-index: 1000;
             padding: 0.5rem;
         }

         .tabs-container {
             display: flex;
             justify-content: space-around;
             align-items: center;
             max-width: 1200px;
             margin: 0 auto;
             gap: 0.5rem;
         }

         .tab {
             display: flex;
             flex-direction: column;
             align-items: center;
             gap: 0.25rem;
             padding: 0.75rem 0.5rem;
             background: none;
             border: 2px solid transparent;
             border-radius: 12px;
             cursor: pointer;
             font-size: 0.875rem;
             color: #6b7280;
             transition: all 0.3s ease;
             min-width: 70px;
             flex: 1;
             max-width: 120px;
         }

         .tab i {
             font-size: 1.25rem;
             margin-bottom: 0.125rem;
         }

         .tab span {
             font-weight: 500;
             font-size: 0.75rem;
         }

         .tab.active {
             color: #db2777;
             background: rgba(219, 39, 119, 0.1);
             border-color: #db2777;
             transform: translateY(-2px);
             box-shadow: 0 4px 12px rgba(219, 39, 119, 0.2);
         }

         .tab:hover:not(.active) {
             color: #be185d;
             background: rgba(190, 24, 93, 0.05);
             border-color: rgba(190, 24, 93, 0.3);
             transform: translateY(-1px);
         }

        .tab-content {
            display: none;
            height: auto !important;
            overflow: visible !important;
            min-height: unset !important;
            max-height: none !important;
        }

        .tab-content.active {
            display: block;
            height: auto !important;
            overflow: visible !important;
            min-height: unset !important;
            max-height: none !important;
        }

        .dashboard-grid {
            height: auto !important;
            overflow: visible !important;
            min-height: unset !important;
            max-height: none !important;
        }

        /* Fix Add Item tab spacing */
        .tab-content[x-cloak] {
            display: none !important;
        }
        
        .tab-content:not(.active) {
            display: none;
        }
        
        .tab-content.active:first-child {
            margin-top: 0;
            padding-top: 0;
        }
        
        /* Reduce gap between header and Add Item content */
        .tab-content.active .card:first-child {
            margin-top: 0;
        }

        /* Bulk Toggle Button - Complementary to Filter Button */
        .bulk-toggle-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(var(--theme-primary-rgb, 219, 39, 119), 0.3);
            border-radius: 15px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 600;
            color: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.1);
            position: relative;
        }

        .bulk-toggle-btn:hover {
            background: rgba(var(--theme-primary-rgb, 219, 39, 119), 0.05);
            border-color: rgba(var(--theme-primary-rgb, 219, 39, 119), 0.5);
            box-shadow: 0 6px 20px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.15);
            transform: translateY(-1px);
        }

        .bulk-toggle-btn.active {
            background: rgba(var(--theme-primary-rgb, 219, 39, 119), 0.1);
            border-color: rgba(var(--theme-primary-rgb, 219, 39, 119), 0.6);
            color: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            box-shadow: 0 8px 25px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.2);
        }

        .bulk-badge {
            background: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            position: absolute;
            top: -8px;
            right: -8px;
            box-shadow: 0 2px 8px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.3);
        }

        /* Theme-specific bulk button colors */
        .color-scheme.theme-pastel .bulk-toggle-btn {
            border-color: rgba(244, 114, 182, 0.3);
            color: #F472B6;
            box-shadow: 0 4px 15px rgba(244, 114, 182, 0.1);
        }

        .color-scheme.theme-pastel .bulk-toggle-btn:hover {
            background: rgba(244, 114, 182, 0.05);
            border-color: rgba(244, 114, 182, 0.5);
            box-shadow: 0 6px 20px rgba(244, 114, 182, 0.15);
        }

        .color-scheme.theme-pastel .bulk-toggle-btn.active {
            background: rgba(244, 114, 182, 0.1);
            border-color: rgba(244, 114, 182, 0.6);
            box-shadow: 0 8px 25px rgba(244, 114, 182, 0.2);
        }

        .color-scheme.theme-pastel .bulk-badge {
            background: #F472B6;
        }

        body.theme-rawr .bulk-toggle-btn {
            border-color: rgba(220, 38, 38, 0.3);
            color: #DC2626;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.1);
        }

        body.theme-rawr .bulk-toggle-btn:hover {
            background: rgba(220, 38, 38, 0.05);
            border-color: rgba(220, 38, 38, 0.5);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.15);
        }

        body.theme-rawr .bulk-toggle-btn.active {
            background: rgba(220, 38, 38, 0.1);
            border-color: rgba(220, 38, 38, 0.6);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.2);
        }

        body.theme-rawr .bulk-badge {
            background: #DC2626;
        }

        .theme-accessible .bulk-toggle-btn {
            border: 3px solid #000000;
            color: #000000;
            background: #FFFFFF;
            font-weight: 700;
            box-shadow: 4px 4px 0px #000000;
        }

        .theme-accessible .bulk-toggle-btn:hover {
            background: #F8F9FA;
            box-shadow: 6px 6px 0px #000000;
        }

        .theme-accessible .bulk-toggle-btn.active {
            background: #000000;
            color: #FFFFFF;
            box-shadow: 4px 4px 0px #333333;
        }

        .theme-accessible .bulk-badge {
            background: #000000;
            color: #FFFFFF;
            border: 2px solid #FFFFFF;
        }

        /* Floating Bulk Actions Panel */
        .bulk-actions-panel {
            position: fixed;
            bottom: 80px;
            left: 0;
            right: 0;
            z-index: 900;
            padding: 0 1rem;
            pointer-events: none;
        }

        .bulk-actions-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 1rem 1.5rem;
            max-width: 700px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 12px 40px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.15);
            border: 2px solid rgba(var(--theme-primary-rgb, 219, 39, 119), 0.1);
            pointer-events: all;
        }

        .bulk-info {
            font-weight: 600;
            color: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            font-size: 14px;
        }

        .bulk-actions-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .bulk-actions-content {
                flex-direction: column;
                gap: 0.75rem;
                padding: 0.75rem 1rem;
            }
            
            .bulk-actions-buttons {
                justify-content: center;
                width: 100%;
            }

            .bulk-actions-panel {
                bottom: 70px;
                padding: 0 0.5rem;
            }
        }

        /* Item Card Bulk Selection */
        .bulk-checkbox {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            padding: 6px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
        }

        .item-checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .item-checkbox-label input[type="checkbox"] {
            display: none;
        }

        .item-checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            border-radius: 4px;
            position: relative;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .item-checkbox-label input[type="checkbox"]:checked + .item-checkmark {
            background: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            border-color: rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
        }

        .item-checkbox-label input[type="checkbox"]:checked + .item-checkmark::after {
            content: 'âœ“';
            position: absolute;
            color: white;
            font-size: 11px;
            top: -2px;
            left: 2px;
        }

        .item-card.bulk-selected {
            border: 3px solid rgba(var(--theme-primary-rgb, 219, 39, 119), 1);
            box-shadow: 0 8px 25px rgba(var(--theme-primary-rgb, 219, 39, 119), 0.25);
            transform: translateY(-2px);
        }

        .item-card {
            position: relative;
            transition: all 0.3s ease;
        }

        /* Theme-specific item selection styles */
        .color-scheme.theme-pastel .item-checkmark {
            border-color: #F472B6;
        }

        .color-scheme.theme-pastel .item-checkbox-label input[type="checkbox"]:checked + .item-checkmark {
            background: #F472B6;
        }

        .color-scheme.theme-pastel .item-card.bulk-selected {
            border-color: #F472B6;
            box-shadow: 0 8px 25px rgba(244, 114, 182, 0.25);
        }

        body.theme-rawr .item-checkmark {
            border-color: #DC2626;
        }

        body.theme-rawr .item-checkbox-label input[type="checkbox"]:checked + .item-checkmark {
            background: #DC2626;
        }

        body.theme-rawr .item-card.bulk-selected {
            border-color: #DC2626;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.25);
        }

        .theme-accessible .item-checkmark {
            border: 3px solid #000000;
        }

        .theme-accessible .item-checkbox-label input[type="checkbox"]:checked + .item-checkmark {
            background: #000000;
        }

        .theme-accessible .item-card.bulk-selected {
            border: 4px solid #000000;
            box-shadow: 6px 6px 0px #000000;
        }

        .card {
            background: rgba(240, 235, 230, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(219, 39, 119, 0.1);
            margin-bottom: 1.5rem;
            border: 1px solid rgba(230, 220, 210, 0.4);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
            font-family: 'Inter', sans-serif;
            letter-spacing: -0.01em;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(250, 248, 246, 0.95);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #f472b6;
            box-shadow: 0 0 0 4px rgba(244, 114, 182, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #f472b6, #db2777);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ec4899, #be185d);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 39, 119, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #a78bfa, #8b5cf6);
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #34d399, #10b981);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #10b981, #059669);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            transform: translateY(-2px);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            padding: 0.5rem;
        }

        /* Mobile optimization for multiple items visible */
        @media (max-width: 768px) {
            .items-grid {
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .items-grid {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                grid-auto-rows: auto;
                gap: 0.375rem;
                width: 100%;
                box-sizing: border-box;
            }
            
            .item-card {
                min-width: 0;
                max-width: 100%;
            }
        }

        @media (max-width: 360px) {
            .items-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.25rem;
            }
        }

        .item-card {
            background: rgba(250, 248, 246, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: visible;
            box-shadow: 0 8px 32px rgba(244, 114, 182, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(230, 220, 210, 0.4);
            width: 100%;
            box-sizing: border-box;
            padding: 1.25rem;
            position: relative;
        }

        .item-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(244, 114, 182, 0.15);
        }

        .item-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-size: 2rem;
            border-radius: 20px 20px 0 0;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .item-image {
                height: 100px;
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .item-image {
                height: 80px;
                font-size: 1rem;
            }
        }

        .item-content {
            padding: 1rem;
        }

        @media (max-width: 768px) {
            .item-content {
                padding: 0.6rem;
            }
            
            .item-source {
                font-size: 0.75rem;
                padding: 0.2rem 0.45rem;
            }
            
            .item-date {
                font-size: 0.7rem;
                margin-top: 0.2rem;
            }
            
            .item-prices {
                font-size: 0.85rem;
                margin: 0.4rem 0;
            }
            
            .status-actions {
                gap: 0.4rem;
            }
            
            .btn-small {
                padding: 0.35rem 0.7rem;
                font-size: 0.75rem;
            }
            
            .status-change-btn {
                min-width: 90px;
                font-size: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            .item-content {
                padding: 0.4rem;
            }
            
            .item-source {
                font-size: 0.7rem;
                padding: 0.15rem 0.4rem;
            }
            
            .item-date {
                font-size: 0.65rem;
                margin-top: 0.15rem;
            }
            
            .item-date i {
                font-size: 0.6rem;
            }
            
            .item-prices {
                margin: 0.3rem 0;
                font-size: 0.8rem;
            }
            
            .item-tags {
                margin: 0.3rem 0;
                gap: 0.2rem;
            }
            
            .tag, .tag-more {
                font-size: 0.6rem;
                padding: 0.15rem 0.35rem;
            }
            
            .status-actions {
                gap: 0.3rem;
                margin-top: 0.4rem;
            }
            
            .btn-small {
                padding: 0.25rem 0.5rem;
                font-size: 0.7rem;
            }
            
            .status-change-btn {
                min-width: 80px;
                font-size: 0.7rem;
            }
            
            .status-badge {
                font-size: 0.7rem;
                padding: 0.15rem 0.5rem;
            }
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .item-source {
            font-size: 0.875rem;
            color: #6b7280;
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .item-date {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .item-date i {
            font-size: 0.7rem;
        }

        .sold-date {
            color: #059669 !important;
            font-weight: 500;
        }

        .sold-date i {
            color: #10b981 !important;
        }

        /* Tags Styles */
        .item-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tag {
            background: #f1f5f9;
            color: #475569;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            border: 1px solid #e2e8f0;
            white-space: nowrap;
            transition: all 0.2s ease;
        }

        /* Tag color variations */
        .tag:nth-child(3n+1) {
            background: #fef3c7;
            color: #92400e;
            border-color: #fde68a;
        }

        .tag:nth-child(3n+2) {
            background: #dbeafe;
            color: #1e40af;
            border-color: #bfdbfe;
        }

        .tag:nth-child(3n+3) {
            background: #dcfce7;
            color: #166534;
            border-color: #bbf7d0;
        }

        .tag-more {
            background: #e2e8f0;
            color: #64748b;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            border: 1px solid #cbd5e1;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

         /* Default status badge colors - matching dashboard pipeline with high specificity */
         .status-badge.status-missing-info,
         .status-missing-info { 
             background: linear-gradient(135deg, #dc2626, #991b1b) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-badge.status-itemized,
         .status-itemized { 
             background: linear-gradient(135deg, #be185d, #9f1239) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-badge.status-sanitize,
         .status-sanitize { 
             background: linear-gradient(135deg, #1e40af, #1e3a8a) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-badge.status-racked,
         .status-racked { 
             background: linear-gradient(135deg, #7c3aed, #5b21b6) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-badge.status-listed,
         .status-listed { 
             background: linear-gradient(135deg, #ea580c, #c2410c) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-badge.status-sold,
         .status-sold { 
             background: linear-gradient(135deg, #059669, #047857) !important; 
             color: white !important; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }

         /* Legacy status support for existing items - updated to match dashboard */
         .status-incomplete { 
             background: linear-gradient(135deg, #dc2626, #991b1b); 
             color: white; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-purchased { 
             background: linear-gradient(135deg, #be185d, #9f1239); 
             color: white; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }
         .status-washed { 
             background: linear-gradient(135deg, #1e40af, #1e3a8a); 
             color: white; 
             border-radius: 12px; 
             padding: 0.25rem 0.75rem; 
             font-weight: 500; 
             font-size: 0.8rem; 
         }

         /* Bulk Upload Styles */
         .bulk-upload-card {
             background: rgba(240, 235, 230, 0.95);
             backdrop-filter: blur(10px);
             border-radius: 20px;
             border: 1px solid rgba(230, 220, 210, 0.4);
             box-shadow: 0 8px 32px rgba(219, 39, 119, 0.1); /* Default pink */
         }

         /* Theme-specific bulk upload card styles */
         .color-scheme .bulk-upload-card {
             box-shadow: 0 8px 32px color-mix(in srgb, var(--theme-primary), transparent 90%);
             border-color: color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         body.theme-rawr .bulk-upload-card {
             box-shadow: 0 8px 32px rgba(220, 38, 38, 0.1) !important;
             border-color: rgba(220, 38, 38, 0.2) !important;
         }

         .bulk-upload-area {
             text-align: center;
             padding: 2rem;
         }

         .bulk-upload-button {
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             gap: 0.75rem;
             padding: 2rem;
             border: 2px dashed rgba(219, 39, 119, 0.3); /* Default pink */
             border-radius: 12px;
             background: rgba(250, 248, 246, 0.95);
             cursor: pointer;
             transition: all 0.3s ease;
             min-height: 120px;
         }

         /* Theme-specific bulk upload button styles */
         .color-scheme .bulk-upload-button {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
         }

         body.theme-rawr .bulk-upload-button {
             border-color: rgba(220, 38, 38, 0.3) !important;
         }

         .bulk-upload-button:hover {
             border-color: rgba(219, 39, 119, 0.6);
             background: rgba(250, 248, 246, 1);
             transform: translateY(-2px);
             box-shadow: 0 6px 20px rgba(219, 39, 119, 0.2);
         }

         /* Enhanced Bulk Upload Card Hover */
         .bulk-upload-card:hover {
             transform: translateY(-2px);
             box-shadow: 0 12px 40px rgba(219, 39, 119, 0.15);
             border-color: rgba(219, 39, 119, 0.3);
         }

         /* Theme-specific bulk upload hovers */
         .color-scheme .bulk-upload-button:hover {
             border-color: var(--theme-primary);
             background: color-mix(in srgb, var(--theme-primary), transparent 95%);
             box-shadow: 0 6px 20px color-mix(in srgb, var(--theme-primary), transparent 80%);
         }

         .color-scheme .bulk-upload-card:hover {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
             box-shadow: 0 12px 40px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         /* Rawr theme bulk upload hovers */
         body.theme-rawr .bulk-upload-button:hover {
             border-color: rgba(220, 38, 38, 0.6) !important;
             background: rgba(254, 242, 242, 1) !important;
             box-shadow: 0 6px 20px rgba(220, 38, 38, 0.2) !important;
         }

         body.theme-rawr .bulk-upload-card:hover {
             border-color: rgba(220, 38, 38, 0.3) !important;
             box-shadow: 0 12px 40px rgba(220, 38, 38, 0.15) !important;
         }

         .bulk-upload-button i {
             font-size: 2rem;
             color: #db2777; /* Default pink */
         }

         /* Theme-specific bulk upload icon colors */
         .color-scheme .bulk-upload-button i {
             color: var(--theme-primary);
         }

         body.theme-rawr .bulk-upload-button i {
             color: #dc2626 !important; /* Red for rawr theme */
         }

         .bulk-upload-button span {
             font-size: 1.2rem;
             font-weight: 600;
             color: #374151;
         }

         .bulk-upload-button small {
             color: #6b7280;
             font-size: 0.9rem;
         }

         .section-divider {
             text-align: center;
             margin: 2rem 0;
             position: relative;
         }

         .section-divider::before {
             content: '';
             position: absolute;
             top: 50%;
             left: 0;
             right: 0;
             height: 1px;
             background: #e5e7eb;
         }

        .section-divider span {
            background: #f8f6f3;
            padding: 0 1rem;
            color: #6b7280;
            font-weight: 500;
            position: relative;
        }

         .bulk-progress {
             margin-top: 1.5rem;
             padding: 1.5rem;
             background: #f8fafc;
             border-radius: 8px;
             border: 1px solid #e5e7eb;
         }

         /* Enhanced Cute Bulk Progress Styles */
         .cute-bulk-progress {
             margin-top: 1.5rem;
             padding: 2rem;
             background: linear-gradient(135deg, rgba(250, 248, 246, 0.95), rgba(255, 255, 255, 0.9));
             backdrop-filter: blur(10px);
             border-radius: 20px;
             border: 2px solid rgba(244, 114, 182, 0.2);
             box-shadow: 0 10px 30px rgba(244, 114, 182, 0.1);
             transition: all 0.3s ease;
         }

         .cute-bulk-progress:hover {
             transform: translateY(-2px);
             box-shadow: 0 15px 40px rgba(244, 114, 182, 0.15);
             border-color: rgba(244, 114, 182, 0.3);
         }

         /* Theme-specific bulk progress hovers */
         .color-scheme .cute-bulk-progress {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 80%);
             box-shadow: 0 10px 30px color-mix(in srgb, var(--theme-primary), transparent 90%);
         }

         .color-scheme .cute-bulk-progress:hover {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
             box-shadow: 0 15px 40px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         body.theme-rawr .cute-bulk-progress {
             border-color: rgba(220, 38, 38, 0.2) !important;
             box-shadow: 0 10px 30px rgba(220, 38, 38, 0.1) !important;
         }

         body.theme-rawr .cute-bulk-progress:hover {
             border-color: rgba(220, 38, 38, 0.3) !important;
             box-shadow: 0 15px 40px rgba(220, 38, 38, 0.15) !important;
         }

         .progress-header-enhanced {
             display: flex;
             align-items: center;
             gap: 1rem;
             margin-bottom: 1.5rem;
         }

         .progress-icon {
             width: 60px;
             height: 60px;
             border-radius: 50%;
             background: linear-gradient(135deg, #f472b6, #db2777);
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 1.8rem;
             box-shadow: 0 8px 20px rgba(244, 114, 182, 0.3);
             animation: iconPulse 2s ease-in-out infinite;
         }

         .processing-icon {
             animation: iconSpin 3s linear infinite;
         }

         .completed-icon {
             animation: iconBounce 0.6s ease-out;
         }

         .progress-text h4 {
             margin: 0 0 0.5rem 0;
             font-size: 1.3rem;
             font-weight: 600;
             color: #db2777; /* Default pink */
         }

         /* Theme-specific progress text colors */
         .color-scheme .progress-text h4 {
             color: var(--theme-primary);
         }

         body.theme-rawr .progress-text h4 {
             color: #dc2626 !important;
         }

         .progress-counter {
             display: flex;
             align-items: baseline;
             gap: 0.5rem;
             font-size: 1rem;
             color: #6b7280;
         }

         .current-count {
             font-size: 1.5rem;
             font-weight: 700;
             color: #db2777; /* Default pink */
         }

         /* Theme-specific current count colors */
         .color-scheme .current-count {
             color: var(--theme-primary);
         }

         body.theme-rawr .current-count {
             color: #dc2626 !important;
         }

         .divider {
             font-weight: 500;
             color: #9ca3af;
         }

         .total-count {
             font-size: 1.2rem;
             font-weight: 600;
             color: #374151;
         }

         .label {
             font-size: 0.9rem;
             color: #6b7280;
         }

         .progress-bar-enhanced {
             margin-bottom: 1rem;
         }

         .progress-track {
             width: 100%;
             height: 12px;
             background: rgba(244, 114, 182, 0.1);
             border-radius: 20px;
             overflow: hidden;
             margin-bottom: 0.75rem;
         }

         .progress-fill {
             height: 100%;
             background: linear-gradient(90deg, #f472b6, #db2777);
             border-radius: 20px;
             transition: width 0.3s ease;
             position: relative;
             overflow: hidden;
         }

         .progress-fill::after {
             content: '';
             position: absolute;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
             animation: shimmer 2s infinite;
         }

         .progress-fill.completed {
             background: linear-gradient(90deg, #10b981, #059669);
         }

         .progress-stats {
             display: flex;
             justify-content: space-between;
             align-items: center;
             font-size: 0.9rem;
         }

         .percentage {
             font-weight: 600;
             color: #db2777; /* Default pink */
             font-size: 1rem;
         }

         /* Theme-specific percentage colors */
         .color-scheme .percentage {
             color: var(--theme-primary);
         }

         body.theme-rawr .percentage {
             color: #dc2626 !important;
         }

         .time-remaining {
             color: #6b7280;
             font-style: italic;
         }

         .success-message-enhanced {
             margin-top: 1rem;
         }

         .success-content {
             display: flex;
             align-items: center;
             gap: 0.75rem;
             padding: 1rem;
             background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05));
             border-radius: 12px;
             border: 1px solid rgba(16, 185, 129, 0.2);
         }

         .success-icon {
             color: #10b981;
             font-size: 1.5rem;
             animation: successPulse 1s ease-out;
         }

         .success-text {
             color: #047857;
             font-size: 1rem;
             line-height: 1.4;
         }

         /* Animations */
         @keyframes iconPulse {
             0%, 100% { transform: scale(1); }
             50% { transform: scale(1.05); }
         }

         @keyframes iconSpin {
             0% { transform: rotate(0deg); }
             100% { transform: rotate(360deg); }
         }

         @keyframes successPulse {
             0% { transform: scale(0); }
             50% { transform: scale(1.2); }
             100% { transform: scale(1); }
         }

         @keyframes shimmer {
             0% { transform: translateX(-100%); }
             100% { transform: translateX(100%); }
         }

         .progress-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 1rem;
         }

         .progress-header h4 {
             margin: 0;
             color: #374151;
         }

         .progress-info {
             display: flex;
             flex-direction: column;
             align-items: flex-end;
             gap: 0.25rem;
         }

         .time-remaining {
             font-size: 0.8rem;
             color: #6b7280;
             font-style: italic;
         }

         .progress-bar-container {
             width: 100%;
             height: 8px;
             background: #e5e7eb;
             border-radius: 4px;
             overflow: hidden;
             margin-bottom: 1rem;
             position: relative;
         }

         .progress-percentage {
             position: absolute;
             top: -1.5rem;
             right: 0;
             font-size: 0.75rem;
             color: #6b7280;
             font-weight: 500;
         }

         .progress-bar-fill {
             height: 100%;
             background: linear-gradient(90deg, #6366f1, #8b5cf6);
             border-radius: 4px;
             transition: width 0.3s ease;
         }

         .success-message {
             color: #059669;
             font-weight: 500;
             display: flex;
             align-items: center;
             gap: 0.5rem;
             margin: 0;
         }

         .success-message i {
             color: #10b981;
         }

         /* Status Dropdown Styles */
         .status-dropdown {
             position: relative;
             display: inline-block;
         }

         .status-actions {
             position: relative;
             z-index: 10;
         }

         .status-change-btn {
             display: flex;
             align-items: center;
             gap: 0.5rem;
             min-width: 120px;
             justify-content: space-between;
         }

         .status-change-btn i {
             font-size: 0.8rem;
             transition: transform 0.2s ease;
         }

         .status-dropdown[x-data*="open: true"] .status-change-btn i {
             transform: rotate(180deg);
         }

         .status-dropdown-menu {
             position: absolute;
             top: 100%;
             left: 0;
             right: 0;
             background: white;
             border: 1px solid #e5e7eb;
             border-radius: 8px;
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
             z-index: 1000;
             overflow: visible;
             margin-top: 0.25rem;
             min-width: 160px;
             max-height: 300px;
             overflow-y: auto;
         }

         .status-option {
             width: 100%;
             padding: 0.5rem;
             border: none;
             background: white;
             cursor: pointer;
             transition: background-color 0.2s ease;
             display: flex;
             align-items: center;
         }

         .status-option:hover {
             background: #f9fafb;
         }

         .status-option .status-badge {
             font-size: 0.875rem;
             padding: 0.25rem 0.5rem;
             margin: 0;
         }

        /* Fixed Filter Bar */
        .filter-bar {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            z-index: 999;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
        }

        .filter-bar-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .filter-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            gap: 1rem;
        }

        .filter-toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
        }

        .filter-toggle-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }

        .quick-filters {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
            justify-content: flex-end;
        }

        .quick-filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background: rgba(250, 248, 246, 0.95);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-filter-select:hover {
            border-color: #9ca3af;
        }

        .quick-filter-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            flex: 1;
            max-width: 400px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            color: #9ca3af;
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 1;
        }

        .main-search {
            width: 100%;
            padding: 10px 12px 10px 36px;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            background: white;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .main-search:hover {
            border-color: #d1d5db;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .main-search:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .main-search:focus + .search-icon {
            color: #6366f1;
        }

        .clear-search-btn {
            position: absolute;
            right: 8px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #6b7280;
        }

        .clear-search-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .clear-filters-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .clear-filters-btn:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .filter-badge {
            background: #ff6b9d;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            min-width: 20px;
            text-align: center;
        }

        /* Filter Modal */
        .filter-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .filter-modal-content {
            background: white;
            border-radius: 20px;
            padding: 0;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .filter-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 20px 20px 0 0;
        }

        .filter-modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #666;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: #e9ecef;
            color: #333;
        }

        .filter-options {
            padding: 24px;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-group label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: rgba(250, 248, 246, 0.95);
            font-size: 0.9rem;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .search-input {
            background: rgba(250, 248, 246, 0.95);
            border: 2px solid #e9ecef !important;
            font-size: 0.95rem !important;
            padding: 14px 16px !important;
        }

        .search-input:focus {
            background: rgba(250, 248, 246, 1) !important;
            border-color: #ff6b9d !important;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1) !important;
        }

        /* Tags Input Styling */
        .tags-input {
            background: rgba(250, 248, 246, 0.95);
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .tags-input:focus {
            background: rgba(250, 248, 246, 1);
            border-color: #ff6b9d;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
            outline: none;
        }

        .tags-input::placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        /* Till Tab Styles */
        .till-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .till-header-wrapper {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .till-header {
            text-align: center;
        }

        .till-header h2 {
            margin: 0 0 0.5rem 0;
            color: #1f2937;
            font-size: 2rem;
            font-weight: 700;
        }

        .till-header p {
            margin: 0;
            color: #6b7280;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Dark mode support for till header */
        .dark-mode .till-header-wrapper {
            background: linear-gradient(135deg, #374151, #4b5563);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .till-header h2 {
            color: #f9fafb;
        }

        .dark-mode .till-header p {
            color: #d1d5db;
        }

        /* Color scheme support for till header */
        .color-scheme .till-header-wrapper {
            background: linear-gradient(135deg, 
                color-mix(in srgb, var(--theme-primary), white 97%), 
                color-mix(in srgb, var(--theme-secondary), white 95%));
            border: 1px solid color-mix(in srgb, var(--theme-primary), transparent 85%);
        }

        .color-scheme .till-header h2 {
            color: color-mix(in srgb, var(--theme-primary), black 20%);
        }

        .color-scheme .till-header p {
            color: color-mix(in srgb, var(--theme-primary), black 40%);
        }

        .payment-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .payment-method-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .payment-method-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .payment-header h4 {
            margin: 0;
            color: #1f2937;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .qr-code-container {
            text-align: center;
            margin-bottom: 1rem;
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9fafb;
            border-radius: 12px;
            border: 2px dashed #d1d5db;
        }

        .qr-code-image {
            max-width: 100%;
            max-height: 200px;
            width: auto;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .qr-error {
            text-align: center;
            color: #dc2626;
            padding: 1rem;
        }

        .qr-error i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .qr-error p {
            margin: 0 0 0.25rem 0;
            font-weight: 600;
        }

        .qr-error small {
            color: #6b7280;
        }

        .payment-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .payment-actions .btn-small {
            flex: 1;
        }

        @media (max-width: 768px) {
            .payment-methods-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .payment-method-card {
                padding: 1rem;
            }
            
            .till-header-wrapper {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border-radius: 12px;
            }
            
            .till-header h2 {
                font-size: 1.5rem;
            }
            
            .till-header p {
                font-size: 1rem;
            }
            
            .qr-code-container {
                min-height: 150px;
            }
            
            .payment-actions {
                flex-direction: column;
            }
            
            .payment-actions .btn-small {
                flex: none;
            }
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #ff6b9d;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .filter-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .filter-actions button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            color: #495057;
        }

        .btn-primary {
            background: #ff6b9d;
            color: white;
        }

        .btn-primary:hover {
            background: #e55a87;
        }

        .filter-results {
            padding: 16px 24px;
            background: rgba(255, 107, 157, 0.05);
            border-top: 1px solid #eee;
            text-align: center;
        }

        .filter-results p {
            margin: 0;
            color: #d63384;
            font-weight: 600;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .sticky-filter-btn {
                top: 100px;
                left: 15px;
                padding: 10px 16px;
                font-size: 0.85rem;
            }
            
            .filter-text {
                display: none;
            }
            
            .filter-modal {
                padding: 10px;
            }
            
            .filter-modal-content {
                max-height: 90vh;
            }
            
            .filter-modal-header {
                padding: 16px 20px;
            }
            
            .filter-options {
                padding: 20px;
            }
            
            .date-inputs {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .filter-actions {
                flex-direction: column;
                gap: 10px;
            }
        }

         /* About, Contact, and Sign In Page Styles */
         .about-page, .contact-page, .signin-page {
             max-width: 800px;
             margin: 0 auto;
             padding: 2rem;
         }

         .about-hero, .contact-hero, .signin-hero {
             text-align: center;
             margin-bottom: 3rem;
         }

         .about-hero h1, .contact-hero h1, .signin-hero h1 {
             font-size: 2.5rem;
             margin-bottom: 1rem;
             color: var(--theme-primary, #F472B6);
         }

         .about-subtitle, .contact-subtitle, .signin-subtitle {
             font-size: 1.2rem;
             color: #6b7280;
             margin: 0;
         }

         .about-section, .contact-section {
             margin-bottom: 2.5rem;
         }

         .about-section h2, .contact-section h2 {
             color: var(--theme-primary, #F472B6);
             margin-bottom: 1rem;
             display: flex;
             align-items: center;
             gap: 0.5rem;
         }

         .about-section p, .contact-section p {
             line-height: 1.6;
             color: #374151;
         }

         .features-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 1.5rem;
             margin-top: 1.5rem;
         }

         .feature-card {
             background: rgba(255, 255, 255, 0.7);
             backdrop-filter: blur(10px);
             border-radius: 16px;
             padding: 1.5rem;
             text-align: center;
             border: 1px solid rgba(255, 255, 255, 0.3);
         }

         .feature-card i {
             font-size: 2rem;
             color: var(--theme-primary, #F472B6);
             margin-bottom: 1rem;
         }

         .feature-card h3 {
             margin-bottom: 0.5rem;
             color: #374151;
         }

         .feature-card p {
             color: #6b7280;
             font-size: 0.9rem;
         }

         .contact-methods {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 1.5rem;
             margin: 2rem 0;
         }

         .contact-method {
             background: rgba(255, 255, 255, 0.7);
             backdrop-filter: blur(10px);
             border-radius: 16px;
             padding: 1.5rem;
             text-align: center;
             border: 1px solid rgba(255, 255, 255, 0.3);
         }

         .contact-method i {
             font-size: 2rem;
             color: var(--theme-primary, #F472B6);
             margin-bottom: 1rem;
         }

         .contact-method h3 {
             margin-bottom: 0.5rem;
             color: #374151;
         }

         .contact-method p {
             color: #6b7280;
             margin: 0.25rem 0;
         }

         .contact-note {
             font-size: 0.8rem;
             font-style: italic;
         }

         .signin-content {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 3rem;
             margin-top: 2rem;
         }

         .signin-form {
             background: rgba(255, 255, 255, 0.7);
             backdrop-filter: blur(10px);
             border-radius: 16px;
             padding: 2rem;
             border: 1px solid rgba(255, 255, 255, 0.3);
         }

         .signin-form h2 {
             margin-bottom: 1.5rem;
             color: #374151;
             text-align: center;
         }

         .signin-links {
             margin-top: 1.5rem;
             text-align: center;
         }

         .signin-links a {
             color: var(--theme-primary, #F472B6);
             text-decoration: none;
             display: block;
             margin: 0.5rem 0;
             font-size: 0.9rem;
         }

         .signin-links a:hover {
             text-decoration: underline;
         }

         .signin-benefits {
             background: rgba(255, 255, 255, 0.7);
             backdrop-filter: blur(10px);
             border-radius: 16px;
             padding: 2rem;
             border: 1px solid rgba(255, 255, 255, 0.3);
         }

         .signin-benefits h3 {
             color: var(--theme-primary, #F472B6);
             margin-bottom: 1rem;
             display: flex;
             align-items: center;
             gap: 0.5rem;
         }

         .signin-benefits ul {
             list-style: none;
             padding: 0;
         }

         .signin-benefits li {
             display: flex;
             align-items: center;
             gap: 0.5rem;
             margin: 0.75rem 0;
             color: #374151;
         }

         .signin-benefits i {
             color: var(--theme-primary, #F472B6);
             width: 1rem;
         }

         .local-storage-note {
             margin-top: 1.5rem;
             padding: 1rem;
             background: rgba(59, 130, 246, 0.1);
             border-radius: 8px;
             border-left: 4px solid #3b82f6;
         }

         .local-storage-note p {
             margin: 0;
             color: #1e40af;
             font-size: 0.875rem;
         }

         .btn-full {
             width: 100%;
         }

         .checkbox-label {
             display: flex;
             align-items: center;
             gap: 0.5rem;
             font-size: 0.9rem;
         }

         @media (max-width: 768px) {
             .about-page, .contact-page, .signin-page {
                 padding: 1rem;
             }

             .about-hero h1, .contact-hero h1, .signin-hero h1 {
                 font-size: 2rem;
             }

             .features-grid, .contact-methods {
                 grid-template-columns: 1fr;
             }

             .signin-content {
                 grid-template-columns: 1fr;
                 gap: 2rem;
             }
         }

         /* OCR Price Detection Styles */
         .price-input-group {
             display: flex;
             gap: 0.5rem;
             align-items: flex-end;
         }

         .price-input-group input {
             flex: 1;
         }

         .price-detect-btn {
             white-space: nowrap;
             min-width: 120px;
         }

         .ocr-suggestion {
             margin-top: 0.5rem;
             padding: 0.75rem;
             background: rgba(34, 197, 94, 0.1);
             border-radius: 8px;
             border-left: 4px solid #22c55e;
         }

         .suggestion-text {
             margin: 0;
             color: #166534;
             font-size: 0.875rem;
             display: flex;
             align-items: center;
             gap: 0.5rem;
         }

         .btn-link {
             background: none;
             border: none;
             color: #22c55e;
             text-decoration: underline;
             cursor: pointer;
             font-size: 0.875rem;
             margin-left: 0.5rem;
         }

         .btn-link:hover {
             color: #16a34a;
         }

         .multiple-prices {
             margin-top: 0.5rem;
             padding: 0.75rem;
             background: rgba(59, 130, 246, 0.1);
             border-radius: 8px;
             border-left: 4px solid #3b82f6;
         }

         .price-options {
             display: flex;
             gap: 0.5rem;
             margin-top: 0.5rem;
             flex-wrap: wrap;
         }

         .price-option {
             padding: 0.25rem 0.5rem;
             background: #3b82f6;
             color: white;
             border: none;
             border-radius: 4px;
             cursor: pointer;
             font-size: 0.8rem;
         }

         .price-option:hover {
             background: #2563eb;
         }

         .ocr-error {
             margin-top: 0.5rem;
             padding: 0.75rem;
             background: rgba(239, 68, 68, 0.1);
             border-radius: 8px;
             border-left: 4px solid #ef4444;
             color: #dc2626;
             font-size: 0.875rem;
         }

         @media (max-width: 480px) {
             .price-input-group {
                 flex-direction: column;
                 align-items: stretch;
             }
             
             .price-detect-btn {
                 min-width: auto;
             }
         }

        .item-prices {
            display: flex;
            justify-content: space-between;
            margin: 0.75rem 0;
            font-size: 0.875rem;
        }

        .price {
            font-weight: 600;
        }

        .profit {
            color: #059669;
            font-weight: 600;
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            display: inline-block;
        }

        .status-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .status-select {
            padding: 0.4rem 0.6rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: rgba(250, 248, 246, 0.95);
            font-size: 0.8rem;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 120px;
        }

        .status-select:hover {
            border-color: #9ca3af;
        }

        .status-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Status Dropdown Option Colors */
        .status-select option[value="Missing Info"] {
            background: linear-gradient(135deg, #fef2f2, #fecaca);
            color: #dc2626;
        }

        .status-select option[value="Itemized"] {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            color: #be185d;
        }

        .status-select option[value="Sanitize"] {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
        }

        .status-select option[value="Racked"] {
            background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
            color: #7c3aed;
        }

        .status-select option[value="Listed"] {
            background: linear-gradient(135deg, #fed7aa, #fdba74);
            color: #ea580c;
        }

        .status-select option[value="Sold"] {
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            color: #374151;
            font-weight: 600;
        }

        /* Custom Status Dropdown Styles */
        .custom-status-dropdown {
            position: relative;
            display: inline-block;
        }

        /* Ensure dropdown appears above other elements when open */
        .custom-status-dropdown {
            z-index: 1000;
        }
        
        /* When dropdown is open, ensure it's above everything */
        .custom-status-dropdown[x-data*="open: true"],
        .custom-status-dropdown.dropdown-open {
            z-index: 999999 !important;
            position: relative !important;
        }

        /* Ensure parent item card gets elevated when dropdown is open */
        .item-card:has(.custom-status-dropdown[x-data*="open: true"]),
        .item-card:has(.dropdown-open) {
            z-index: 999998 !important;
            position: relative !important;
        }

        /* Ensure dropdown menu has highest z-index */

        /* Create proper stacking context for dropdowns */
        .items-grid {
            position: relative;
        }

        .items-grid .item-card {
            position: relative;
        }

        /* When dropdown is open, elevate the entire card */
        .item-card:has(.dropdown-open) {
            z-index: 999999 !important;
            position: relative !important;
        }

        /* Ensure dropdown menu appears above everything */
        .dropdown-open .status-dropdown-menu {
            z-index: 999999 !important;
            position: absolute !important;
        }

        /* Additional fallback for browsers that don't support :has() */
        .custom-status-dropdown.dropdown-open {
            z-index: 999999 !important;
        }

        .custom-status-dropdown.dropdown-open .status-dropdown-menu {
            z-index: 999999 !important;
        }

        .status-dropdown-trigger {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .status-dropdown-trigger::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            pointer-events: none;
        }

        .status-dropdown-trigger:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }

        .status-dropdown-trigger:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .status-dropdown-trigger .fa-chevron-down {
            transition: transform 0.3s ease;
            font-size: 0.7rem;
            color: rgba(107, 114, 128, 0.8);
            opacity: 0.7;
        }

        .status-dropdown-trigger:hover .fa-chevron-down {
            opacity: 1;
            color: #6b7280;
        }

        .status-dropdown-trigger .fa-chevron-down.rotate-180 {
            transform: rotate(180deg);
        }

        /* Enhanced status badge inside trigger */
        .status-dropdown-trigger .status-badge {
            position: relative;
            z-index: 1;
            font-weight: 600;
            letter-spacing: 0.025em;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .status-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 999999 !important;
            margin-top: 0.5rem;
            background: rgba(250, 248, 246, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(230, 220, 210, 0.6);
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            min-width: 200px;
            transform: translateY(-2px);
        }

        .status-dropdown-options {
            max-height: 300px;
            overflow-y: auto;
        }

        /* Simplified Status Option Styling */
        .status-option-simple {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(230, 220, 210, 0.3);
        }

        .status-option-simple:last-child {
            border-bottom: none;
        }

        .status-option-simple:hover {
            background: rgba(244, 114, 182, 0.05);
        }

        .status-option-simple .status-badge {
            font-size: 0.875rem;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-weight: 500;
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }

        .status-option {
            width: 100%;
            padding: 0;
            border: none;
            background: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .status-option:hover {
            background: rgba(0, 0, 0, 0.02);
        }

        .status-option-content {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0.75rem;
            border-bottom: 1px solid #f3f4f6;
        }

        .status-option:last-child .status-option-content {
            border-bottom: none;
        }

        .status-progress {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-progress .progress-bar {
            flex: 1;
            height: 6px;
            background: #f3f4f6;
            border-radius: 3px;
            overflow: hidden;
        }

        .status-count {
            font-size: 0.75rem;
            color: #6b7280;
            font-weight: 600;
            min-width: 20px;
            text-align: right;
        }

        .sold-option {
            border-top: 2px solid #f59e0b;
        }

        .sold-option .status-option-content {
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
        }

        /* Return Option Styles */

        /* Return indicator dot */
        .return-dot {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        /* Ensure item cards have relative positioning for dot placement */
        .item-card {
            position: relative;
        }

        /* Mobile adjustments for return dot */
        @media (max-width: 768px) {
            .return-dot {
                width: 10px;
                height: 10px;
                top: 6px;
                right: 6px;
                border-width: 1.5px;
            }
        }

        @media (max-width: 480px) {
            .return-dot {
                width: 8px;
                height: 8px;
                top: 5px;
                right: 5px;
                border-width: 1px;
            }
        }

        .return-option {
            border-top: 2px solid #dc2626;
        }

        .return-option .status-option-content {
            background: linear-gradient(135deg, #fef2f2, #fecaca);
        }

        .return-badge {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .return-help {
            color: #6b7280;
            font-size: 0.65rem;
            margin-top: 0.25rem;
        }

        .photo-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .photo-upload, .camera-option {
            position: relative;
            border: 2px dashed #fecaca;
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(250, 248, 246, 0.95);
        }

        .photo-upload:hover, .camera-option:hover {
            border-color: rgba(219, 39, 119, 0.6);
            background: rgba(250, 248, 246, 1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 39, 119, 0.2);
        }

        .photo-upload input {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }

        .camera-interface {
            margin-top: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            overflow: hidden;
        }

        .camera-preview {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        .camera-controls {
            padding: 1rem;
            background: #f9fafb;
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .photo-result {
            margin-top: 1rem;
            text-align: center;
        }

        .photo-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
        }

        .photo-actions {
            margin-top: 0.5rem;
        }

        .photos-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            border: 1px solid #fecaca;
        }

        .photo-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
            background: #f3f4f6;
        }

        .photo-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }

        .remove-photo-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .remove-photo-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .primary-photo-badge {
            position: absolute;
            bottom: 4px;
            left: 4px;
            background: linear-gradient(135deg, #34d399, #10b981);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .photo-limit-message {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
            padding: 0.75rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .pricing-option {
            margin-bottom: 0.75rem;
        }

        .pricing-option .toggle-label {
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .auto-price-info {
            margin-top: 0.5rem;
        }

        .photo-carousel {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .photo-nav {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .photo-nav-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .photo-nav-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .photo-dots {
            display: flex;
            gap: 0.25rem;
        }

        .photo-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-dot.active {
            background: white;
            transform: scale(1.25);
        }









        .accessible-mode h1,
        .accessible-mode h2,
        .accessible-mode h3,
        .accessible-mode h4,
        .accessible-mode h5,
        .accessible-mode h6 {
            color: #000000 !important;
        }

        .accessible-mode * {
            color: inherit;
        }

        .accessible-mode .card h2,
        .accessible-mode .card h3 {
            color: #000000 !important;
        }

        .accessible-mode .card h2 i,
        .accessible-mode .card h3 i,
        .accessible-mode h2 i,
        .accessible-mode h3 i {
            color: #000000 !important;
        }

        .accessible-mode .racks-logo::before {
            background: #ffffff;
        }

        .accessible-mode .racks-logo::after {
            background: linear-gradient(180deg, 
                transparent 0%, 
                transparent 15%, 
                #ffffff 15%, 
                #ffffff 25%, 
                transparent 25%, 
                transparent 40%, 
                #ffffff 40%, 
                #ffffff 50%, 
                transparent 50%, 
                transparent 65%, 
                #ffffff 65%, 
                #ffffff 75%, 
                transparent 75%, 
                transparent 90%, 
                #ffffff 90%, 
                #ffffff 100%);
            border-color: #ffffff;
        }

        .accessible-mode .racks-logo .hanger-1,
        .accessible-mode .racks-logo .hanger-2,
        .accessible-mode .racks-logo .hanger-3 {
            background: #ffffff;
        }

        .accessible-mode .brand-name {
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff;
        }

        .accessible-mode .tab i {
            color: inherit;
        }

        .accessible-mode .btn i {
            color: inherit;
        }

        .accessible-mode .remove-photo-btn {
            background: #000000;
            color: #ffffff;
        }

        .accessible-mode .primary-photo-badge {
            background: #000000;
            color: #ffffff;
        }

        /* Dashboard Styles */
        .dashboard-grid {
            display: grid;
            gap: 0.75rem;
        }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(244, 114, 182, 0.15);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(107, 114, 128, 0.15);
        }

        .metric-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #6b7280;
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.2);
        }

        .metric-icon.profit {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            color: #6b7280;
        }

        .metric-icon.success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .metric-icon.profit {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }

        .metric-icon.info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .metric-icon.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        /* Enhanced Dashboard Animations */
        .metric-icon:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
        }

        /* Add Item Tab Improvements */
        .add-item-header {
            text-align: center;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 20px;
            margin-bottom: 2rem;
            border: 1px solid #e2e8f0;
        }

        .add-item-header h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
        }

        .add-item-header p {
            margin: 0;
            color: #6b7280;
            font-size: 1.1rem;
        }

        .upload-options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .upload-option-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .upload-option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: var(--accent-color, #db2777);
        }

        .upload-option-card.active {
            border-color: var(--success-color, #10b981);
            background: var(--success-bg, linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%));
        }

        .option-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .option-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }

        .bulk-icon {
            background: var(--primary-gradient, linear-gradient(135deg, #8b5cf6, #7c3aed));
            box-shadow: 0 4px 15px var(--primary-shadow, rgba(139, 92, 246, 0.3));
        }

        .single-icon {
            background: var(--secondary-gradient, linear-gradient(135deg, #db2777, #be185d));
            box-shadow: 0 4px 15px var(--secondary-shadow, rgba(219, 39, 119, 0.3));
        }

        .option-content h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
        }

        .option-content p {
            margin: 0;
            color: #6b7280;
            font-size: 1rem;
        }

        .bulk-upload-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border: 2px dashed #d1d5db;
            border-radius: 16px;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 120px;
        }

        .bulk-upload-button:hover {
            border-color: var(--primary-color, #8b5cf6);
            background: var(--primary-bg-light, #f5f3ff);
            transform: translateY(-1px);
        }

        .bulk-upload-button i {
            font-size: 2rem;
            color: var(--primary-color, #8b5cf6);
            margin-bottom: 0.5rem;
        }

        .bulk-upload-button span {
            font-weight: 600;
            color: #374151;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .bulk-upload-button small {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .single-item-form {
            margin-top: 1.5rem;
        }

        .single-item-form .form-group {
            margin-bottom: 1.5rem;
        }

        .single-item-form .form-group:last-child {
            margin-bottom: 0;
        }

        .form-actions {
            margin-top: 2rem;
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .btn-large {
            padding: 0.875rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            min-width: 200px;
        }

        .form-section {
            background: #f8fafc;
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e2e8f0;
        }

        .form-section h4 {
            margin: 0 0 1rem 0;
            color: #374151;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-section h4 i {
            color: var(--primary-color, #6366f1);
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color, #6366f1);
            box-shadow: 0 0 0 3px var(--primary-shadow-light, rgba(99, 102, 241, 0.1));
        }

        .form-group label:not(.toggle-label) {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
            font-size: 0.95rem;
        }

        .form-group label:not(.toggle-label) i {
            margin-right: 0.5rem;
            color: #6b7280;
            width: 16px;
        }

        .help-text {
            display: block;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #6b7280;
            line-height: 1.4;
        }

        .help-text i {
            margin-right: 0.5rem;
            color: var(--primary-color, #6366f1);
        }

        .price-input-group {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .price-input-group input {
            flex: 1;
        }

        .price-detect-btn {
            white-space: nowrap;
            flex-shrink: 0;
            padding: 0.75rem 1rem;
        }

        .ocr-suggestion {
            margin-top: 0.75rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #0ea5e9;
            border-radius: 8px;
        }

        .suggestion-text {
            margin: 0;
            color: #0c4a6e;
            font-weight: 500;
        }

        .btn-link {
            background: none;
            border: none;
            color: #0ea5e9;
            text-decoration: underline;
            cursor: pointer;
            font-weight: 600;
            margin-left: 0.5rem;
            padding: 0;
        }

        .btn-link:hover {
            color: #0284c7;
        }

        .multiple-prices {
            margin-top: 0.5rem;
        }

        .price-options {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .price-option {
            background: white;
            border: 1px solid #0ea5e9;
            color: #0c4a6e;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .price-option:hover {
            background: #0ea5e9;
            color: white;
        }

        .ocr-error {
            margin-top: 0.75rem;
            padding: 1rem;
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            color: #dc2626;
        }

        /* Dark mode form improvements */
        .dark-mode .form-section {
            background: #111827;
            border-color: #374151;
        }

        .dark-mode .form-section h4 {
            color: #f9fafb;
        }

        .dark-mode .form-input,
        .dark-mode .form-select {
            background: #1f2937;
            border-color: #374151;
            color: #f9fafb;
        }

        .dark-mode .form-input:focus,
        .dark-mode .form-select:focus {
            border-color: var(--primary-color, #6366f1);
            box-shadow: 0 0 0 3px var(--primary-shadow-dark, rgba(99, 102, 241, 0.2));
        }

        .dark-mode .form-group label:not(.toggle-label) {
            color: #d1d5db;
        }

        .dark-mode .help-text {
            color: #9ca3af;
        }

        .dark-mode .ocr-suggestion {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            border-color: #3b82f6;
        }

        .dark-mode .suggestion-text {
            color: #dbeafe;
        }

        .dark-mode .price-option {
            background: #1f2937;
            border-color: #3b82f6;
            color: #dbeafe;
        }

        .dark-mode .price-option:hover {
            background: #3b82f6;
            color: white;
        }

        .photo-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .photo-upload,
        .camera-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem 1rem;
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 100px;
        }

        .photo-upload:hover,
        .camera-option:hover {
            border-color: var(--accent-color, #db2777);
            background: var(--accent-bg-light, #fdf2f8);
            transform: translateY(-1px);
        }

        .photo-upload p,
        .camera-option p {
            margin: 0;
            font-weight: 500;
            color: #374151;
            font-size: 0.9rem;
        }

        .photos-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            background: white;
            border: 2px solid #e5e7eb;
        }

        .photo-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-photo-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(220, 38, 38, 0.9);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .remove-photo-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .primary-photo-badge {
            position: absolute;
            bottom: 4px;
            left: 4px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            font-size: 0.6rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .photo-limit-message {
            text-align: center;
            padding: 1rem;
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            color: #92400e;
            font-weight: 500;
        }

        /* Dark mode adjustments */
        .dark-mode .add-item-header {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border-color: #374151;
        }

        .dark-mode .add-item-header h1 {
            color: #f9fafb;
        }

        .dark-mode .add-item-header p {
            color: #d1d5db;
        }

        .dark-mode .upload-option-card {
            background: #1f2937;
            border-color: #374151;
        }

        .dark-mode .upload-option-card:hover {
            border-color: var(--accent-color, #db2777);
        }

        .dark-mode .option-content h3 {
            color: #f9fafb;
        }

        .dark-mode .option-content p {
            color: #d1d5db;
        }

        .dark-mode .bulk-upload-button {
            background: #111827;
            border-color: #374151;
        }

        .dark-mode .bulk-upload-button:hover {
            background: #1f2937;
            border-color: var(--primary-color, #8b5cf6);
        }

        .dark-mode .photo-upload,
        .dark-mode .camera-option {
            background: #111827;
            border-color: #374151;
        }

        .dark-mode .photo-upload:hover,
        .dark-mode .camera-option:hover {
            background: #1f2937;
            border-color: var(--accent-color, #db2777);
        }

        .dark-mode .photos-gallery {
            background: #111827;
            border-color: #374151;
        }

        .dark-mode .form-actions {
            border-color: #374151;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .add-item-header {
                padding: 1.5rem 1rem;
            }

            .add-item-header h1 {
                font-size: 1.75rem;
            }

            .upload-option-card {
                padding: 1.5rem;
            }

            .option-header {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .option-icon {
                width: 50px;
                height: 50px;
                font-size: 1.25rem;
            }

            .bulk-upload-button {
                padding: 1.5rem;
                min-height: 100px;
            }

            .photo-options {
                grid-template-columns: 1fr;
            }

            .photos-gallery {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 0.5rem;
            }

            .btn-large {
                width: 100%;
                min-width: auto;
            }
        }

        /* Report Generation Styles */
        .report-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .report-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 1.5rem 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .report-btn i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .report-btn span {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .report-btn small {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .report-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .btn-info {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
            border: none;
        }

        .btn-info:hover {
            background: linear-gradient(135deg, #0891b2, #0e7490);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(6, 182, 212, 0.3);
        }

        /* QR Upload Styles */
        .qr-upload-options .photo-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .qr-photo-upload {
            border: 2px dashed #10b981;
            background: rgba(16, 185, 129, 0.05);
        }

        .qr-photo-upload:hover {
            border-color: #059669;
            background: rgba(16, 185, 129, 0.1);
            transform: translateY(-2px);
        }

        .qr-url-option {
            border: 2px dashed #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }

        .qr-url-option:hover {
            border-color: #1d4ed8;
            background: rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }

        .qr-preview {
            text-align: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 12px;
        }

        .qr-preview img {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .qr-preview img:hover {
            transform: scale(1.05);
        }

        .metric-content {
            flex: 1;
        }

        .metric-value {
            font-family: 'Inter', sans-serif;
            font-size: 1.75rem;
            font-weight: 600;
            color: #1f2937;
            line-height: 1;
            letter-spacing: -0.02em;
        }

        .metric-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        /* Inventory Pipeline Styles */
        .inventory-pipeline {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .pipeline-stage {
            flex: 1;
            min-width: 180px;
            background: rgba(250, 248, 246, 0.95);
            border: 2px solid rgba(230, 220, 210, 0.4);
            border-radius: 16px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .pipeline-stage:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: rgba(0, 0, 0, 0.1);
        }

        .pipeline-stage.has-items {
            background: rgba(255, 255, 255, 0.98);
            border-color: rgba(0, 0, 0, 0.08);
        }

        .pipeline-stage.has-items:hover {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .stage-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .stage-icon.missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b);
        }

        .stage-icon.itemized {
            background: linear-gradient(135deg, #be185d, #9f1239);
        }

        .stage-icon.sanitize {
            background: linear-gradient(135deg, #1e40af, #1e3a8a);
        }

        .stage-icon.racked {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }

        .stage-icon.listed {
            background: linear-gradient(135deg, #ea580c, #c2410c);
        }

        .stage-icon.sold {
            background: linear-gradient(135deg, #059669, #047857);
        }

        .stage-content {
            flex: 1;
        }

        .stage-title {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.25rem;
        }

        .stage-count {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.25rem;
            line-height: 1;
        }

        .stage-subtitle {
            font-size: 0.8rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .stage-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #374151;
            background: rgba(0, 0, 0, 0.05);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            display: inline-block;
        }

        .stage-value.profit {
            color: #059669;
            background: rgba(5, 150, 105, 0.1);
        }

        .stage-arrow {
            position: absolute;
            right: -0.75rem;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: 2px solid rgba(230, 220, 210, 0.4);
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: #6b7280;
            z-index: 1;
        }

        .pipeline-stage.sold-stage .stage-arrow {
            display: none;
        }

        .pipeline-summary {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(249, 250, 251, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(229, 231, 235, 0.6);
            flex-wrap: wrap;
        }

        .summary-item {
            flex: 1;
            min-width: 150px;
            text-align: center;
        }

        .summary-label {
            display: block;
            font-size: 0.8rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }

        .summary-value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .summary-value.investment {
            color: #be185d;
        }

        .summary-value.potential {
            color: #ea580c;
        }

        .summary-value.profit {
            color: #059669;
        }

        /* Theme-specific pipeline styles */
        .color-scheme .pipeline-stage {
            border-color: color-mix(in srgb, var(--theme-primary), transparent 85%);
        }

        .color-scheme .pipeline-stage:hover {
            border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
            box-shadow: 0 8px 25px color-mix(in srgb, var(--theme-primary), transparent 85%);
        }

        .color-scheme .stage-icon.missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b);
        }

        .color-scheme .stage-icon.itemized {
            background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%));
        }

        .color-scheme .stage-icon.sanitize {
            background: linear-gradient(135deg, var(--theme-secondary), color-mix(in srgb, var(--theme-secondary), black 15%));
        }

        .color-scheme .stage-icon.racked {
            background: linear-gradient(135deg, var(--theme-accent), color-mix(in srgb, var(--theme-accent), black 15%));
        }

        .color-scheme .stage-icon.listed {
            background: linear-gradient(135deg, var(--theme-accent-2), color-mix(in srgb, var(--theme-accent-2), black 15%));
        }

        .color-scheme .stage-icon.sold {
            background: linear-gradient(135deg, #059669, #047857);
        }

        .color-scheme .summary-value.investment {
            color: var(--theme-primary);
        }

        .color-scheme .summary-value.potential {
            color: var(--theme-accent);
        }

        /* Theme-aware status badge colors */
        .color-scheme .status-missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
            color: white !important;
        }

        .color-scheme .status-itemized {
            background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%)) !important;
            color: white !important;
        }

        .color-scheme .status-sanitize {
            background: linear-gradient(135deg, var(--theme-secondary), color-mix(in srgb, var(--theme-secondary), black 15%)) !important;
            color: white !important;
        }

        .color-scheme .status-racked {
            background: linear-gradient(135deg, var(--theme-accent), color-mix(in srgb, var(--theme-accent), black 15%)) !important;
            color: white !important;
        }

        .color-scheme .status-listed {
            background: linear-gradient(135deg, var(--theme-accent-2), color-mix(in srgb, var(--theme-accent-2), black 15%)) !important;
            color: white !important;
        }

        .color-scheme .status-sold {
            background: linear-gradient(135deg, #059669, #047857) !important;
            color: white !important;
        }

        /* Rawr theme pipeline styles */
        body.theme-rawr .pipeline-stage {
            border-color: rgba(220, 38, 38, 0.2) !important;
            background: rgba(31, 41, 55, 0.6) !important;
        }

        body.theme-rawr .pipeline-stage:hover {
            border-color: rgba(220, 38, 38, 0.4) !important;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.15) !important;
        }

        body.theme-rawr .stage-title,
        body.theme-rawr .stage-count {
            color: #f9fafb !important;
        }

        body.theme-rawr .stage-subtitle {
            color: #d1d5db !important;
        }

        body.theme-rawr .stage-value {
            background: rgba(220, 38, 38, 0.1) !important;
            color: #f9fafb !important;
        }

        body.theme-rawr .summary-value.investment {
            color: #dc2626 !important;
        }

        /* Rawr theme status badge colors */
        body.theme-rawr .status-missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
            color: white !important;
        }

        body.theme-rawr .status-itemized {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
            color: white !important;
        }

        body.theme-rawr .status-sanitize {
            background: linear-gradient(135deg, #991b1b, #7f1d1d) !important;
            color: white !important;
        }

        body.theme-rawr .status-racked {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            color: white !important;
        }

        body.theme-rawr .status-listed {
            background: linear-gradient(135deg, #f97316, #ea580c) !important;
            color: white !important;
        }

        body.theme-rawr .status-sold {
            background: linear-gradient(135deg, #059669, #047857) !important;
            color: white !important;
        }

        /* Dark mode pipeline styles */
        .dark-mode .pipeline-stage {
            background: var(--card-bg) !important;
            border-color: var(--card-border) !important;
        }

        .dark-mode .pipeline-stage:hover {
            border-color: color-mix(in srgb, var(--theme-primary), transparent 60%) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .stage-title,
        .dark-mode .stage-count {
            color: var(--text-primary) !important;
        }

        .dark-mode .stage-subtitle {
            color: var(--text-muted) !important;
        }

        .dark-mode .stage-value {
            background: rgba(255, 255, 255, 0.1) !important;
            color: var(--text-primary) !important;
        }

        .dark-mode .stage-value.profit {
            background: rgba(5, 150, 105, 0.2) !important;
            color: #10b981 !important;
        }

        .dark-mode .stage-arrow {
            background: var(--card-bg) !important;
            border-color: var(--card-border) !important;
            color: var(--text-muted) !important;
        }

        .dark-mode .pipeline-summary {
            background: rgba(0, 0, 0, 0.2) !important;
            border-color: var(--card-border) !important;
        }

        .dark-mode .summary-label {
            color: var(--text-muted) !important;
        }

        .dark-mode .summary-value {
            color: var(--text-primary) !important;
        }

        .dark-mode .summary-value.profit {
            color: #10b981 !important;
        }

        /* Dark mode filter bar styles */
        .dark-mode .filter-bar {
            background: rgba(31, 41, 55, 0.95) !important;
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(75, 85, 99, 0.3) !important;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .filter-toggle-btn {
            background: linear-gradient(135deg, var(--theme-primary, #db2777), color-mix(in srgb, var(--theme-primary, #db2777), black 15%)) !important;
            color: white !important;
            box-shadow: 0 2px 10px rgba(219, 39, 119, 0.3) !important;
        }

        .dark-mode .filter-toggle-btn:hover {
            box-shadow: 0 4px 15px rgba(219, 39, 119, 0.4) !important;
        }

        .dark-mode .filter-badge {
            background: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
        }

        .dark-mode .quick-filter-btn {
            background: var(--card-bg) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--card-border) !important;
        }

        .dark-mode .quick-filter-btn:hover {
            background: rgba(219, 39, 119, 0.1) !important;
            border-color: rgba(219, 39, 119, 0.3) !important;
        }

        .dark-mode .quick-filter-btn.active {
            background: var(--theme-primary, #db2777) !important;
            color: white !important;
            border-color: var(--theme-primary, #db2777) !important;
        }

        /* Dark mode filter modal styles */
        .dark-mode .filter-modal {
            background: rgba(0, 0, 0, 0.7) !important;
        }

        .dark-mode .filter-modal-content {
            background: var(--card-bg) !important;
            border: 1px solid var(--card-border) !important;
        }

        .dark-mode .filter-modal-header {
            border-bottom: 1px solid var(--card-border) !important;
        }

        .dark-mode .filter-modal-header h3 {
            color: var(--text-primary) !important;
        }

        .dark-mode .filter-modal-header h3 i {
            color: var(--text-primary) !important;
        }

        /* Ensure all filter modal text is visible in dark mode */
        .dark-mode .filter-modal h3,
        .dark-mode .filter-modal-header h3,
        .dark-mode .filter-modal-content h3 {
            color: var(--text-primary) !important;
        }

        .dark-mode .filter-modal i,
        .dark-mode .filter-modal-header i {
            color: var(--text-primary) !important;
        }

        /* Clean dark mode rules for filter modals - now handled by inline styles */
        .dark-mode .filter-modal-header h3,
        .dark-mode .filter-modal-header i,
        .dark-mode .filter-modal-header .close-btn {
            color: var(--text-primary) !important;
        }

        .dark-mode .filter-group label {
            color: var(--text-primary) !important;
        }

        .dark-mode .filter-group select,
        .dark-mode .filter-group input {
            background: var(--input-bg) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--card-border) !important;
        }

        .dark-mode .filter-group select:focus,
        .dark-mode .filter-group input:focus {
            border-color: var(--theme-primary, #db2777) !important;
            box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.15) !important;
        }

        .dark-mode .filter-group select option {
            background: var(--input-bg) !important;
            color: var(--text-primary) !important;
        }

        /* Additional dark mode text visibility fixes */
        .dark-mode .filter-modal * {
            color: var(--text-primary);
        }

        .dark-mode .filter-modal select,
        .dark-mode .filter-modal input,
        .dark-mode .filter-modal option {
            background: var(--input-bg) !important;
            color: var(--text-primary) !important;
        }

        /* Comprehensive dark mode for both inventory and sold items filter modals */
        body.dark-mode div[x-show="soldFiltersExpanded"] .filter-modal *,
        body.dark-mode div[x-show="filtersExpanded"] .filter-modal * {
            color: var(--text-primary);
        }

        body.dark-mode div[x-show="soldFiltersExpanded"] .filter-modal-content,
        body.dark-mode div[x-show="filtersExpanded"] .filter-modal-content {
            background: var(--card-bg) !important;
            border: 1px solid var(--card-border) !important;
        }

        body.dark-mode div[x-show="soldFiltersExpanded"] .filter-group label,
        body.dark-mode div[x-show="filtersExpanded"] .filter-group label {
            color: #ffffff !important;
        }

        body.dark-mode div[x-show="soldFiltersExpanded"] .filter-modal select,
        body.dark-mode div[x-show="soldFiltersExpanded"] .filter-modal input,
        body.dark-mode div[x-show="filtersExpanded"] .filter-modal select,
        body.dark-mode div[x-show="filtersExpanded"] .filter-modal input {
            background: var(--input-bg) !important;
            color: #ffffff !important;
            border-color: var(--border-color) !important;
        }

        .dark-mode .close-btn {
            background: rgba(255, 255, 255, 0.1) !important;
            color: var(--text-primary) !important;
        }

        .dark-mode .close-btn:hover {
            background: rgba(219, 39, 119, 0.2) !important;
        }

        /* Theme-aware filter bar styles */
        .color-scheme .filter-toggle-btn {
            background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%)) !important;
            box-shadow: 0 2px 10px color-mix(in srgb, var(--theme-primary), transparent 70%) !important;
        }

        .color-scheme .filter-toggle-btn:hover {
            box-shadow: 0 4px 15px color-mix(in srgb, var(--theme-primary), transparent 60%) !important;
        }

        .color-scheme .quick-filter-btn.active {
            background: var(--theme-primary) !important;
            border-color: var(--theme-primary) !important;
        }

        /* Rawr theme filter bar styles */
        body.theme-rawr .filter-bar {
            background: rgba(31, 41, 55, 0.95) !important;
            border-bottom: 1px solid rgba(220, 38, 38, 0.3) !important;
        }

        body.theme-rawr .filter-toggle-btn {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
            box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3) !important;
        }

        body.theme-rawr .filter-toggle-btn:hover {
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4) !important;
        }

        /* Dark mode + theme combinations */
        .dark-mode.color-scheme .filter-toggle-btn {
            background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%)) !important;
        }

        .dark-mode.theme-rawr .filter-toggle-btn {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
        }

        /* Dark mode status badge colors */
        .dark-mode .status-missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
            color: white !important;
        }

        .dark-mode .status-itemized {
            background: linear-gradient(135deg, #be185d, #9f1239) !important;
            color: white !important;
        }

        .dark-mode .status-sanitize {
            background: linear-gradient(135deg, #1e40af, #1e3a8a) !important;
            color: white !important;
        }

        .dark-mode .status-racked {
            background: linear-gradient(135deg, #7c3aed, #5b21b6) !important;
            color: white !important;
        }

        .dark-mode .status-listed {
            background: linear-gradient(135deg, #ea580c, #c2410c) !important;
            color: white !important;
        }

        .dark-mode .status-sold {
            background: linear-gradient(135deg, #059669, #047857) !important;
            color: white !important;
        }

        /* Dark mode + color scheme combinations for status badges */
        .dark-mode.color-scheme .status-itemized {
            background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%)) !important;
        }

        .dark-mode.color-scheme .status-sanitize {
            background: linear-gradient(135deg, var(--theme-secondary), color-mix(in srgb, var(--theme-secondary), black 15%)) !important;
        }

        .dark-mode.color-scheme .status-racked {
            background: linear-gradient(135deg, var(--theme-accent), color-mix(in srgb, var(--theme-accent), black 15%)) !important;
        }

        .dark-mode.color-scheme .status-listed {
            background: linear-gradient(135deg, var(--theme-accent-2), color-mix(in srgb, var(--theme-accent-2), black 15%)) !important;
        }

        /* Dark mode + rawr theme combinations for status badges */
        .dark-mode.theme-rawr .status-missing-info,
        .dark-mode.theme-rawr .status-itemized {
            background: linear-gradient(135deg, #dc2626, #991b1b) !important;
        }

        .dark-mode.theme-rawr .status-sanitize {
            background: linear-gradient(135deg, #991b1b, #7f1d1d) !important;
        }

        .dark-mode.theme-rawr .status-racked {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
        }

        .dark-mode.theme-rawr .status-listed {
            background: linear-gradient(135deg, #f97316, #ea580c) !important;
        }

        /* Status Modal Icon Styles */
        .status-modal-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }

        .status-modal-icon.missing-info {
            background: linear-gradient(135deg, #dc2626, #991b1b);
        }

        .status-modal-icon.itemized {
            background: linear-gradient(135deg, #be185d, #9f1239);
        }

        .status-modal-icon.sanitize {
            background: linear-gradient(135deg, #1e40af, #1e3a8a);
        }

        .status-modal-icon.racked {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }

        .status-modal-icon.listed {
            background: linear-gradient(135deg, #ea580c, #c2410c);
        }

        .status-modal-icon.sold {
            background: linear-gradient(135deg, #059669, #047857);
        }

        /* Responsive Design - Chevron Stream for Mobile */
        @media (max-width: 768px) {
            .inventory-pipeline {
                flex-direction: row;
                gap: 0;
                overflow: visible;
                padding: 0.5rem 0;
                width: 100%;
            }

            .pipeline-stage {
                flex: 1;
                min-width: 0;
                flex-direction: column;
                text-align: center;
                padding: 0.6rem 0.25rem;
                position: relative;
                background: rgba(250, 248, 246, 0.95);
                border: none;
                border-radius: 0;
                margin: 0;
                clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 50%, calc(100% - 10px) 100%, 0 100%, 10px 50%);
            }

            .pipeline-stage:first-child {
                clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 50%, calc(100% - 10px) 100%, 0 100%);
                padding-left: 0.5rem;
            }

            .pipeline-stage:last-child {
                clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 10px 50%);
                padding-right: 0.5rem;
            }

            .pipeline-stage.has-items {
                background: rgba(59, 130, 246, 0.1);
                color: #1e40af;
            }

            .pipeline-stage.sold-stage {
                background: rgba(16, 185, 129, 0.1);
                color: #059669;
            }

            .stage-icon {
                width: 28px;
                height: 28px;
                margin: 0 auto 0.3rem auto;
                font-size: 0.75rem;
            }

            .stage-content {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.15rem;
            }

            .stage-title {
                font-size: 0.6rem;
                font-weight: 600;
                margin: 0;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .stage-count {
                font-size: 0.85rem;
                font-weight: 700;
                margin: 0;
                line-height: 1;
            }

            .stage-subtitle {
                font-size: 0.55rem;
                margin: 0;
                opacity: 0.8;
                line-height: 1;
            }

            .stage-value {
                font-size: 0.6rem;
                font-weight: 600;
                margin: 0;
                opacity: 0.9;
                line-height: 1;
            }

            .stage-arrow {
                display: none;
            }
            }

        @media (max-width: 768px) {
            .pipeline-summary {
                flex-direction: column;
                gap: 0.75rem;
            }

            /* Dark mode chevron stream */
            .dark-mode .pipeline-stage {
                background: rgba(31, 41, 55, 0.8) !important;
                color: #d1d5db !important;
            }

            .dark-mode .pipeline-stage.has-items {
                background: rgba(59, 130, 246, 0.2) !important;
                color: #60a5fa !important;
            }

            .dark-mode .pipeline-stage.sold-stage {
                background: rgba(16, 185, 129, 0.2) !important;
                color: #34d399 !important;
            }
        }

        /* Extra small screens - very compact chevron stream */
        @media (max-width: 480px) {
            .pipeline-stage {
                padding: 0.4rem 0.2rem;
                clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 50%, calc(100% - 8px) 100%, 0 100%, 8px 50%);
            }

            .pipeline-stage:first-child {
                clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 50%, calc(100% - 8px) 100%, 0 100%);
                padding-left: 0.4rem;
            }

            .pipeline-stage:last-child {
                clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 8px 50%);
                padding-right: 0.4rem;
            }

            .stage-icon {
                width: 24px;
                height: 24px;
                font-size: 0.7rem;
                margin-bottom: 0.2rem;
            }

            .stage-title {
                font-size: 0.55rem;
            }

            .stage-count {
                font-size: 0.75rem;
            }

            .stage-subtitle {
                font-size: 0.5rem;
            }

            .stage-value {
                font-size: 0.55rem;
            }

            .stage-content {
                gap: 0.1rem;
            }
            }

            .summary-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                min-width: auto;
            }

            .summary-label {
                margin-bottom: 0;
                text-align: left;
            }
        }

        .status-breakdown {
            space-y: 1rem;
        }

        .status-bar.clickable {
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 8px;
            padding: 0.5rem;
            margin: -0.5rem;
        }

        .status-bar.clickable:hover {
            background: rgba(0, 0, 0, 0.02);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .status-item-card:hover {
            border-color: #d1d5db;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        /* Enhanced Gallery View for Status Modal */
        .gallery-item-card {
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            overflow: hidden;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .gallery-item-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .gallery-item-image {
            width: 100%;
            height: 200px;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .photo-count-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        @media (max-width: 768px) {
            .status-items-grid {
                grid-template-columns: 1fr !important;
            }
            
            .status-item-card {
                padding: 12px !important;
            }
            
            .item-image-small {
                width: 50px !important;
                height: 50px !important;
                margin-right: 10px !important;
            }
        }

        .status-item {
            margin-bottom: 1rem;
        }

        .status-bar {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .status-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f3f4f6;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }


        .quick-stats {
            space-y: 0.75rem;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #6b7280;
            font-size: 0.875rem;
        }

        .stat-value {
            font-weight: 600;
            color: #1f2937;
        }


        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #6b7280;
        }

                 .empty-state i {
             font-size: 3rem;
             margin-bottom: 1rem;
             display: block;
         }

         /* Settings Tab Styles */
         .toggle-label {
             display: flex;
             align-items: center;
             gap: 0.75rem;
             cursor: pointer;
             font-weight: 500;
             margin-bottom: 0.5rem;
         }

         .toggle-switch {
             position: relative;
             width: 48px;
             height: 24px;
             background: #d1d5db;
             border-radius: 12px;
             transition: all 0.3s ease;
             flex-shrink: 0;
         }

         .toggle-switch::before {
             content: '';
             position: absolute;
             top: 2px;
             left: 2px;
             width: 20px;
             height: 20px;
             background: white;
             border-radius: 50%;
             transition: all 0.3s ease;
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
         }

         .toggle-label input[type="checkbox"]:checked + .toggle-switch {
             background: linear-gradient(135deg, #f472b6, #db2777);
         }

         .toggle-label input[type="checkbox"]:checked + .toggle-switch::before {
             transform: translateX(24px);
         }

         .toggle-label input[type="checkbox"] {
             display: none;
         }

         .radio-group {
             display: flex;
             flex-direction: column;
             gap: 0.5rem;
         }

         .radio-label {
             display: flex;
             align-items: center;
             gap: 0.75rem;
             cursor: pointer;
             padding: 0.5rem;
             border-radius: 8px;
             transition: all 0.3s ease;
         }

         .radio-label:hover {
             background: rgba(244, 114, 182, 0.05);
         }

         .radio-custom {
             position: relative;
             width: 20px;
             height: 20px;
             border: 3px solid #d1d5db;
             border-radius: 50%;
             flex-shrink: 0;
             transition: all 0.3s ease;
             background: #ffffff;
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
         }

         .radio-custom::before {
             content: '';
             position: absolute;
             top: 50%;
             left: 50%;
             width: 8px;
             height: 8px;
             background: linear-gradient(135deg, #f472b6, #db2777);
             border-radius: 50%;
             transform: translate(-50%, -50%) scale(0);
             transition: all 0.3s ease;
         }

         .radio-label input[type="radio"]:checked + .radio-custom {
             border-color: #f472b6 !important;
             background: #fdf2f8 !important;
             box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.1) !important;
         }

         .radio-label input[type="radio"]:checked + .radio-custom::before {
             transform: translate(-50%, -50%) scale(1) !important;
         }

         .radio-label:hover .radio-custom {
             border-color: #f472b6;
             background: #fef7ff;
         }

         /* Color scheme overrides for radio buttons */
         .color-scheme .radio-label:hover {
             background: color-mix(in srgb, var(--theme-primary), white 95%);
         }

         .color-scheme .radio-custom::before {
             background: linear-gradient(135deg, var(--theme-primary), var(--theme-secondary));
         }

         .color-scheme .radio-label input[type="radio"]:checked + .radio-custom {
             border-color: var(--theme-primary) !important;
             background: color-mix(in srgb, var(--theme-primary), white 95%) !important;
             box-shadow: 0 0 0 3px color-mix(in srgb, var(--theme-primary), transparent 90%) !important;
         }

         .color-scheme .radio-label:hover .radio-custom {
             border-color: var(--theme-primary);
             background: color-mix(in srgb, var(--theme-primary), white 98%);
         }

         .radio-label input[type="radio"] {
             display: none;
         }

         .help-text {
             font-size: 0.875rem;
             color: #6b7280;
             margin-top: 0.25rem;
             line-height: 1.4;
         }

         /* Pricing Method Switches */
         .pricing-method-switches {
             display: flex;
             flex-direction: column;
             gap: 1rem;
         }

         .switch-group {
             padding: 1.25rem;
             border: 2px solid #e5e7eb;
             border-radius: 12px;
             background: #f9fafb;
             transition: all 0.3s ease;
             cursor: pointer;
         }

         .switch-group:hover {
             border-color: #d1d5db;
             background: #f3f4f6;
         }

         .switch-group .toggle-label {
             margin-bottom: 0.5rem;
             font-weight: 600;
             font-size: 1rem;
             cursor: pointer;
         }

         .method-description {
             margin: 0;
             font-size: 0.875rem;
             color: #6b7280;
             line-height: 1.4;
         }

         /* Active state for selected pricing method */
         .switch-group:has(input:checked) {
             border-color: #f472b6;
             background: linear-gradient(135deg, #fdf2f8, #fce7f3);
             box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.1);
         }

         .switch-group:has(input:checked) .toggle-label {
             color: #be185d;
         }

         .switch-group:has(input:checked) .method-description {
             color: #92400e;
         }

         /* Color scheme support for pricing switches */
         .color-scheme .switch-group {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 80%);
             background: color-mix(in srgb, var(--theme-primary), white 98%);
         }

         .color-scheme .switch-group:hover {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
             background: color-mix(in srgb, var(--theme-primary), white 95%);
         }

         .color-scheme .switch-group:has(input:checked) {
             border-color: var(--theme-primary);
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), white 95%), 
                 color-mix(in srgb, var(--theme-secondary), white 92%));
             box-shadow: 0 0 0 3px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .switch-group:has(input:checked) .toggle-label {
             color: color-mix(in srgb, var(--theme-primary), black 20%);
         }

         .color-scheme .switch-group:has(input:checked) .method-description {
             color: color-mix(in srgb, var(--theme-primary), black 30%);
         }

         /* Theme support for inventory overview */
         .color-scheme .overview-header {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), white 95%), 
                 color-mix(in srgb, var(--theme-secondary), white 92%));
             border-color: color-mix(in srgb, var(--theme-primary), transparent 80%);
         }

         .color-scheme .overview-header h4 {
             color: color-mix(in srgb, var(--theme-primary), black 20%);
         }

         .color-scheme .stat-number {
             color: color-mix(in srgb, var(--theme-primary), black 10%);
         }

         .color-scheme .inventory-card {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .inventory-card:hover {
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
             box-shadow: 0 8px 25px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .garment-icon {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), white 90%), 
                 color-mix(in srgb, var(--theme-secondary), white 85%));
             border-color: color-mix(in srgb, var(--theme-primary), transparent 80%);
         }

         .color-scheme .stock-indicator {
             background: color-mix(in srgb, var(--theme-secondary), white 85%);
             color: color-mix(in srgb, var(--theme-secondary), black 30%);
         }

         .color-scheme .sold-indicator {
             background: color-mix(in srgb, var(--theme-primary), white 85%);
             color: color-mix(in srgb, var(--theme-primary), black 30%);
         }

         .color-scheme .progress-sold {
             background: linear-gradient(90deg, 
                 var(--theme-primary), 
                 color-mix(in srgb, var(--theme-primary), black 20%));
         }

         .color-scheme .progress-stock {
             background: linear-gradient(90deg, 
                 var(--theme-secondary), 
                 color-mix(in srgb, var(--theme-secondary), black 20%));
         }

         .color-scheme .expand-btn.expanded {
             background: var(--theme-primary);
         }

         .color-scheme .empty-inventory-state {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), white 95%), 
                 color-mix(in srgb, var(--theme-secondary), white 92%));
             border-color: color-mix(in srgb, var(--theme-primary), transparent 70%);
         }

         .pricing-settings {
             margin-top: 1rem;
             padding-top: 1rem;
             border-top: 1px solid #e5e7eb;
         }


         /* Accessible mode styles for new components */
         .accessible-mode .toggle-switch {
             background: #495057;
         }

         .accessible-mode .toggle-label input[type="checkbox"]:checked + .toggle-switch {
             background: #000000;
         }

         .accessible-mode .radio-custom {
             border-color: #495057;
         }

         .accessible-mode .radio-label input[type="radio"]:checked + .radio-custom {
             border-color: #000000;
         }

         .accessible-mode .radio-label input[type="radio"]:checked + .radio-custom::before {
             background: #000000;
         }

         .accessible-mode .help-text {
             color: #495057;
         }

         /* Dark Mode Styles */
         .dark-mode {
             --bg-gradient: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1f1f1f 100%);
             --header-gradient: linear-gradient(135deg, #000000, #1a1a1a, #2d2d2d);
             --card-bg: rgba(45, 45, 45, 0.9);
             --card-border: rgba(255, 255, 255, 0.1);
             --text-primary: #ffffff;
             --text-secondary: #d1d5db;
             --text-muted: #9ca3af;
             --border-color: #374151;
             --input-bg: rgba(55, 65, 81, 0.8);
             --btn-primary: linear-gradient(135deg, #6366f1, #4f46e5);
             --btn-secondary: linear-gradient(135deg, #374151, #4b5563);
         }

         body.dark-mode {
             background: var(--bg-gradient) !important;
             color: var(--text-primary) !important;
         }

         body.dark-mode.color-scheme {
             background: var(--bg-gradient) !important;
             color: var(--text-primary) !important;
         }

         .dark-mode .header {
             background: var(--header-gradient);
             box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
         }

         .dark-mode .card {
             background: var(--card-bg);
             border: 1px solid var(--card-border);
             box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
             backdrop-filter: blur(10px);
         }

         .dark-mode .tabs {
             border-bottom: 2px solid var(--border-color);
         }

         .dark-mode .tab {
             color: var(--text-secondary);
             background: none;
             border-bottom: 2px solid transparent;
         }

         .dark-mode .tab.active {
             color: var(--text-primary);
             border-bottom-color: #6366f1;
             background: rgba(99, 102, 241, 0.1);
         }

         .dark-mode .tab:hover:not(.active) {
             color: var(--text-primary);
             background: rgba(255, 255, 255, 0.05);
         }

         .dark-mode input, 
         .dark-mode select, 
         .dark-mode textarea {
             background: var(--input-bg);
             border: 2px solid var(--border-color);
             color: var(--text-primary);
         }

         .dark-mode input:focus, 
         .dark-mode select:focus, 
         .dark-mode textarea:focus {
             border-color: #db2777;
             box-shadow: 0 0 0 4px rgba(219, 39, 119, 0.15);
         }

         .dark-mode .btn-primary {
             background: var(--btn-primary);
         }

         .dark-mode .btn-secondary {
             background: var(--btn-secondary);
         }

         .dark-mode .status-badge {
             backdrop-filter: blur(5px);
         }

         .dark-mode .item-card {
             background: var(--card-bg);
             border: 1px solid var(--card-border);
             box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
         }

         .dark-mode .metric-card {
             background: var(--card-bg);
             border: 1px solid var(--card-border);
             box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
         }

         .dark-mode .metric-icon {
             background: rgba(99, 102, 241, 0.2);
             color: #a5b4fc;
         }

         .dark-mode .photo-upload, 
         .dark-mode .camera-option {
             background: var(--input-bg) !important;
             border: 2px dashed var(--border-color) !important;
             color: var(--text-primary) !important;
         }

         .dark-mode .photo-upload:hover, 
         .dark-mode .camera-option:hover {
             border-color: #db2777 !important;
             background: rgba(219, 39, 119, 0.1) !important;
         }

         .dark-mode .bottom-tabs {
             background: rgba(45, 45, 45, 0.95);
             border-top-color: var(--border-color);
             box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.3);
         }

         .dark-mode .tab {
             color: var(--text-secondary);
         }

         .dark-mode .tab.active {
             color: #a5b4fc;
             background: rgba(99, 102, 241, 0.2);
             border-color: #6366f1;
         }

         /* Dark mode overrides for color schemes */
         body.dark-mode.color-scheme .header {
             background: var(--header-gradient) !important;
         }

         body.dark-mode.color-scheme .card {
             background: var(--card-bg) !important;
             border: 1px solid var(--card-border) !important;
             box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
         }

         body.dark-mode.color-scheme input,
         body.dark-mode.color-scheme select,
         body.dark-mode.color-scheme textarea {
             background: var(--input-bg) !important;
             border: 2px solid var(--border-color) !important;
             color: var(--text-primary) !important;
         }

         body.dark-mode.color-scheme .btn-primary {
             background: var(--btn-primary) !important;
             color: var(--text-primary) !important;
         }

         body.dark-mode.color-scheme .btn-secondary {
             background: var(--btn-secondary) !important;
             color: var(--text-primary) !important;
         }

         body.dark-mode.color-scheme .bottom-tabs {
             background: rgba(45, 45, 45, 0.95) !important;
             border-top-color: var(--border-color) !important;
         }

         body.dark-mode.color-scheme .tab {
             color: var(--text-secondary) !important;
         }

         body.dark-mode.color-scheme .tab.active {
             color: #a5b4fc !important;
             background: rgba(99, 102, 241, 0.2) !important;
             border-color: #6366f1 !important;
         }

         body.dark-mode.color-scheme label,
         body.dark-mode.color-scheme .help-text,
         body.dark-mode.color-scheme .stat-label,
         body.dark-mode.color-scheme .metric-label,
         body.dark-mode.color-scheme .activity-date,
         body.dark-mode.color-scheme .item-source {
             color: var(--text-secondary) !important;
         }

         body.dark-mode.color-scheme h1,
         body.dark-mode.color-scheme h2,
         body.dark-mode.color-scheme h3,
         body.dark-mode.color-scheme h4,
         body.dark-mode.color-scheme h5,
         body.dark-mode.color-scheme h6 {
             color: var(--text-primary) !important;
         }

         .dark-mode .tab:hover:not(.active) {
             color: var(--text-primary);
             background: rgba(255, 255, 255, 0.05);
             border-color: rgba(255, 255, 255, 0.2);
         }

         .dark-mode label {
             color: var(--text-secondary);
         }

         .dark-mode .help-text {
             color: var(--text-muted);
         }

         .dark-mode .stat-label,
         .dark-mode .metric-label,
         .dark-mode .activity-date,
         .dark-mode .item-source {
             color: var(--text-muted);
         }

         .dark-mode .metric-value,
         .dark-mode .stat-value,
         .dark-mode .activity-description {
             color: var(--text-primary);
         }

           .dark-mode h1, .dark-mode h2, .dark-mode h3, 
           .dark-mode h4, .dark-mode h5, .dark-mode h6 {
               color: var(--text-primary);
           }

           .dark-mode .status-select {
               background: var(--input-bg);
               border: 1px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .status-select:hover {
               border-color: rgba(255, 255, 255, 0.3);
           }

           .dark-mode .status-select:focus {
               border-color: #db2777;
               box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.2);
           }

           /* Dark Mode Status Dropdown Option Colors */
           .dark-mode .status-select option[value="Missing Info"] {
               background: rgba(254, 242, 242, 0.15);
               color: #fca5a5;
           }

           .dark-mode .status-select option[value="Itemized"] {
               background: rgba(252, 231, 243, 0.15);
               color: #f9a8d4;
           }

           .dark-mode .status-select option[value="Sanitize"] {
               background: rgba(219, 234, 254, 0.15);
               color: #93c5fd;
           }

           .dark-mode .status-select option[value="Racked"] {
               background: rgba(243, 232, 255, 0.15);
               color: #c4b5fd;
           }

           .dark-mode .status-select option[value="Listed"] {
               background: rgba(254, 215, 170, 0.15);
               color: #fdba74;
           }

           .dark-mode .status-select option[value="Sold"] {
               background: rgba(229, 231, 235, 0.15);
               color: #d1d5db;
               font-weight: 600;
           }

           /* Dark Mode Specific Field Types */
           .dark-mode .search-input {
               background: var(--input-bg) !important;
               border: 2px solid var(--border-color) !important;
               color: var(--text-primary) !important;
           }

           .dark-mode .search-input:focus {
               background: var(--input-bg) !important;
               border-color: #db2777 !important;
               box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.15) !important;
           }

           .dark-mode .tags-input {
               background: var(--input-bg);
               border: 2px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .tags-input:focus {
               background: var(--input-bg);
               border-color: #db2777;
               box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.15);
           }

           .dark-mode .quick-filter-select {
               background: var(--input-bg);
               border: 1px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .quick-filter-select:hover {
               border-color: rgba(255, 255, 255, 0.3);
           }

           .dark-mode .filter-group select,
           .dark-mode .filter-group input {
               background: var(--input-bg);
               border: 1px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .filter-group select:focus,
           .dark-mode .filter-group input:focus {
               border-color: #db2777;
               box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.15);
           }

           /* Dark Mode Custom Status Dropdown */
           .dark-mode .status-dropdown-trigger {
               background: var(--card-bg);
               border: 1px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .status-dropdown-trigger:hover {
               border-color: rgba(255, 255, 255, 0.3);
               box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
           }

           .dark-mode .status-dropdown-menu {
               background: rgba(45, 45, 45, 0.98) !important;
               backdrop-filter: blur(20px) !important;
               border: 1px solid rgba(255, 255, 255, 0.1) !important;
               box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6) !important;
           }

           .dark-mode .status-option:hover {
               background: rgba(255, 255, 255, 0.05);
           }

           /* Dark Mode Simplified Status Options */
           .dark-mode .status-option-simple {
               border-bottom: 1px solid rgba(255, 255, 255, 0.1);
           }

           .dark-mode .status-option-simple:hover {
               background: rgba(219, 39, 119, 0.1);
           }

           .dark-mode .status-option-content {
               border-bottom: 1px solid var(--border-color);
           }

           .dark-mode .status-progress .progress-bar {
               background: rgba(55, 65, 81, 0.5);
           }

           .dark-mode .status-count {
               color: var(--text-muted);
           }

           .dark-mode .sold-option {
               border-top: 2px solid #f59e0b;
           }

           .dark-mode .sold-option .status-option-content {
               background: linear-gradient(135deg, rgba(255, 251, 235, 0.1), rgba(254, 243, 199, 0.1));
           }

           /* Dark Mode Return Styles */
           .dark-mode .return-dot {
               background: linear-gradient(135deg, #ef4444, #dc2626);
               border-color: rgba(255, 255, 255, 0.8);
           }

        /* Simple Returned Filter Switch */
        .returned-filter-switch {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
        }

        .returned-filter-switch input[type="checkbox"] {
            width: 16px;
            height: 16px;
            margin: 0;
            cursor: pointer;
        }

        .returned-filter-switch label {
            cursor: pointer;
            font-size: 0.9rem;
            color: inherit;
        }

        /* Confirmation Modal Styles */
        .confirm-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(4px);
        }

        .confirm-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .confirm-modal-header {
            margin-bottom: 1.5rem;
        }

        .confirm-modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #374151;
        }

        .confirm-modal-message {
            color: #6b7280;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .confirm-modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .confirm-modal-actions button {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .confirm-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }

        .confirm-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-1px);
        }

        .confirm-btn.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .confirm-btn.danger:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }

        .confirm-btn.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .confirm-btn.warning:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
        }

        .cancel-btn {
            background: #f3f4f6;
            color: #6b7280;
        }

        .cancel-btn:hover {
            background: #e5e7eb;
            color: #374151;
            transform: translateY(-1px);
        }

        /* Dark mode confirmation modal */
        .dark-mode .confirm-modal-content {
            background: #1f2937;
            border-color: rgba(255, 255, 255, 0.1);
        }

        .dark-mode .confirm-modal-title {
            color: #f9fafb;
        }

        .dark-mode .confirm-modal-message {
            color: #d1d5db;
        }

        .dark-mode .cancel-btn {
            background: #374151;
            color: #d1d5db;
        }

        .dark-mode .cancel-btn:hover {
            background: #4b5563;
            color: #f9fafb;
        }

        /* Garment Analytics Styles */
        .garment-top-list {
            margin-bottom: 2rem;
        }

        .garment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .garment-item:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
            transform: translateY(-1px);
        }

        .garment-info {
            flex: 1;
        }

        .garment-name {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .garment-stats {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .stat-item i {
            font-size: 0.75rem;
        }

        .garment-profit {
            text-align: right;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            background: #f3f4f6;
        }

        .profit-amount {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .profit-label {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .profit-positive .profit-amount {
            color: #10b981;
        }

        .profit-negative .profit-amount {
            color: #ef4444;
        }

        /* Modern Inventory Overview Styles */
        .inventory-overview-container {
            margin-top: 1.5rem;
        }

        .overview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .overview-header h4 {
            margin: 0;
            color: #374151;
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .overview-summary {
            display: flex;
            gap: 2rem;
        }

        .summary-stat {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .inventory-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1rem;
        }

        .inventory-card {
            background: white;
            border-radius: 16px;
            border: 2px solid #e5e7eb;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .inventory-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #d1d5db;
        }

        .inventory-card.low-stock-card {
            border-color: #fbbf24;
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
        }

        .inventory-card.low-stock-card:hover {
            border-color: #f59e0b;
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.25);
        }

        .card-header {
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
        }

        .card-title-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .garment-icon {
            font-size: 2rem;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 12px;
            border: 2px solid #e5e7eb;
        }

        .card-title h5 {
            margin: 0;
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            text-transform: capitalize;
        }

        .quick-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.25rem;
        }

        .stock-indicator, .sold-indicator {
            font-size: 0.875rem;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-weight: 500;
        }

        .stock-indicator {
            background: #dcfce7;
            color: #166534;
        }

        .sold-indicator {
            background: #dbeafe;
            color: #1e40af;
        }

        .card-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stock-warning {
            color: #f59e0b;
            font-size: 1.25rem;
            animation: pulse 2s infinite;
        }

        .performance-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            min-width: 50px;
            text-align: center;
        }

        .performance-badge.performance-high {
            background: #dcfce7;
            color: #166534;
        }

        .performance-badge.performance-medium {
            background: #fef3c7;
            color: #92400e;
        }

        .performance-badge.performance-low {
            background: #fee2e2;
            color: #991b1b;
        }

        .expand-btn {
            background: #f3f4f6;
            border: none;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6b7280;
        }

        .expand-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .expand-btn.expanded {
            transform: rotate(180deg);
            background: #f472b6;
            color: white;
        }

        .progress-section {
            padding: 0 1.25rem 1.25rem;
        }

        .progress-bar {
            height: 8px;
            background: #f3f4f6;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-sold, .progress-stock {
            position: absolute;
            top: 0;
            height: 100%;
            transition: width 0.5s ease;
        }

        .progress-sold {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            left: 0;
        }

        .progress-stock {
            background: linear-gradient(90deg, #10b981, #047857);
            right: 0;
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #6b7280;
        }

        .card-details {
            padding: 1.25rem;
            background: #f9fafb;
            border-top: 1px solid #f3f4f6;
            overflow: hidden;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .detail-item i {
            color: #6b7280;
            width: 1.25rem;
            text-align: center;
        }

        .detail-item div {
            flex: 1;
        }

        .detail-item strong {
            display: block;
            font-size: 0.875rem;
            color: #374151;
            margin-bottom: 0.25rem;
        }

        .detail-item span {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
        }

        .detail-actions {
            display: flex;
            gap: 0.75rem;
        }

        .detail-btn {
            flex: 1;
            padding: 0.5rem 1rem;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .detail-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .empty-inventory-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 16px;
            border: 2px dashed #d1d5db;
        }

        .empty-icon {
            font-size: 3rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }

        .empty-inventory-state h5 {
            margin: 0 0 0.5rem 0;
            color: #374151;
            font-size: 1.25rem;
        }

        .empty-inventory-state p {
            margin: 0 0 1.5rem 0;
            color: #6b7280;
        }

        .garment-chart {
            display: flex;
            align-items: end;
            gap: 1rem;
            height: 220px;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9, #e2e8f0);
            border-radius: 16px;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .garment-chart::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(168, 85, 247, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.02) 0%, transparent 50%);
            border-radius: 16px;
            pointer-events: none;
        }

        .chart-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 60px;
            height: 100%;
        }

        .chart-bar {
            width: 40px;
            border-radius: 4px 4px 0 0;
            position: relative;
            min-height: 20px;
            display: flex;
            align-items: end;
            justify-content: center;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        /* Default theme gradient for charts */
        .chart-bar.theme-gradient {
            background: linear-gradient(to top, #3b82f6, #60a5fa);
        }

        /* Pastel theme gradient */
        .theme-pastel .chart-bar.theme-gradient {
            background: linear-gradient(to top, #db2777, #f472b6);
        }

        /* Rawr theme gradient */
        .theme-rawr .chart-bar.theme-gradient {
            background: linear-gradient(to top, #dc2626, #ef4444);
        }

        /* Accessible/Colorblind theme with colorblind-friendly gradients */
        .theme-accessible .chart-bar.theme-gradient {
            background: linear-gradient(to top, #1f2937, #374151);
        }

        /* Completely colorblind-friendly patterns for accessible theme */
        .theme-accessible .inventory-section {
            background: repeating-linear-gradient(45deg, #000000, #000000 2px, #ffffff 2px, #ffffff 4px) !important;
            border: 2px solid #000000 !important;
        }

        .theme-accessible .sold-section {
            background: repeating-linear-gradient(90deg, #000000, #000000 1px, #ffffff 1px, #ffffff 3px) !important;
            border: 2px solid #000000 !important;
        }

        .theme-accessible .low-stock-section {
            background: #000000 !important;
            border: 3px solid #ffffff !important;
            outline: 2px solid #000000 !important;
            animation: none !important; /* Remove color-based animations */
        }

        .theme-accessible .inventory-color {
            background: repeating-linear-gradient(45deg, #000000, #000000 1px, #ffffff 1px, #ffffff 2px);
        }

        .theme-accessible .sold-color {
            background: repeating-linear-gradient(90deg, #000000, #000000 1px, #ffffff 1px, #ffffff 2px);
        }

        .theme-accessible .low-stock-color {
            background: #000000;
            border: 2px solid #ffffff;
        }

        /* Completely colorblind-friendly performance badges for accessible theme */
        .theme-accessible .performance-percentage.high-performance {
            background: #000000 !important;
            color: #ffffff !important;
            border: 3px solid #ffffff !important;
            outline: 2px solid #000000 !important;
        }

        .theme-accessible .performance-percentage.medium-performance {
            background: repeating-linear-gradient(45deg, #000000, #000000 2px, #ffffff 2px, #ffffff 4px) !important;
            color: #000000 !important;
            border: 3px solid #000000 !important;
        }

        .theme-accessible .performance-percentage.low-performance {
            background: #ffffff !important;
            color: #000000 !important;
            border: 3px solid #000000 !important;
            outline: 1px solid #000000 !important;
        }

        /* Completely colorblind-friendly icons and buttons for accessible theme */
        .theme-accessible .metric-icon {
            background: #ffffff !important;
            border: 3px solid #000000 !important;
            color: #000000 !important;
        }

        .theme-accessible .btn-primary {
            background: #000000 !important;
            color: #ffffff !important;
            border: 3px solid #ffffff !important;
        }

        .theme-accessible .btn-success {
            background: repeating-linear-gradient(45deg, #000000, #000000 3px, #ffffff 3px, #ffffff 6px) !important;
            color: #000000 !important;
            border: 3px solid #000000 !important;
        }

        .theme-accessible .btn-danger {
            background: #ffffff !important;
            border: 3px solid #000000 !important;
            color: #000000 !important;
        }

        /* Status badges with completely colorblind-friendly patterns */
        .theme-accessible .status-purchased {
            background: #ffffff !important;
            border: 3px solid #000000 !important;
            color: #000000 !important;
            position: relative;
        }

        .theme-accessible .status-washed {
            background: repeating-linear-gradient(90deg, #ffffff, #ffffff 2px, #000000 2px, #000000 4px) !important;
            border: 3px solid #000000 !important;
            color: #000000 !important;
        }

        .theme-accessible .status-listed {
            background: repeating-linear-gradient(45deg, #ffffff, #ffffff 3px, #000000 3px, #000000 6px) !important;
            border: 3px solid #000000 !important;
            color: #000000 !important;
        }

        .theme-accessible .status-sold {
            background: #000000 !important;
            border: 3px solid #ffffff !important;
            color: #ffffff !important;
            outline: 2px solid #000000 !important;
        }

        /* Low stock bar styling - always red regardless of theme */
        .chart-bar.low-stock-bar {
            background: linear-gradient(to top, #dc2626, #ef4444) !important;
            border: 2px solid #fca5a5;
            animation: pulse-warning 2s ease-in-out infinite;
            position: relative;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }

        .chart-bar.has-alert {
            position: relative;
            overflow: visible;
        }

        .low-stock-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #fbbf24;
            color: #92400e;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            border: 2px solid #fef3c7;
            animation: pulse-alert 1.5s ease-in-out infinite;
            z-index: 10;
        }

        .chart-label.low-stock-label {
            color: #dc2626 !important;
            font-weight: 700;
            animation: pulse-text 2s ease-in-out infinite;
        }

        /* Pulse animation for low stock bars */
        @keyframes pulse-warning {
            0%, 100% {
                box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
            }
        }

        /* Pulse animation for alert indicator */
        @keyframes pulse-alert {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        /* Pulse animation for text */
        @keyframes pulse-text {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        /* Dark mode adjustments for low stock indicators */
        .dark-mode .low-stock-indicator {
            background: #f59e0b;
            color: #78350f;
            border-color: #fde68a;
        }

        .dark-mode .chart-label.low-stock-label {
            color: #fca5a5 !important;
        }

        .chart-bar:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .bar-value {
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem;
        }

        .chart-label {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: center;
            word-break: break-word;
            line-height: 1.2;
        }

        /* Enhanced Sleeker Stacked Bar Chart Styles */
        .stacked-bar {
            width: 55px;
            position: relative;
            min-height: 25px;
            max-height: 180px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            border-radius: 8px 8px 4px 4px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 
                        0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 0.75rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .bar-section {
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 10px;
            transition: all 0.3s ease;
        }

        .inventory-section {
            background: linear-gradient(135deg, #10b981, #34d399, #6ee7b7);
            order: 2; /* Bottom section */
            position: relative;
            overflow: hidden;
        }

        .inventory-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: shine 3s ease-in-out infinite;
        }

        .low-stock-section {
            background: linear-gradient(135deg, #dc2626, #ef4444, #f87171) !important;
            animation: pulse-warning 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.6), 
                        inset 0 2px 4px rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
        }

        .sold-section {
            background: linear-gradient(135deg, #3b82f6, #60a5fa, #93c5fd);
            order: 1; /* Top section */
            position: relative;
            overflow: hidden;
        }

        .sold-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.15) 50%, transparent 70%);
            animation: shine 3s ease-in-out infinite 1s;
        }

        @keyframes shine {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .section-value {
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            min-height: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(2px);
            border-radius: 3px;
            margin: 2px;
            background: rgba(0, 0, 0, 0.2);
        }

        /* Chart Legend */
        .chart-legend {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: #6b7280;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .inventory-color {
            background: linear-gradient(to right, #10b981, #34d399);
        }

        .sold-color {
            background: linear-gradient(to right, #3b82f6, #60a5fa);
        }

        .low-stock-color {
            background: linear-gradient(to right, #dc2626, #ef4444);
            animation: pulse-warning 1.5s ease-in-out infinite;
        }

        /* Enhanced label styles */
        .chart-label-container {
            margin-top: 0.5rem;
            text-align: center;
        }

        .main-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.25rem;
        }

        .chart-sublabel {
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
            font-size: 0.625rem;
        }

        .stock-count {
            color: #059669;
            font-weight: 500;
        }

        .sold-count {
            color: #2563eb;
            font-weight: 500;
        }

        /* Enhanced hover effects for stacked bars */
        .stacked-bar:hover {
            transform: translateY(-4px) scale(1.08);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25), 
                        0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .stacked-bar:hover .section-value {
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.4);
            transform: scale(1.1);
        }

        .stacked-bar:hover .inventory-section::before,
        .stacked-bar:hover .sold-section::before {
            animation-duration: 1s;
        }

        /* Performance Info Panel Styles */
        .info-toggle-btn {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 0.25rem 0.5rem;
            color: #6b7280;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .info-toggle-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .info-toggle-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .performance-info-panel {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #1e40af;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
        }

        .info-content p {
            margin: 0 0 0.75rem 0;
            font-size: 0.8rem;
            color: #374151;
            line-height: 1.4;
        }

        .info-examples {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin: 0.75rem 0;
            padding: 0.75rem;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }

        .info-example {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
        }

        .example-label {
            font-weight: 600;
            color: #1f2937;
            min-width: 120px;
        }

        .info-tip {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 0.5rem;
            font-size: 0.75rem;
            color: #92400e;
            margin: 0.75rem 0 0 0;
        }

        /* Performance percentage color coding */
        .performance-percentage.high-performance {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            font-weight: 600;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .performance-percentage.medium-performance {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
            font-weight: 600;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .performance-percentage.low-performance {
            background: linear-gradient(135deg, #ef4444, #f87171);
            color: white;
            font-weight: 600;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .empty-state-small {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
        }

        /* Dark mode garment analytics */
        .dark-mode .garment-item {
            background: #374151;
            border-color: #4b5563;
        }

        .dark-mode .garment-item:hover {
            background: #4b5563;
            border-color: #6b7280;
        }

        .dark-mode .garment-name {
            color: #f9fafb;
        }

        .dark-mode .stat-item {
            color: #d1d5db;
        }

        .dark-mode .garment-profit {
            background: #4b5563;
        }

        .dark-mode .profit-label {
            color: #d1d5db;
        }

        .dark-mode .garment-chart {
            background: #374151;
        }

        .dark-mode .chart-label {
            color: #d1d5db;
        }

        /* Low Stock Alert Styles */
        .low-stock-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 12px;
        }

        .low-stock-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .low-stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: white;
            border: 1px solid #fca5a5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .low-stock-item:hover {
            background: #fef2f2;
            border-color: #ef4444;
            transform: translateX(4px);
        }

        .low-stock-type {
            font-weight: 600;
            color: #dc2626;
        }

        .low-stock-count {
            font-size: 0.875rem;
            color: #991b1b;
            font-weight: 500;
        }

        .low-stock-alert {
            border-color: #ef4444 !important;
            background: #fef2f2 !important;
        }

        .low-stock-alert:hover {
            background: #fecaca !important;
        }

        .garment-name-container {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .low-stock-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            background: #ef4444;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            width: fit-content;
            animation: pulse-warning 2s infinite;
        }

        .low-stock-text {
            color: #ef4444 !important;
            font-weight: 600 !important;
        }

        @keyframes pulse-warning {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        /* Dark mode low stock styles */
        .dark-mode .low-stock-section {
            background: #451a1a;
            border-color: #7f1d1d;
        }

        .dark-mode .low-stock-item {
            background: #374151;
            border-color: #7f1d1d;
        }

        .dark-mode .low-stock-item:hover {
            background: #451a1a;
        }

        .dark-mode .low-stock-type {
            color: #fca5a5;
        }

        .dark-mode .low-stock-count {
            color: #f87171;
        }

        .dark-mode .low-stock-alert {
            background: #451a1a !important;
            border-color: #7f1d1d !important;
        }

        .dark-mode .low-stock-alert:hover {
            background: #7f1d1d !important;
        }

        /* Garment Threshold Settings */
        .garment-thresholds-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            background: #f9fafb;
        }

        .threshold-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }

        .garment-type-name {
            font-weight: 600;
            color: #374151;
            min-width: 80px;
        }

        .threshold-input {
            width: 80px;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            text-align: center;
        }

        .current-stock {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .current-stock.low-stock {
            color: #ef4444;
            font-weight: 600;
        }

        .no-garments-message {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
            font-style: italic;
        }

        /* Dark mode threshold settings */
        .dark-mode .garment-thresholds-list {
            background: #374151;
            border-color: #4b5563;
        }

        .dark-mode .threshold-item {
            background: #4b5563;
            border-color: #6b7280;
        }

        .dark-mode .garment-type-name {
            color: #f9fafb;
        }

        .dark-mode .threshold-input {
            background: #374151;
            border-color: #6b7280;
            color: #f9fafb;
        }

        .dark-mode .current-stock {
            color: #d1d5db;
        }

        /* Best Sellers with Emojis */
        .best-sellers-section {
            margin-bottom: 2rem;
        }

        .best-sellers-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .best-sellers-header:hover {
            background: linear-gradient(135deg, #fde68a, #fcd34d);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .best-sellers-content {
            flex: 1;
        }

        .best-sellers-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .best-seller-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            border-left: 4px solid transparent;
            transition: all 0.2s ease;
        }

        .best-seller-item:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateX(4px);
        }

        .best-seller-item.rank-1 {
            border-left-color: #fbbf24; /* Gold */
            background: linear-gradient(90deg, rgba(251, 191, 36, 0.1), rgba(255, 255, 255, 0.8));
        }

        .best-seller-item.rank-2 {
            border-left-color: #9ca3af; /* Silver */
            background: linear-gradient(90deg, rgba(156, 163, 175, 0.1), rgba(255, 255, 255, 0.8));
        }

        .best-seller-item.rank-3 {
            border-left-color: #d97706; /* Bronze */
            background: linear-gradient(90deg, rgba(217, 119, 6, 0.1), rgba(255, 255, 255, 0.8));
        }

        .best-seller-emoji {
            font-size: 2rem;
            min-width: 40px;
            text-align: center;
        }

        .best-seller-info {
            flex: 1;
        }

        .garment-type-name {
            font-weight: 600;
            color: #374151;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .performance-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.875rem;
        }

        .sold-count {
            color: #059669;
            font-weight: 500;
        }

        .performance-percentage {
            color: #dc2626;
            font-weight: 600;
            background: rgba(239, 68, 68, 0.1);
            padding: 0.125rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .rank-badge {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            color: white;
        }

        .rank-1 .rank-badge {
            background: #fbbf24;
        }

        .rank-2 .rank-badge {
            background: #9ca3af;
        }

        .rank-3 .rank-badge {
            background: #d97706;
        }

        .click-hint {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(161, 98, 7, 0.2);
        }

        .no-data-message {
            text-align: center;
            padding: 2rem;
            color: #a16207;
            font-style: italic;
        }

        /* Dark mode best sellers */
        .dark-mode .best-sellers-header {
            background: linear-gradient(135deg, #451a03, #78350f);
            border-color: #a16207;
        }

        .dark-mode .best-sellers-header:hover {
            background: linear-gradient(135deg, #78350f, #a16207);
        }

        .dark-mode .best-seller-item {
            background: rgba(55, 65, 81, 0.8);
        }

        .dark-mode .best-seller-item:hover {
            background: rgba(55, 65, 81, 0.95);
        }

        .dark-mode .garment-type-name {
            color: #f9fafb;
        }

        .dark-mode .sold-count {
            color: #34d399;
        }

        .dark-mode .click-hint span {
            color: #fde68a;
        }

        .dark-mode .no-data-message {
            color: #fde68a;
        }

        /* Mobile responsiveness for garment analytics */
        @media (max-width: 768px) {
            .garment-item {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .garment-stats {
                justify-content: space-between;
            }

            .garment-profit {
                text-align: center;
            }

            .garment-chart {
                padding: 0.75rem;
                gap: 0.5rem;
            }

            .chart-bar-container {
                min-width: 50px;
            }

            .chart-bar {
                width: 30px;
            }

            .stacked-bar {
                width: 45px;
                max-height: 160px;
            }

            .garment-chart {
                gap: 0.75rem;
                height: 200px;
                padding: 1rem;
            }

            .chart-legend {
                gap: 0.5rem;
                font-size: 0.7rem;
            }

            .legend-item {
                font-size: 0.65rem;
            }

            .legend-color {
                width: 10px;
                height: 10px;
            }

            .performance-info-panel {
                padding: 0.75rem;
                margin-bottom: 0.75rem;
            }

            .info-examples {
                padding: 0.5rem;
            }

            .info-example {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }

            .example-label {
                min-width: unset;
                font-size: 0.7rem;
            }

            .switch-group {
                padding: 1rem;
            }

            .switch-group .toggle-label {
                font-size: 0.9rem;
            }

            .method-description {
                font-size: 0.8rem;
            }

            /* Mobile responsive for inventory overview */
            .overview-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .overview-summary {
                gap: 1rem;
            }

            .inventory-cards-grid {
                grid-template-columns: 1fr;
            }

            .card-header {
                padding: 1rem;
            }

            .quick-stats {
                flex-direction: column;
                gap: 0.5rem;
                align-items: flex-start;
            }

            .details-grid {
                grid-template-columns: 1fr;
            }

            .detail-actions {
                flex-direction: column;
            }

            .empty-inventory-state {
                padding: 2rem 1rem;
            }

            .low-stock-item {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
                text-align: center;
            }

            .garment-name-container {
                align-items: center;
            }

            .threshold-item {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
                text-align: center;
            }

            .threshold-input {
                width: 100%;
            }

            .best-seller-item {
                flex-direction: row;
                gap: 0.75rem;
                padding: 0.5rem 0.75rem;
            }

            .best-seller-emoji {
                font-size: 1.5rem;
                min-width: 30px;
            }

            .performance-stats {
                flex-direction: column;
                gap: 0.25rem;
            }

            .rank-badge {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
           }

           .dark-mode .return-option .status-option-content {
               background: linear-gradient(135deg, rgba(254, 242, 242, 0.1), rgba(254, 202, 202, 0.1));
           }

           .dark-mode .return-badge {
               background: linear-gradient(135deg, #dc2626, #b91c1c);
           }

           .dark-mode .return-help {
               color: var(--text-muted);
           }

           /* Dark Mode Search Container */
           .dark-mode .main-search {
               background: var(--card-bg);
               border: 2px solid var(--border-color);
               color: var(--text-primary);
           }

           .dark-mode .main-search:hover {
               border-color: rgba(255, 255, 255, 0.3);
               box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
           }

           .dark-mode .main-search:focus {
               border-color: #6366f1;
               box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2), 0 2px 8px rgba(0, 0, 0, 0.3);
           }

           .dark-mode .search-icon {
               color: var(--text-muted);
           }

           .dark-mode .main-search:focus ~ .search-icon {
               color: #6366f1;
           }

           .dark-mode .clear-search-btn {
               background: rgba(55, 65, 81, 0.8);
               color: var(--text-muted);
           }

           .dark-mode .clear-search-btn:hover {
               background: rgba(75, 85, 99, 0.9);
               color: var(--text-primary);
           }

           /* Dark mode bulk upload styles */
           .dark-mode .bulk-upload-card {
               background: var(--card-bg) !important;
               border: 1px solid var(--card-border) !important;
               box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
               backdrop-filter: blur(10px) !important;
           }

           .dark-mode .bulk-upload-button {
               background: var(--input-bg) !important;
               border: 2px dashed rgba(219, 39, 119, 0.4) !important; /* Default pink */
               color: var(--text-primary) !important;
           }

           /* Dark mode theme-specific bulk upload button */
           .dark-mode.color-scheme .bulk-upload-button {
               border-color: color-mix(in srgb, var(--theme-primary), transparent 60%) !important;
           }

           .dark-mode.theme-rawr .bulk-upload-button {
               border-color: rgba(220, 38, 38, 0.4) !important;
           }

           .dark-mode .bulk-upload-button:hover {
               border-color: rgba(219, 39, 119, 0.7) !important;
               background: rgba(219, 39, 119, 0.1) !important;
               box-shadow: 0 6px 20px rgba(219, 39, 119, 0.2) !important;
               transform: translateY(-2px) !important;
           }

           .dark-mode .bulk-upload-card:hover {
               border-color: rgba(219, 39, 119, 0.4) !important;
               box-shadow: 0 12px 40px rgba(219, 39, 119, 0.2) !important;
               transform: translateY(-2px) !important;
           }

           /* Dark mode + color scheme combinations */
           .dark-mode.color-scheme .bulk-upload-button:hover {
               border-color: var(--theme-primary) !important;
               background: color-mix(in srgb, var(--theme-primary), transparent 90%) !important;
               box-shadow: 0 6px 20px color-mix(in srgb, var(--theme-primary), transparent 80%) !important;
           }

           .dark-mode.color-scheme .bulk-upload-card:hover {
               border-color: color-mix(in srgb, var(--theme-primary), transparent 60%) !important;
               box-shadow: 0 12px 40px color-mix(in srgb, var(--theme-primary), transparent 80%) !important;
           }

           /* Dark mode + rawr theme */
           .dark-mode.theme-rawr .bulk-upload-button:hover {
               border-color: rgba(220, 38, 38, 0.7) !important;
               background: rgba(220, 38, 38, 0.1) !important;
               box-shadow: 0 6px 20px rgba(220, 38, 38, 0.2) !important;
           }

           .dark-mode.theme-rawr .bulk-upload-card:hover {
               border-color: rgba(220, 38, 38, 0.4) !important;
               box-shadow: 0 12px 40px rgba(220, 38, 38, 0.2) !important;
           }

           .dark-mode .bulk-upload-button i {
               color: #db2777;
           }

           .dark-mode .bulk-upload-button span {
               color: var(--text-primary);
           }

           .dark-mode .bulk-upload-button small {
               color: var(--text-muted);
           }

           .dark-mode .section-divider::before {
               background: var(--border-color);
           }

           .dark-mode .section-divider span {
               background: var(--card-bg);
               color: var(--text-muted);
           }

           .dark-mode .bulk-progress {
               background: var(--card-bg);
               border: 1px solid var(--border-color);
           }

           /* Dark mode for enhanced progress */
           .dark-mode .cute-bulk-progress {
               background: linear-gradient(135deg, var(--card-bg), rgba(31, 41, 55, 0.95));
               border: 2px solid rgba(244, 114, 182, 0.3);
               box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
           }

           .dark-mode .cute-bulk-progress:hover {
               border-color: rgba(244, 114, 182, 0.4) !important;
               box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4) !important;
               transform: translateY(-2px) !important;
           }

           /* Dark mode + color scheme bulk progress */
           .dark-mode.color-scheme .cute-bulk-progress {
               border-color: color-mix(in srgb, var(--theme-primary), transparent 70%) !important;
               box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
           }

           .dark-mode.color-scheme .cute-bulk-progress:hover {
               border-color: color-mix(in srgb, var(--theme-primary), transparent 60%) !important;
               box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4) !important;
           }

           /* Dark mode + rawr theme bulk progress */
           .dark-mode.theme-rawr .cute-bulk-progress {
               border-color: rgba(220, 38, 38, 0.3) !important;
               box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
           }

           .dark-mode.theme-rawr .cute-bulk-progress:hover {
               border-color: rgba(220, 38, 38, 0.4) !important;
               box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4) !important;
           }

           .dark-mode .progress-text h4 {
               color: #f472b6;
           }

           .dark-mode .current-count {
               color: #f472b6;
           }

           .dark-mode .total-count {
               color: var(--text-primary);
           }

           .dark-mode .progress-counter {
               color: var(--text-muted);
           }

           .dark-mode .percentage {
               color: #f472b6;
           }

           .dark-mode .time-remaining {
               color: var(--text-muted);
           }

           .dark-mode .success-content {
               background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
               border: 1px solid rgba(16, 185, 129, 0.3);
           }

           .dark-mode .success-text {
               color: #34d399;
           }

           .dark-mode .progress-header h4 {
               color: var(--text-primary);
           }

           .dark-mode .progress-info {
               color: var(--text-secondary);
           }

           .dark-mode .time-remaining {
               color: var(--text-muted);
           }

           .dark-mode .progress-bar-container {
               background: rgba(55, 65, 81, 0.5);
           }

           .dark-mode .progress-percentage {
               color: var(--text-secondary);
           }

           /* Dark mode filter button styles */
           .dark-mode .sticky-filter-btn {
               background: var(--card-bg);
               border: 1px solid var(--card-border);
               color: var(--text-primary);
               box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
           }

           .dark-mode .sticky-filter-btn:hover {
               background: rgba(255, 255, 255, 0.1);
               box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
           }

           .dark-mode .filter-badge {
               background: #6366f1;
               color: white;
           }

        /* Notification Toast Styles */
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            max-width: 400px;
        }

        .notification-content {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .notification-content i.fa-check-circle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .notification-content span {
            flex: 1;
            font-weight: 500;
        }

        .notification-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .notification-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Dark mode notification */
        .dark-mode .notification-content {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 8px 32px rgba(5, 150, 105, 0.4);
        }

        /* Dark mode cute notifications */
        .dark-mode .cute-notification-toast {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.98), rgba(17, 24, 39, 0.95)) !important;
            border: 2px solid rgba(244, 114, 182, 0.3) !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4) !important;
        }

        .dark-mode .notification-message {
            color: #e5e7eb;
        }

        .dark-mode .notification-subtitle {
            color: #9ca3af;
        }

        .dark-mode .cute-notification-close {
            color: #f472b6;
        }

        .dark-mode .cute-notification-close:hover {
            background: rgba(244, 114, 182, 0.2);
        }

        /* Dark mode robot AI scan notification */
        .dark-mode .ai-robot-notification {
            background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
            border: 2px solid rgba(244, 114, 182, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
        }

        .dark-mode .ai-robot-notification.success {
            background: linear-gradient(135deg, #047857 0%, #065f46 100%);
            border: 2px solid rgba(16, 185, 129, 0.4);
        }

        .dark-mode .ai-robot-notification.error {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border: 2px solid rgba(239, 68, 68, 0.4);
        }

        /* Dark mode About, Contact, and Sign In pages */
        .dark-mode .about-page, 
        .dark-mode .contact-page, 
        .dark-mode .signin-page {
            color: #e5e7eb;
        }

        .dark-mode .about-hero h1, 
        .dark-mode .contact-hero h1, 
        .dark-mode .signin-hero h1 {
            color: #f472b6;
        }

        .dark-mode .about-subtitle, 
        .dark-mode .contact-subtitle, 
        .dark-mode .signin-subtitle {
            color: #9ca3af;
        }

        .dark-mode .about-section h2, 
        .dark-mode .contact-section h2 {
            color: #f472b6;
        }

        .dark-mode .about-section p, 
        .dark-mode .contact-section p {
            color: #d1d5db;
        }

        .dark-mode .feature-card {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.3);
            backdrop-filter: blur(10px);
        }

        .dark-mode .feature-card i {
            color: #f472b6;
        }

        .dark-mode .feature-card h3 {
            color: #e5e7eb;
        }

        .dark-mode .feature-card p {
            color: #9ca3af;
        }

        .dark-mode .contact-method {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.3);
            backdrop-filter: blur(10px);
        }

        .dark-mode .contact-method i {
            color: #f472b6;
        }

        .dark-mode .contact-method h3 {
            color: #e5e7eb;
        }

        .dark-mode .contact-method p {
            color: #9ca3af;
        }

        .dark-mode .signin-form {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.3);
            backdrop-filter: blur(10px);
        }

        .dark-mode .signin-form h2 {
            color: #e5e7eb;
        }

        .dark-mode .signin-links a {
            color: #f472b6;
        }

        .dark-mode .signin-links a:hover {
            color: #ec4899;
        }

        /* Dark mode for all modals with inline white backgrounds */
        .dark-mode .modal-content[style*="background: white"],
        .dark-mode .qr-modal-content[style*="background: white"] {
            background: #1f2937 !important;
            color: #e5e7eb !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
        }

        .dark-mode .modal-content h3,
        .dark-mode .modal-content h2,
        .dark-mode .modal-content h1,
        .dark-mode .qr-modal-content h3,
        .dark-mode .qr-modal-content h2,
        .dark-mode .qr-modal-content h1 {
            color: #f9fafb !important;
        }

        .dark-mode .modal-content label,
        .dark-mode .qr-modal-content label {
            color: #d1d5db !important;
        }

        .dark-mode .modal-content input,
        .dark-mode .modal-content select,
        .dark-mode .modal-content textarea,
        .dark-mode .qr-modal-content input,
        .dark-mode .qr-modal-content select,
        .dark-mode .qr-modal-content textarea {
            background: #374151 !important;
            color: #e5e7eb !important;
            border: 1px solid #4b5563 !important;
        }

        .dark-mode .modal-content input:focus,
        .dark-mode .modal-content select:focus,
        .dark-mode .modal-content textarea:focus,
        .dark-mode .qr-modal-content input:focus,
        .dark-mode .qr-modal-content select:focus,
        .dark-mode .qr-modal-content textarea:focus {
            border-color: #f472b6 !important;
            box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.15) !important;
        }

        .dark-mode .modal-content .help-text,
        .dark-mode .modal-content .method-description,
        .dark-mode .qr-modal-content .help-text {
            color: #9ca3af !important;
        }

        /* Dark mode for percentage and pricing settings */
        .dark-mode .pricing-settings,
        .dark-mode .pricing-method-switches,
        .dark-mode .switch-group {
            color: #e5e7eb;
        }

        .dark-mode .method-description {
            color: #9ca3af !important;
        }

        .dark-mode .toggle-label {
            color: #d1d5db !important;
        }

        .dark-mode .toggle-switch {
            background: #374151 !important;
            border: 1px solid #4b5563 !important;
        }

        .dark-mode .toggle-switch::before {
            background: #6b7280 !important;
        }

        .dark-mode input:checked + .toggle-switch {
            background: #f472b6 !important;
        }

        .dark-mode input:checked + .toggle-switch::before {
            background: white !important;
        }

        /* White content wrappers for tiled background readability */
        .content-wrapper {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin: 1rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark-mode .content-wrapper {
            background: rgba(31, 41, 55, 0.95);
            border: 1px solid rgba(75, 85, 99, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced content wrappers for pages */
        .about-page, .contact-page, .signin-page {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            padding: 3rem;
            margin: 2rem auto;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.4);
        }

        .dark-mode .about-page, 
        .dark-mode .contact-page, 
        .dark-mode .signin-page {
            background: rgba(31, 41, 55, 0.95);
            border: 2px solid rgba(75, 85, 99, 0.4);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        /* Enhanced feature cards and contact methods for tiled backgrounds */
        .feature-card {
            background: rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(15px) !important;
            border: 2px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
        }

        .contact-method {
            background: rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(15px) !important;
            border: 2px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
        }

        .signin-form {
            background: rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(15px) !important;
            border: 2px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
        }

        /* Dark mode overrides for enhanced cards */
        .dark-mode .feature-card {
            background: rgba(31, 41, 55, 0.9) !important;
            border: 2px solid rgba(75, 85, 99, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .contact-method {
            background: rgba(31, 41, 55, 0.9) !important;
            border: 2px solid rgba(75, 85, 99, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .signin-form {
            background: rgba(31, 41, 55, 0.9) !important;
            border: 2px solid rgba(75, 85, 99, 0.5) !important;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
        }

        /* Dark mode for bulk actions panel */
        .dark-mode .bulk-actions-panel {
            background: linear-gradient(135deg, #1f2937, #111827) !important;
            border-top: 1px solid rgba(75, 85, 99, 0.3) !important;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .bulk-actions-content {
            color: #e5e7eb !important;
        }

        .dark-mode .bulk-info span {
            color: #d1d5db !important;
        }

        /* Dark mode for all bulk modals with inline styles */
        .dark-mode div[x-show="showBulkEditModal"] .modal-content,
        .dark-mode div[x-show="showBulkEditSoldModal"] .modal-content,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] .modal-content,
        .dark-mode div[x-show="showBulkReturnModal"] > div {
            background: #1f2937 !important;
            color: #e5e7eb !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
        }

        .dark-mode div[x-show="showBulkEditModal"] h3,
        .dark-mode div[x-show="showBulkEditSoldModal"] h3,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] h3,
        .dark-mode div[x-show="showBulkReturnModal"] h3 {
            color: #f9fafb !important;
        }

        .dark-mode div[x-show="showBulkEditModal"] p,
        .dark-mode div[x-show="showBulkEditSoldModal"] p,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] p,
        .dark-mode div[x-show="showBulkReturnModal"] p {
            color: #9ca3af !important;
        }

        .dark-mode div[x-show="showBulkEditModal"] label,
        .dark-mode div[x-show="showBulkEditSoldModal"] label,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] label,
        .dark-mode div[x-show="showBulkReturnModal"] label {
            color: #d1d5db !important;
        }

        .dark-mode div[x-show="showBulkEditModal"] input,
        .dark-mode div[x-show="showBulkEditModal"] select,
        .dark-mode div[x-show="showBulkEditModal"] textarea,
        .dark-mode div[x-show="showBulkEditSoldModal"] input,
        .dark-mode div[x-show="showBulkEditSoldModal"] select,
        .dark-mode div[x-show="showBulkEditSoldModal"] textarea,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] input,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] select,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] textarea,
        .dark-mode div[x-show="showBulkReturnModal"] input,
        .dark-mode div[x-show="showBulkReturnModal"] select,
        .dark-mode div[x-show="showBulkReturnModal"] textarea {
            background: #374151 !important;
            color: #e5e7eb !important;
            border: 1px solid #4b5563 !important;
        }

        .dark-mode div[x-show="showBulkEditModal"] small,
        .dark-mode div[x-show="showBulkEditSoldModal"] small,
        .dark-mode div[x-show="showBulkMoveToSoldModal"] small,
        .dark-mode div[x-show="showBulkReturnModal"] small {
            color: #9ca3af !important;
        }

        /* Dark mode for item cards */
        .dark-mode .item-card {
            background: rgba(31, 41, 55, 0.95) !important;
            border: 1px solid rgba(75, 85, 99, 0.4) !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
        }

        .dark-mode .item-card:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3) !important;
            border-color: rgba(244, 114, 182, 0.4) !important;
        }

        .dark-mode .inventory-card {
            background: #1f2937 !important;
            border: 2px solid rgba(75, 85, 99, 0.3) !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .inventory-card:hover {
            border-color: rgba(75, 85, 99, 0.5) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4) !important;
        }

        .dark-mode .card-header {
            border-bottom: 1px solid rgba(75, 85, 99, 0.3) !important;
        }

        .dark-mode .card-title h5 {
            color: #f9fafb !important;
        }

        .dark-mode .overview-header {
            background: linear-gradient(135deg, #1f2937, #111827) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
        }

        .dark-mode .overview-header h4 {
            color: #f9fafb !important;
        }

        .dark-mode .stat-number {
            color: #f9fafb !important;
        }

        .dark-mode .stat-label {
            color: #9ca3af !important;
        }

        /* Dark mode for pricing method selection cards */
        .dark-mode .switch-group {
            background: #1f2937 !important;
            border: 2px solid rgba(75, 85, 99, 0.4) !important;
        }

        .dark-mode .switch-group:hover {
            border-color: rgba(75, 85, 99, 0.6) !important;
            background: #111827 !important;
        }

        .dark-mode .switch-group:has(input:checked) {
            border-color: #f472b6 !important;
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.9), rgba(17, 24, 39, 0.9)) !important;
            box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.2) !important;
        }

        .dark-mode .switch-group:has(input:checked) .toggle-label {
            color: #f472b6 !important;
        }

        .dark-mode .switch-group:has(input:checked) .method-description {
            color: #d1d5db !important;
        }

        /* Dark mode for payment method cards */
        .dark-mode .payment-method-card {
            background: #1f2937 !important;
            border: 1px solid rgba(75, 85, 99, 0.4) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
        }

        .dark-mode .payment-method-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
            border-color: rgba(75, 85, 99, 0.6) !important;
        }

        .dark-mode .payment-header h4 {
            color: #f9fafb !important;
        }

        .dark-mode .qr-error {
            background: #7f1d1d !important;
            border: 1px solid #991b1b !important;
            color: #fecaca !important;
        }

        .dark-mode .qr-error p {
            color: #fecaca !important;
        }

        .dark-mode .qr-error small {
            color: #fca5a5 !important;
        }

        /* Strengthen till header dark mode styles */
        .dark-mode .till-header-wrapper {
            background: linear-gradient(135deg, #1f2937, #111827) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4) !important;
        }

        .dark-mode .till-header h2 {
            color: #f9fafb !important;
        }

        .dark-mode .till-header p {
            color: #d1d5db !important;
        }

        /* Cute Upload Notification Styles */
        .cute-notification-toast {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            z-index: 9999999 !important;
            background: linear-gradient(135deg, rgba(250, 248, 246, 0.98), rgba(255, 255, 255, 0.95)) !important;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(244, 114, 182, 0.2) !important;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(244, 114, 182, 0.15) !important;
            max-width: 420px;
            min-width: 320px;
            overflow: hidden;
        }

        .cute-notification-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            position: relative;
        }

        .notification-icon-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

         .notification-icon {
             width: 60px;
             height: 60px;
             border-radius: 50%;
             display: flex;
             align-items: center;
             justify-content: center;
             background: linear-gradient(135deg, #f472b6, #db2777); /* Default pink */
             box-shadow: 0 8px 20px rgba(244, 114, 182, 0.3);
             animation: iconBounce 0.6s ease-out;
             position: relative;
         }

         /* Theme-specific notification icon colors */
         .color-scheme .notification-icon {
             background: linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%));
             box-shadow: 0 8px 20px color-mix(in srgb, var(--theme-primary), transparent 70%);
         }

         body.theme-rawr .notification-icon {
             background: linear-gradient(135deg, #dc2626, #991b1b) !important;
             box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3) !important;
         }

        .notification-emoji {
            font-size: 1.8rem;
            animation: emojiSpin 0.8s ease-out;
        }

        .sparkles {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            font-size: 1rem;
            animation: sparkleFloat 2s ease-in-out infinite;
            opacity: 0;
        }

        .sparkle-1 {
            top: -20px;
            left: -15px;
            animation-delay: 0.2s;
        }

        .sparkle-2 {
            top: -15px;
            right: -20px;
            animation-delay: 0.5s;
        }

        .sparkle-3 {
            bottom: -20px;
            left: -10px;
            animation-delay: 0.8s;
        }

        .notification-message {
            flex: 1;
            color: #374151;
        }

        .notification-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #db2777; /* Default pink */
        }

        /* Theme-specific notification title colors */
        .color-scheme .notification-title {
            color: var(--theme-primary);
        }

        body.theme-rawr .notification-title {
            color: #dc2626 !important;
        }

        .notification-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
            line-height: 1.4;
        }

        .cute-notification-close {
            background: rgba(244, 114, 182, 0.1);
            border: none;
            color: #db2777;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 0.8rem;
        }

        .cute-notification-close:hover {
            background: rgba(244, 114, 182, 0.2);
            transform: scale(1.1);
        }

        .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #f472b6, #db2777); /* Default pink */
            border-radius: 0 0 20px 20px;
            animation: progressBar 4s ease-out forwards;
        }

        /* Theme-specific notification progress colors */
        .color-scheme .notification-progress {
            background: linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary), black 15%));
        }

        body.theme-rawr .notification-progress {
            background: linear-gradient(90deg, #dc2626, #991b1b) !important;
        }

        /* Different styles for different notification types */
        .cute-notification-toast.upload-single .notification-icon {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .cute-notification-toast.upload-single .notification-progress {
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
        }

        .cute-notification-toast.upload-bulk .notification-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .cute-notification-toast.upload-bulk .notification-progress {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        /* Animations */
        @keyframes iconBounce {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        @keyframes emojiSpin {
            0% { transform: scale(0) rotate(-180deg); }
            50% { transform: scale(1.1) rotate(0deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes sparkleFloat {
            0% { 
                opacity: 0; 
                transform: translateY(0px) scale(0); 
            }
            20% { 
                opacity: 1; 
                transform: translateY(-10px) scale(1); 
            }
            80% { 
                opacity: 1; 
                transform: translateY(-20px) scale(1); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-30px) scale(0); 
            }
        }

        @keyframes progressBar {
            0% { width: 100%; }
            100% { width: 0%; }
        }

         /* Tiled Background Styles */
         .tiled-settings {
             margin-top: 1rem;
             padding-top: 1rem;
             border-top: 1px solid #e5e7eb;
         }

         .dark-mode .tiled-settings {
             border-top-color: var(--border-color);
         }

         .file-input-styled {
             padding: 0.75rem;
             border: 2px dashed #d1d5db;
             border-radius: 8px;
             cursor: pointer;
             transition: all 0.3s ease;
             text-align: center;
         }

         .file-input-styled:hover {
             border-color: #f472b6;
             background: rgba(244, 114, 182, 0.05);
         }

         .dark-mode .file-input-styled {
             border-color: var(--border-color);
             background: var(--input-bg);
             color: var(--text-primary);
         }

         .dark-mode .file-input-styled:hover {
             border-color: #db2777;
             background: rgba(219, 39, 119, 0.1);
         }

         .tile-preview {
             margin-top: 1rem;
             display: flex;
             align-items: center;
             gap: 1rem;
             padding: 1rem;
             background: rgba(255, 255, 255, 0.05);
             border-radius: 8px;
         }

         .tile-preview-img {
             width: 60px;
             height: 60px;
             object-fit: cover;
             border-radius: 8px;
             border: 2px solid #e5e7eb;
         }

         .dark-mode .tile-preview-img {
             border-color: var(--border-color);
         }

         .range-value {
             text-align: center;
             font-weight: 600;
             margin-top: 0.5rem;
             color: #6366f1;
         }

         .dark-mode .range-value {
             color: #a5b4fc;
         }

         /* Range input styling */
         input[type="range"] {
             width: 100%;
             height: 6px;
             border-radius: 3px;
             background: #e5e7eb;
             outline: none;
             -webkit-appearance: none;
         }

         input[type="range"]::-webkit-slider-thumb {
             -webkit-appearance: none;
             appearance: none;
             width: 20px;
             height: 20px;
             border-radius: 50%;
             background: linear-gradient(135deg, #f472b6, #db2777);
             cursor: pointer;
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
         }

         input[type="range"]::-moz-range-thumb {
             width: 20px;
             height: 20px;
             border-radius: 50%;
             background: linear-gradient(135deg, #f472b6, #db2777);
             cursor: pointer;
             border: none;
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
         }

         .dark-mode input[type="range"] {
             background: var(--border-color);
         }

         .dark-mode input[type="range"]::-webkit-slider-thumb {
             background: linear-gradient(135deg, #db2777, #be185d);
         }

         .dark-mode input[type="range"]::-moz-range-thumb {
             background: linear-gradient(135deg, #db2777, #be185d);
         }

         /* Tiled background overlay */
         .tiled-background-overlay {
             position: fixed;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             pointer-events: none;
             z-index: -1;
             background-repeat: repeat;
             background-size: var(--tile-size, 100px);
             opacity: var(--tile-opacity, 0.3);
         }

         /* Color Scheme Variables */
         .color-scheme {
             /* Default values (will be overridden) */
             --theme-primary: #FFB7E5;
             --theme-secondary: #AAB6FF;
             --theme-accent: #B9FBC0;
             --theme-accent-2: #FFB347;
             --theme-accent-3: #C7B7FF;
         }

         /* Pastel Dreams Theme */
         .theme-pastel {
             --theme-primary: #F472B6;      /* Rich Pink */
             --theme-secondary: #C084FC;    /* Medium Lavender */
             --theme-accent: #DDD6FE;       /* Soft Lavender */
             --theme-accent-2: #F8BBD9;     /* Blush Pink */
             --theme-accent-3: #A78BFA;     /* Deeper Lavender */
         }

         .theme-pastel {
             color: #374151;
         }

         .theme-pastel label,
         .theme-pastel .stat-label,
         .theme-pastel .metric-label,
         .theme-pastel .activity-date,
         .theme-pastel .item-source,
         .theme-pastel .help-text {
             color: #6b7280;
         }

         .theme-pastel input,
         .theme-pastel select,
         .theme-pastel textarea {
             border-color: #d1d5db;
             color: #374151;
             background: rgba(250, 248, 246, 0.95);
         }

         .theme-pastel .photo-upload,
         .theme-pastel .camera-option {
             border-color: #d1d5db;
             background: rgba(250, 248, 246, 0.95);
         }

         .theme-pastel .photo-upload i,
         .theme-pastel .camera-option i {
             color: #F472B6 !important; /* Rich Pink - theme primary */
         }

         .theme-pastel .bulk-upload-button i {
             color: #F472B6 !important; /* Rich Pink - theme primary */
         }




         /* rawr xd Theme */
         .theme-rawr {
             --theme-primary: #DC2626;      /* Red */
             --theme-secondary: #991B1B;    /* Dark Red */
             --theme-accent: #EF4444;       /* Bright Red */
             --theme-accent-2: #1F2937;     /* Dark Gray */
             --theme-accent-3: #374151;     /* Medium Gray */
         }

         .theme-rawr {
             color: #F9FAFB;
             background: linear-gradient(135deg, #111827 0%, #1F2937 50%, #374151 100%);
         }

         .theme-rawr label,
         .theme-rawr .stat-label,
         .theme-rawr .metric-label,
         .theme-rawr .activity-date,
         .theme-rawr .item-source,
         .theme-rawr .help-text {
             color: #D1D5DB;
         }

         .theme-rawr input,
         .theme-rawr select,
         .theme-rawr textarea {
             border-color: #DC2626;
             color: #F9FAFB;
             background: rgba(31, 41, 55, 0.8);
         }

         .theme-rawr .photo-upload,
         .theme-rawr .camera-option {
             border-color: #DC2626;
             background: rgba(31, 41, 55, 0.6);
             color: #F9FAFB;
         }

         .theme-rawr .photo-upload i,
         .theme-rawr .camera-option i {
             color: #DC2626 !important; /* Red - theme primary */
         }

         .theme-rawr .bulk-upload-button {
             background: rgba(31, 41, 55, 0.6);
             color: #F9FAFB;
         }

         .theme-rawr .bulk-upload-button i {
             color: #DC2626 !important; /* Red - theme primary */
         }

         /* Enhanced dark mode styling for rawr xd theme */
         body.dark-mode.theme-rawr {
             background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%);
         }

         .dark-mode.theme-rawr .header {
             background: linear-gradient(135deg, #000000, #DC2626, #991B1B);
             box-shadow: 0 4px 20px rgba(220, 38, 38, 0.3);
         }

         .dark-mode.theme-rawr .card {
             background: rgba(15, 23, 42, 0.9);
             border: 1px solid rgba(220, 38, 38, 0.3);
             box-shadow: 0 8px 32px rgba(220, 38, 38, 0.1);
         }

         .dark-mode.theme-rawr .btn-primary {
             background: linear-gradient(135deg, #DC2626, #991B1B);
         }

         .dark-mode.theme-rawr .btn-secondary {
             background: linear-gradient(135deg, #374151, #1F2937);
             border: 1px solid #DC2626;
         }

         .dark-mode.theme-rawr .bottom-tabs {
             background: rgba(15, 23, 42, 0.95);
             border-top: 1px solid #DC2626;
             box-shadow: 0 -8px 32px rgba(220, 38, 38, 0.2);
         }

         .dark-mode.theme-rawr .tab.active {
             color: #F9FAFB;
             background: rgba(220, 38, 38, 0.2);
             border-color: #DC2626;
         }

         .dark-mode.theme-rawr input:focus,
         .dark-mode.theme-rawr select:focus,
         .dark-mode.theme-rawr textarea:focus {
             border-color: #DC2626;
             box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.15);
         }

         /* Replace ALL purple with red for rawr xd theme */
         body.theme-rawr .btn-primary {
             background: linear-gradient(135deg, #DC2626, #991B1B) !important;
             color: #FFFFFF !important;
         }

         body.theme-rawr .btn-secondary {
             background: linear-gradient(135deg, #374151, #1F2937) !important;
             border: 1px solid #DC2626 !important;
             color: #F9FAFB !important;
         }

         body.theme-rawr .btn-success {
             background: linear-gradient(135deg, #DC2626, #991B1B) !important;
             color: #FFFFFF !important;
         }

         body.theme-rawr .btn-danger {
             background: linear-gradient(135deg, #7F1D1D, #450A0A) !important;
             color: #FFFFFF !important;
         }

         body.theme-rawr input:focus,
         body.theme-rawr select:focus,
         body.theme-rawr textarea:focus {
             border-color: #DC2626 !important;
             box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.15) !important;
         }

         body.theme-rawr .tab.active {
             background: rgba(220, 38, 38, 0.2) !important;
             border-color: #DC2626 !important;
             color: #F9FAFB !important;
         }

         body.theme-rawr .tab:hover:not(.active) {
             background: rgba(220, 38, 38, 0.1) !important;
             border-color: rgba(220, 38, 38, 0.3) !important;
         }

         /* Bottom navigation tabs for rawr xd */
         body.theme-rawr .bottom-tabs .tab.active {
             background: rgba(220, 38, 38, 0.2) !important;
             border-color: #DC2626 !important;
             color: #F9FAFB !important;
         }

         body.theme-rawr .bottom-tabs .tab:hover:not(.active) {
             background: rgba(220, 38, 38, 0.1) !important;
             border-color: rgba(220, 38, 38, 0.3) !important;
         }

         /* Radio buttons for rawr xd */
         body.theme-rawr .radio-custom::before {
             background: linear-gradient(135deg, #DC2626, #991B1B) !important;
         }

         body.theme-rawr .radio-label input[type="radio"]:checked + .radio-custom {
             border-color: #DC2626 !important;
             background: #fef2f2 !important;
             box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
         }

         body.theme-rawr .radio-label:hover {
             background: rgba(220, 38, 38, 0.05) !important;
         }

         body.theme-rawr .radio-label:hover .radio-custom {
             border-color: #DC2626 !important;
             background: #fff5f5 !important;
         }

         /* Toggle switches for rawr xd */
         body.theme-rawr .toggle-switch {
             background: #374151 !important;
         }

         body.theme-rawr .toggle-label input[type="checkbox"]:checked + .toggle-switch {
             background: linear-gradient(135deg, #DC2626, #991B1B) !important;
         }


         /* High Contrast Accessible Theme */
         .theme-accessible {
             --theme-primary: #000000;      /* Pure Black */
             --theme-secondary: #FFFFFF;    /* Pure White */
             --theme-accent: #333333;       /* Dark Gray */
             --theme-accent-2: #666666;     /* Medium Gray */
             --theme-accent-3: #999999;     /* Light Gray */
         }

         .theme-accessible {
             color: #000000;
             background: #FFFFFF;
         }

         .theme-accessible label,
         .theme-accessible .stat-label,
         .theme-accessible .metric-label,
         .theme-accessible .activity-date,
         .theme-accessible .item-source,
         .theme-accessible .help-text {
             color: #333333;
             font-weight: 600;
         }

         .theme-accessible input,
         .theme-accessible select,
         .theme-accessible textarea {
             border: 3px solid #000000;
             color: #000000;
             background: #FFFFFF;
             font-weight: 500;
         }

         .theme-accessible .photo-upload,
         .theme-accessible .camera-option {
             border: 3px solid #000000;
             background: #F8F9FA;
         }

         .theme-accessible .photo-upload i,
         .theme-accessible .camera-option i {
             color: #000000 !important; /* Pure Black - theme primary */
         }

         .theme-accessible .bulk-upload-button {
             border: 3px solid #000000;
             background: #F8F9FA;
         }

         .theme-accessible .bulk-upload-button i {
             color: #000000 !important; /* Pure Black - theme primary */
         }

         .theme-accessible .header {
             background: linear-gradient(135deg, #000000, #333333);
             color: #FFFFFF;
             border-bottom: 4px solid #000000;
         }

         .theme-accessible .card {
             border: 3px solid #000000;
             background: #FFFFFF;
             box-shadow: 4px 4px 0px #000000;
         }

         .theme-accessible .btn-primary {
             background: #000000;
             color: #FFFFFF;
             border: 3px solid #000000;
             font-weight: 700;
         }

         .theme-accessible .btn-secondary {
             background: #FFFFFF;
             color: #000000;
             border: 3px solid #000000;
             font-weight: 700;
         }

         .theme-accessible .status-purchased { 
             background: #FFFFFF; 
             color: #000000; 
             border: 3px solid #000000;
             font-weight: 700;
         }
         .theme-accessible .status-incomplete { 
             background: #FFE6E6; 
             color: #000000; 
             border: 3px solid #DC2626;
             font-weight: 700;
         }
         .theme-accessible .status-incomplete::before { content: "â— "; }
         
         .theme-accessible .status-purchased::before { content: "ðŸ›’ "; }

         .theme-accessible .status-washed { 
             background: #E6E6E6; 
             color: #000000; 
             border: 3px solid #000000;
             font-weight: 700;
         }
         .theme-accessible .status-washed::before { content: "ðŸ§¼ "; }

         .theme-accessible .status-ready-to-sell { 
             background: #CCCCCC; 
             color: #000000; 
             border: 3px solid #000000;
             font-weight: 700;
         }
         .theme-accessible .status-ready-to-sell::before { content: "âœ… "; }

         .theme-accessible .status-racked { 
             background: #999999; 
             color: #FFFFFF; 
             border: 3px solid #000000;
             font-weight: 700;
         }
         .theme-accessible .status-racked::before { content: "ðŸ·ï¸ "; }

         .theme-accessible .status-sold { 
             background: #000000; 
             color: #FFFFFF; 
             border: 3px solid #000000;
             font-weight: 700;
         }
         .theme-accessible .status-sold::before { content: "ðŸ’° "; }

         .theme-accessible .bottom-tabs {
             background: #FFFFFF;
             border-top: 4px solid #000000;
         }

         .theme-accessible .tab {
             color: #333333;
             border: 2px solid #000000;
             margin: 0 2px;
             font-weight: 600;
         }

         .theme-accessible .tab.active {
             background: #000000;
             color: #FFFFFF;
             font-weight: 700;
         }

         body.color-scheme {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), white 95%) 0%,
                 color-mix(in srgb, var(--theme-accent-3), white 96%) 25%,
                 color-mix(in srgb, var(--theme-secondary), white 95%) 50%,
                 color-mix(in srgb, var(--theme-accent), white 97%) 75%,
                 color-mix(in srgb, var(--theme-accent-2), white 98%) 100%);
         }

         /* REMOVED - Old conflicting status colors that were overriding new dashboard-matching colors */

         .color-scheme .header {
             background: linear-gradient(135deg, 
                 var(--theme-primary),
                 var(--theme-accent-3),
                 var(--theme-secondary));
             box-shadow: 0 4px 20px color-mix(in srgb, var(--theme-primary), transparent 70%);
         }

         .color-scheme .card {
             background: rgba(255, 255, 255, 0.98);
             border: 1px solid color-mix(in srgb, var(--theme-primary), transparent 85%);
             box-shadow: 0 8px 32px color-mix(in srgb, var(--theme-primary), transparent 92%);
             backdrop-filter: blur(10px);
         }

         .color-scheme .tabs {
             border-bottom: 2px solid color-mix(in srgb, var(--theme-primary), transparent 50%);
         }

         .color-scheme .tab.active {
             color: var(--theme-primary);
             border-bottom-color: var(--theme-primary);
             background: color-mix(in srgb, var(--theme-primary), transparent 95%);
         }

         .color-scheme .btn-primary {
             background: linear-gradient(135deg, var(--theme-primary), var(--theme-accent-3));
             border: none;
         }

         .color-scheme .btn-primary:hover {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-primary), black 5%), 
                 color-mix(in srgb, var(--theme-accent-3), black 5%));
             transform: translateY(-2px);
             box-shadow: 0 6px 20px color-mix(in srgb, var(--theme-primary), transparent 70%);
         }

         .color-scheme .btn-secondary:hover {
             background: linear-gradient(135deg, 
                 color-mix(in srgb, var(--theme-accent-2), black 5%), 
                 color-mix(in srgb, var(--theme-accent-4), black 5%));
             transform: translateY(-2px);
             box-shadow: 0 6px 20px color-mix(in srgb, var(--theme-accent-2), transparent 70%);
         }

         .color-scheme .metric-card:hover {
             transform: translateY(-4px);
             box-shadow: 0 12px 40px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .item-card:hover {
             transform: translateY(-4px);
             box-shadow: 0 12px 40px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .btn-success {
             background: linear-gradient(135deg, var(--theme-accent), var(--theme-accent-2));
         }

         /* REMOVED - Old color-scheme status rules that conflicted with new dashboard-matching colors */

         .color-scheme .metric-icon {
             background: color-mix(in srgb, var(--theme-secondary), white 85%);
             color: color-mix(in srgb, var(--theme-secondary), black 30%);
         }

         .color-scheme .metric-icon.profit {
             background: color-mix(in srgb, var(--theme-accent), white 85%);
             color: color-mix(in srgb, var(--theme-accent), black 30%);
         }

         .color-scheme .metric-icon.success {
             background: color-mix(in srgb, var(--theme-primary), white 85%);
             color: color-mix(in srgb, var(--theme-primary), black 30%);
         }

         .color-scheme .metric-icon.info {
             background: color-mix(in srgb, var(--theme-accent-2), white 85%);
             color: color-mix(in srgb, var(--theme-accent-2), black 30%);
         }

         .color-scheme .metric-icon.warning {
             background: color-mix(in srgb, #f59e0b, white 85%);
             color: color-mix(in srgb, #f59e0b, black 30%);
         }

         .color-scheme input:focus, 
         .color-scheme select:focus, 
         .color-scheme textarea:focus {
             border-color: var(--theme-primary);
             box-shadow: 0 0 0 4px color-mix(in srgb, var(--theme-primary), transparent 85%);
         }

         .color-scheme .toggle-label input[type="checkbox"]:checked + .toggle-switch {
             background: linear-gradient(135deg, var(--theme-primary), var(--theme-secondary));
         }

         .color-scheme .photo-upload:hover, 
         .color-scheme .camera-option:hover {
             border-color: var(--theme-primary);
             background: color-mix(in srgb, var(--theme-primary), transparent 95%);
         }

         .color-scheme .photo-upload i,
         .color-scheme .camera-option i {
             color: var(--theme-primary) !important;
         }

         .color-scheme .bulk-upload-button i {
             color: var(--theme-primary) !important;
         }

         .color-scheme .photo-upload,
         .color-scheme .camera-option {
             background: rgba(250, 248, 246, 0.95);
         }

         .color-scheme .bottom-tabs {
             background: rgba(255, 255, 255, 0.98);
             border-top-color: color-mix(in srgb, var(--theme-primary), white 50%);
             box-shadow: 0 -8px 32px color-mix(in srgb, var(--theme-primary), transparent 90%);
         }

         .color-scheme .tab.active {
             color: color-mix(in srgb, var(--theme-primary), black 10%);
             background: color-mix(in srgb, var(--theme-primary), transparent 92%);
             border-color: color-mix(in srgb, var(--theme-primary), white 30%);
         }

         .color-scheme .tab:hover:not(.active) {
             color: color-mix(in srgb, var(--theme-primary), black 15%);
             background: color-mix(in srgb, var(--theme-primary), transparent 96%);
             border-color: color-mix(in srgb, var(--theme-primary), transparent 80%);
         }

        @media (max-width: 768px) {
            .header-wrapper {
                padding: 0 0.75rem;
            }
            
            .header-content {
                gap: 0.5rem;
            }

            .logo {
                flex: 1;
            }

            .logo-text-only {
                text-align: left !important;
                align-items: flex-start !important;
            }

            .brand-name.logo-style-modern {
                font-size: 1.4rem !important;
                text-align: left !important;
            }

            .brand-tagline {
                font-size: 0.7rem !important;
                text-align: left !important;
            }

            .top-nav {
                gap: 0.25rem;
                flex-shrink: 0;
            }

            .nav-link {
                padding: 0.375rem 0.5rem;
                font-size: 0.8rem;
                min-width: auto;
            }

            .nav-link span {
                display: none;
            }

            .nav-link i {
                font-size: 1rem;
            }

            .logo {
                gap: 0.75rem;
                justify-content: center;
                text-align: center;
                width: 100%;
                margin: 0 auto;
                display: flex;
                align-items: center;
                flex-direction: column;
            }

            .logo-text-only {
                text-align: center;
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .brand-name {
                font-size: 1.6rem !important;
                text-align: center !important;
                width: 100%;
                display: block;
            }

            .brand-name.logo-style-modern {
                font-size: 1.6rem !important;
                text-align: center !important;
                letter-spacing: -0.02em;
                margin: 0 auto;
                width: 100%;
            }

            .brand-tagline {
                font-size: 0.8rem !important;
                text-align: center !important;
                width: 100%;
                display: block;
                margin: 0 auto;
                margin-top: 0.25rem;
            }

            .brand-text {
                align-items: center;
                text-align: center;
            }

            .stats {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .accessibility-toggle {
                padding: 0.5rem;
                font-size: 0.75rem;
            }

            .accessibility-toggle span {
                display: none;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .items-grid {
                grid-template-columns: 1fr;
            }

                         .bottom-tabs {
                 padding: 0.25rem;
             }

             .tab {
                 min-width: 60px;
                 max-width: 80px;
                 padding: 0.5rem 0.25rem;
             }

             .tab span {
                 font-size: 0.65rem;
             }

             .tab i {
                 font-size: 1.1rem;
             }

            .photo-options {
                grid-template-columns: 1fr;
            }

            .camera-preview {
                height: 250px;
            }

            .camera-controls {
                flex-direction: column;
            }

            .metrics-row {
                grid-template-columns: 1fr;
            }

            .metric-card {
                padding: 1rem;
            }


            .dashboard-grid {
                gap: 1rem;
            }
        }

        /* iPhone and small mobile devices */
        @media (max-width: 480px) {
            .header-wrapper {
                padding: 0 0.5rem;
            }

            .brand-name.logo-style-modern {
                font-size: 1.2rem !important;
                text-align: left !important;
            }

            .brand-tagline {
                font-size: 0.65rem !important;
                text-align: left !important;
            }

            .nav-link {
                padding: 0.25rem 0.375rem;
                font-size: 0.75rem;
            }

            .nav-link i {
                font-size: 0.9rem;
            }

            .top-nav {
                gap: 0.125rem;
            }
        }

    </style>
</head>
<body x-data="resaleApp()">
    <!-- Tiled Background Overlay -->
    <div x-show="settings.tiledBackground && settings.tileImage" class="tiled-background-overlay" :style="getTiledBackgroundStyle()"></div>
    <header class="header">
        <div class="header-wrapper">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-text-only">
                        <div class="brand-name logo-style-modern">RACKS</div>
                        <div class="brand-tagline">Re-envision Your Retail</div>
                    </div>
                </div>
                <nav class="top-nav" role="navigation" aria-label="Main navigation">
                    <button @click="activeTab = 'about'; saveActiveTab()" class="nav-link" :class="{ active: activeTab === 'about' }" aria-label="About Us" :aria-pressed="activeTab === 'about'">
                        <i class="fas fa-info-circle" aria-hidden="true"></i>
                        <span>About Us</span>
                    </button>
                    <button @click="activeTab = 'contact'; saveActiveTab()" class="nav-link" :class="{ active: activeTab === 'contact' }" aria-label="Contact" :aria-pressed="activeTab === 'contact'">
                        <i class="fas fa-envelope" aria-hidden="true"></i>
                        <span>Contact</span>
                    </button>
                    <button @click="activeTab = 'signin'; saveActiveTab()" class="nav-link signin-btn" :class="{ active: activeTab === 'signin' }" aria-label="Sign In" :aria-pressed="activeTab === 'signin'">
                        <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                        <span>Sign In</span>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Fixed Filter Bar -->
    <div x-show="activeTab === 'inventory'" class="filter-bar" x-transition>
        <div class="filter-bar-content">
            <div class="filter-controls">
                <button @click="bulkSelection.enabled = !bulkSelection.enabled; toggleBulkMode()" class="bulk-toggle-btn" :class="{ 'active': bulkSelection.enabled }">
                    <i class="fas fa-check-square"></i>
                    <span x-text="bulkSelection.enabled ? 'Exit Bulk' : 'Bulk Select'"></span>
                    <span x-show="bulkSelection.enabled && bulkSelection.selectedItems.length > 0" class="bulk-badge" x-text="bulkSelection.selectedItems.length"></span>
                </button>
                
                <button @click="filtersExpanded = !filtersExpanded" class="filter-toggle-btn">
                    <i class="fas fa-filter"></i>
                    <span>Filters</span>
                    <span x-show="filteredInventoryItems.length !== inventoryItems.length" class="filter-badge" x-text="filteredInventoryItems.length + '/' + inventoryItems.length"></span>
                </button>
                
                <div class="quick-filters">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" x-model="filters.searchText" @input="applyFilters()" placeholder="Search all items..." class="main-search">
                        <button x-show="filters.searchText" @click="filters.searchText = ''; applyFilters()" class="clear-search-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <button @click="clearFilters()" x-show="hasActiveFilters" class="clear-filters-btn">
                        <i class="fas fa-times"></i>
                        Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sold Items Filter Bar -->
    <div x-show="activeTab === 'sold'" class="filter-bar" x-transition>
        <div class="filter-bar-content">
            <div class="filter-controls">
                <button @click="bulkSelection.enabled = !bulkSelection.enabled; toggleBulkMode()" class="bulk-toggle-btn" :class="{ 'active': bulkSelection.enabled }">
                    <i class="fas fa-check-square"></i>
                    <span x-text="bulkSelection.enabled ? 'Exit Bulk' : 'Bulk Select'"></span>
                    <span x-show="bulkSelection.enabled && bulkSelection.selectedItems.length > 0" class="bulk-badge" x-text="bulkSelection.selectedItems.length"></span>
                </button>
                
                <button @click="soldFiltersExpanded = !soldFiltersExpanded" class="filter-toggle-btn">
                    <i class="fas fa-filter"></i>
                    <span>Filters</span>
                    <span x-show="filteredSoldItems.length !== soldItems.length" class="filter-badge" x-text="filteredSoldItems.length + '/' + soldItems.length"></span>
                </button>
                
                <div class="quick-filters">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" x-model="soldFilters.searchText" @input="applySoldFilters()" placeholder="Search sold items..." class="main-search">
                        <button x-show="soldFilters.searchText" @click="soldFilters.searchText = ''; applySoldFilters()" class="clear-search-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <button @click="clearSoldFilters()" x-show="hasActiveSoldFilters" class="clear-filters-btn">
                        <i class="fas fa-times"></i>
                        Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Actions Panel -->
    <div x-show="bulkSelection.enabled && bulkSelection.selectedItems.length > 0" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="transform translateY(100%)"
         x-transition:enter-end="transform translateY(0)"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="transform translateY(0)"
         x-transition:leave-end="transform translateY(100%)"
         class="bulk-actions-panel">
        <div class="bulk-actions-content">
            <div class="bulk-info">
                <span x-text="bulkSelection.selectedItems.length + ' item(s) selected'"></span>
            </div>
            <div class="bulk-actions-buttons">
                <button @click="selectAllInventory()" x-show="activeTab === 'inventory'" class="btn btn-secondary btn-small">
                    <i class="fas fa-check-square"></i>
                    <span x-text="bulkSelection.selectAll ? 'Deselect All' : 'Select All'"></span>
                </button>
                <button @click="selectAllSold()" x-show="activeTab === 'sold'" class="btn btn-secondary btn-small">
                    <i class="fas fa-check-square"></i>
                    <span x-text="bulkSelection.selectAll ? 'Deselect All' : 'Select All'"></span>
                </button>
                <button @click="bulkEditItems()" x-show="activeTab === 'inventory'" :disabled="bulkSelection.selectedItems.length === 0" class="btn btn-primary btn-small">
                    <i class="fas fa-edit"></i>
                    Edit
                </button>
                <button @click="bulkEditSoldItems()" x-show="activeTab === 'sold'" :disabled="bulkSelection.selectedItems.length === 0" class="btn btn-primary btn-small">
                    <i class="fas fa-edit"></i>
                    Edit
                </button>
                <button @click="bulkMoveToInventory()" x-show="activeTab === 'sold'" :disabled="bulkSelection.selectedItems.length === 0" class="btn btn-warning btn-small">
                    <i class="fas fa-undo"></i>
                    Move to Inventory
                </button>
                <button @click="bulkMoveToSold()" x-show="activeTab === 'inventory'" :disabled="bulkSelection.selectedItems.length === 0" class="btn btn-success btn-small">
                    <i class="fas fa-dollar-sign"></i>
                    Move to Sold
                </button>
                <button @click="bulkDeleteItems()" :disabled="bulkSelection.selectedItems.length === 0" class="btn btn-danger btn-small">
                    <i class="fas fa-trash"></i>
                    Delete
                </button>
            </div>
        </div>
    </div>

    <div class="container">

        <!-- Till Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'till' }">
            <div class="till-container">
                <div class="till-header-wrapper">
                    <div class="till-header">
                        <h2><i class="fas fa-cash-register"></i> Payment Till</h2>
                        <p>Set up your electronic payment methods for easy customer transactions</p>
                    </div>
                </div>

                <!-- Payment Methods Display -->
                <div x-show="paymentMethods.length === 0" class="empty-state">
                    <i class="fas fa-qrcode"></i>
                    <h3>No payment methods added</h3>
                    <p>Add your first electronic payment method below to get started</p>
                </div>

                <div x-show="paymentMethods.length > 0" class="card">
                    <h3><i class="fas fa-credit-card"></i> Your Payment Methods</h3>
                    <div class="payment-methods-grid">
                        <template x-for="method in paymentMethods" :key="method.id">
                            <div class="payment-method-card">
                                <div class="payment-header">
                                    <h4 x-text="method.name"></h4>
                                    <button @click="removePaymentMethod(method.id)" class="btn btn-danger btn-small">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                
                                <div class="qr-code-container">
                                    <img :src="method.qrUrl" 
                                         :alt="method.name + ' QR Code'" 
                                         class="qr-code-image"
                                         @error="handleQRError($event, method)">
                                    <div x-show="method.error" class="qr-error">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <p>Failed to load QR code</p>
                                        <small>Please check the URL</small>
                                    </div>
                                </div>
                                
                                <div class="payment-actions">
                                    <button @click="copyPaymentInfo(method)" class="btn btn-secondary btn-small">
                                        <i class="fas fa-copy"></i> Copy Info
                                    </button>
                                    <button @click="showPaymentFullscreen(method)" class="btn btn-primary btn-small">
                                        <i class="fas fa-expand"></i> Full Screen
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Add Payment Method Form -->
                <div class="card">
                    <h3><i class="fas fa-plus-circle"></i> Add Payment Method</h3>
                    <form @submit.prevent="addPaymentMethod()">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paymentName">Payment Method Name</label>
                                <input type="text" 
                                       id="paymentName" 
                                       x-model="newPaymentMethod.name" 
                                       placeholder="e.g., Venmo, PayPal, CashApp, Zelle"
                                       required>
                            </div>
                            <div class="form-group">
                                <label for="paymentQR">Payment Method QR Code</label>
                                
                                <!-- QR Code Upload Options -->
                                <div class="qr-upload-options">
                                    <div class="photo-options">
                                        <!-- Upload QR Photo -->
                                        <div class="photo-upload qr-photo-upload" @click="$refs.qrPhotoInput.click()">
                                            <i class="fas fa-camera" style="color: #10b981;"></i>
                                            <span>Upload QR Photo</span>
                                            <small>Take or select QR image</small>
                                        </div>
                                        
                                        <!-- Or Enter URL -->
                                        <div class="photo-upload qr-url-option" @click="showQrUrlInput = !showQrUrlInput">
                                            <i class="fas fa-link" style="color: #3b82f6;"></i>
                                            <span>Enter Payment URL</span>
                                            <small>Venmo, PayPal, CashApp, etc.</small>
                                        </div>
                                    </div>
                                    
                                    <!-- Hidden file input -->
                                    <input type="file" 
                                           x-ref="qrPhotoInput" 
                                           @change="handleQrPhotoUpload($event)"
                                           accept="image/*" 
                                           style="display: none;">
                                    
                                    <!-- URL Input (toggleable) -->
                                    <div x-show="showQrUrlInput" x-transition class="qr-url-input" style="margin-top: 1rem;">
                                <input type="url" 
                                       x-model="newPaymentMethod.qrUrl" 
                                       placeholder="https://venmo.com/your-username or https://paypal.me/username"
                                               style="width: 100%;">
                                <small class="help-text">
                                    <i class="fas fa-info-circle"></i>
                                            Paste your payment URL (Venmo, PayPal, CashApp, etc.) or a direct QR code image URL. QR codes will be generated automatically!
                                </small>
                                    </div>
                                    
                                    <!-- QR Preview -->
                                    <div x-show="newPaymentMethod.qrUrl" x-transition class="qr-preview" style="margin-top: 1rem;">
                                        <div style="text-align: center;">
                                            <p style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #6b7280;">
                                                <i class="fas fa-eye"></i> QR Code Preview:
                                            </p>
                                            <img :src="isImageUrl(newPaymentMethod.qrUrl) ? newPaymentMethod.qrUrl : generateQRCodeUrl(newPaymentMethod.qrUrl)" 
                                             alt="QR Code Preview" 
                                                 style="max-width: 200px; max-height: 200px; border-radius: 12px; border: 2px solid #e5e7eb;"
                                                 @error="$event.target.style.display='none'; $event.target.nextElementSibling.style.display='block';">
                                            <div style="display: none; padding: 1rem; background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px; color: #dc2626;">
                                                <i class="fas fa-exclamation-triangle"></i>
                                                <p style="margin: 0;">Unable to generate QR code preview</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Payment Method
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Fullscreen QR Modal -->
        <div x-show="showQRModal" x-transition style="position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px;" @click.self="showQRModal = false">
            <div class="qr-modal-content" style="background: white; border-radius: 20px; padding: 2rem; text-align: center; max-width: 500px; width: 100%;">
                <div class="qr-modal-header" style="margin-bottom: 1.5rem;">
                    <h3 style="margin: 0 0 0.5rem 0;" x-text="selectedPaymentMethod ? selectedPaymentMethod.name : ''"></h3>
                    <p style="margin: 0; color: #6b7280;">Show this QR code to your customer</p>
                </div>
                
                <div class="qr-fullscreen-container" style="margin-bottom: 1.5rem;">
                    <img x-show="selectedPaymentMethod" 
                         :src="selectedPaymentMethod ? selectedPaymentMethod.qrUrl : ''" 
                         :alt="selectedPaymentMethod ? selectedPaymentMethod.name + ' QR Code' : ''" 
                         style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button @click="copyPaymentInfo(selectedPaymentMethod)" class="btn btn-secondary">
                        <i class="fas fa-copy"></i> Copy Info
                    </button>
                    <button @click="showQRModal = false" class="btn btn-primary">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'settings' }">
             <div class="dashboard-grid">
                 <!-- Pricing Settings -->
                 <div class="card">
                     <h3><i class="fas fa-tag"></i> Automatic Pricing</h3>
                     <div class="form-group">
                         <label class="toggle-label">
                             <input type="checkbox" x-model="settings.autoPricing" @change="saveSettings()">
                             <span class="toggle-switch"></span>
                             Enable Automatic Listing Price
                         </label>
                         <p class="help-text">Automatically calculate listing price based on purchase price</p>
                     </div>
                     
                     <div x-show="settings.autoPricing" class="pricing-settings">
                         <div class="form-group">
                             <label>Pricing Method</label>
                             <div class="pricing-method-switches">
                                 <div class="switch-group">
                                     <label class="toggle-label">
                                         <input type="checkbox" 
                                                :checked="settings.pricingMethod === 'percentage'" 
                                                @change="setPricingMethod('percentage')">
                                         <span class="toggle-switch"></span>
                                         Percentage markup
                                     </label>
                                     <p class="method-description">Calculate listing price as a percentage of purchase price (e.g., 200% = 3x price)</p>
                                 </div>
                                 
                                 <div class="switch-group">
                                     <label class="toggle-label">
                                         <input type="checkbox" 
                                                :checked="settings.pricingMethod === 'fixed'" 
                                                @change="setPricingMethod('fixed')">
                                         <span class="toggle-switch"></span>
                                         Fixed amount markup
                                     </label>
                                     <p class="method-description">Add a fixed dollar amount to the purchase price</p>
                                 </div>
                             </div>
                         </div>
                         
                         <div class="form-group">
                             <label x-text="settings.pricingMethod === 'percentage' ? 'Markup Percentage (%)' : 'Markup Amount ($)'"></label>
                             <input 
                                 type="number" 
                                 x-model="settings.markupValue" 
                                 @change="saveSettings()"
                                 :step="settings.pricingMethod === 'percentage' ? '1' : '0.01'" 
                                 :min="0"
                                 :placeholder="settings.pricingMethod === 'percentage' ? '200 (means 3x price)' : '5.00'"
                             >
                             <p class="help-text" x-show="settings.pricingMethod === 'percentage'">200% = 3x the purchase price (100% profit)</p>
                             <p class="help-text" x-show="settings.pricingMethod === 'fixed'">Add this fixed amount to the purchase price</p>
                         </div>
                     </div>
                 </div>

                 <!-- Display Settings -->
                 <div class="card">
                     <h3><i class="fas fa-eye"></i> Display & Accessibility</h3>
                     <div class="form-group">
                         <label class="toggle-label">
                             <input type="checkbox" x-model="settings.darkMode" @change="applyDarkMode(); saveSettings()">
                             <span class="toggle-switch"></span>
                             Dark Mode
                         </label>
                         <p class="help-text">Switch to a dark theme with reduced eye strain</p>
                     </div>
                     
                     
                     <div class="form-group">
                         <label class="toggle-label">
                             <input type="checkbox" x-model="settings.tiledBackground" @change="applyTiledBackground(); saveSettings()">
                             <span class="toggle-switch"></span>
                             Tiled Profile Background
                         </label>
                         <p class="help-text">Create a repeating pattern using your profile picture as background tiles</p>
                     </div>
                     
                                         <div class="form-group">
                        <label for="colorScheme">Color Theme</label>
                        <select id="colorScheme" x-model="settings.colorScheme" @change="applyColorScheme(); saveSettings()">
                                            <option value="pastel">Pastel Dreams (Rich Pink & Lavender)</option>
                <option value="rawr">rawr xd (Black & Red Vibes)</option>
                        </select>
                        <p class="help-text">Choose a preset color theme for your app</p>
                    </div>

                     
                     <div x-show="settings.tiledBackground" class="tiled-settings">
                         <div class="form-group">
                             <label for="tileSize">Tile Size</label>
                             <select id="tileSize" x-model="settings.tileSize" @change="applyTiledBackground(); saveSettings()">
                                 <option value="tiny">Tiny (25px)</option>
                                 <option value="small">Small (50px)</option>
                                 <option value="medium">Medium (100px)</option>
                                 <option value="large">Large (150px)</option>
                                 <option value="xlarge">Extra Large (200px)</option>
                                 <option value="jumbo">Jumbo (300px)</option>
                                 <option value="massive">Massive (400px)</option>
                             </select>
                         </div>
                         
                         <div class="form-group">
                             <label for="tileOpacity">Background Opacity</label>
                             <input type="range" id="tileOpacity" x-model="settings.tileOpacity" @change="applyTiledBackground(); saveSettings()" 
                                    min="0.1" max="1" step="0.1">
                             <div class="range-value" x-text="Math.round(settings.tileOpacity * 100) + '%'"></div>
                         </div>
                         
                         <div class="form-group">
                             <label>Upload Profile Picture for Tiles</label>
                             <input type="file" @change="handleTileImageUpload($event)" accept="image/*" class="file-input-styled">
                             <div x-show="settings.tileImage" class="tile-preview">
                                 <img :src="settings.tileImage" alt="Tile preview" class="tile-preview-img">
                                 <button @click="removeTileImage()" class="btn btn-danger btn-small">Remove</button>
                             </div>
                         </div>
                     </div>
                     
                     <div class="form-group">
                         <label class="toggle-label">
                             <input type="checkbox" x-model="settings.showProfitOnCards" @change="saveSettings()">
                             <span class="toggle-switch"></span>
                             Show Profit on Item Cards
                         </label>
                         <p class="help-text">Display calculated profit on inventory items</p>
                     </div>
                     
                     <div class="form-group">
                         <label class="toggle-label">
                             <input type="checkbox" x-model="settings.confirmDeletes" @change="saveSettings()">
                             <span class="toggle-switch"></span>
                             Confirm Item Deletions
                         </label>
                         <p class="help-text">Show confirmation dialog before deleting items</p>
                     </div>
                 </div>

                <!-- Inventory Alerts -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="margin: 0;"><i class="fas fa-exclamation-triangle"></i> Inventory Alerts</h3>
                        <button @click="showInventoryAlerts = !showInventoryAlerts" 
                                class="info-toggle-btn" 
                                :class="{ 'active': showInventoryAlerts }"
                                title="Show/Hide inventory alert settings">
                            <i class="fas" :class="showInventoryAlerts ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                        </button>
                    </div>
                    
                    <div x-show="showInventoryAlerts" 
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 transform scale-95"
                         x-transition:enter-end="opacity-100 transform scale-100"
                         x-transition:leave="transition ease-in duration-150"
                         x-transition:leave-start="opacity-100 transform scale-100"
                         x-transition:leave-end="opacity-0 transform scale-95">
                        
                        <div class="form-group">
                            <label class="toggle-label">
                                <input type="checkbox" x-model="settings.lowStockAlerts" @change="saveSettings()">
                                <span class="toggle-switch"></span>
                                Enable Low Stock Alerts
                            </label>
                            <p class="help-text">Get visual warnings when garment types fall below specified quantities</p>
                        </div>

                        <div x-show="settings.lowStockAlerts" class="alert-settings">
                        <div class="form-group">
                            <label for="lowStockThreshold">Default Low Stock Threshold</label>
                            <input 
                                type="number" 
                                id="lowStockThreshold"
                                x-model="settings.lowStockThreshold" 
                                @change="saveSettings()"
                                min="1" 
                                max="50"
                                placeholder="5"
                            >
                            <p class="help-text">Default threshold for new garment types</p>
                        </div>

                        <div class="form-group">
                            <label>Per Garment Type Thresholds</label>
                            <div class="garment-thresholds-list">
                                <template x-for="[type, stats] in Object.entries(garmentTypeStats)" :key="type">
                                    <div class="threshold-item">
                                        <span class="garment-type-name" x-text="type"></span>
                                        <input 
                                            type="number" 
                                            :value="settings.garmentThresholds?.[type] || settings.lowStockThreshold"
                                            @change="updateGarmentThreshold(type, $event.target.value)"
                                            min="1" 
                                            max="50"
                                            class="threshold-input"
                                        >
                                        <span class="current-stock" x-text="'(' + stats.inventory + ' in stock)'" :class="{ 'low-stock': stats.inventory <= (settings.garmentThresholds?.[type] || settings.lowStockThreshold) }"></span>
                                    </div>
                                </template>
                                <div x-show="Object.keys(garmentTypeStats).length === 0" class="no-garments-message">
                                    <i class="fas fa-info-circle"></i>
                                    Add items with garment types to configure individual thresholds
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="toggle-label">
                                <input type="checkbox" x-model="settings.alertOnDashboard" @change="saveSettings()">
                                <span class="toggle-switch"></span>
                                Show Alerts on Dashboard
                            </label>
                            <p class="help-text">Display low stock indicators in the garment analytics section</p>
                        </div>

                        <div class="form-group">
                            <label class="toggle-label">
                                <input type="checkbox" x-model="settings.alertInReports" @change="saveSettings()">
                                <span class="toggle-switch"></span>
                                Include in Reports
                            </label>
                            <p class="help-text">Add low stock warnings to garment analysis reports</p>
                        </div>
                        </div>
                    </div>
                </div>

                 <!-- Data Management -->
                 <div class="card">
                     <h3><i class="fas fa-database"></i> Data Management</h3>
                     <div class="form-group">
                         <button @click="exportData()" class="btn btn-secondary">
                             <i class="fas fa-download"></i> Export Data
                         </button>
                         <p class="help-text">Download your data as a backup</p>
                     </div>

                     <div class="form-group">
                         <input type="file" 
                                id="importFile" 
                                accept=".json"
                                @change="handleImportFile($event)"
                                style="display: none;"
                                x-ref="importFile">
                         <button @click="$refs.importFile.click()" class="btn btn-primary">
                             <i class="fas fa-upload"></i> Import Data
                         </button>
                         <p class="help-text">Upload a backup file to restore your data</p>
                     </div>
                     
                     <div class="form-group">
                         <button @click="clearAllData()" class="btn btn-danger">
                             <i class="fas fa-trash"></i> Clear All Data
                         </button>
                         <p class="help-text">âš ï¸ This will permanently delete all your items and settings</p>
                     </div>
                 </div>

             </div>
         </div>

         <!-- About Us Tab -->
         <div class="tab-content" :class="{ active: activeTab === 'about' }">
             <div class="about-page">
                 <div class="about-hero">
                     <h1><i class="fas fa-heart"></i> About Racks</h1>
                     <p class="about-subtitle">Re-envision Your Retail</p>
                 </div>
                 
                 <div class="about-content">
                     <div class="about-section">
                         <h2><i class="fas fa-lightbulb"></i> Our Story</h2>
                         <p>Racks was born from a simple idea: reselling should be organized, profitable, and stress-free. Whether you're flipping thrift finds, managing estate sale treasures, or building a full-scale resale business, we believe every piece deserves its place.</p>
                     </div>
                     
                     <div class="about-section">
                         <h2><i class="fas fa-target"></i> Our Mission</h2>
                         <p>We're here to help resellers of all sizes track their inventory with style and sophistication. From quick photo captures to profit analytics, Racks gives you the tools to turn your passion into profit.</p>
                     </div>
                     
                     <div class="about-features">
                         <h2><i class="fas fa-star"></i> What Makes Racks Special</h2>
                         <div class="features-grid">
                             <div class="feature-card">
                                 <i class="fas fa-camera"></i>
                                 <h3>Quick Capture</h3>
                                 <p>Snap photos instantly or upload from your gallery with our streamlined interface.</p>
                             </div>
                             <div class="feature-card">
                                 <i class="fas fa-chart-line"></i>
                                 <h3>Smart Analytics</h3>
                                 <p>Track profits, monitor trends, and make data-driven decisions for your business.</p>
                             </div>
                             <div class="feature-card">
                                 <i class="fas fa-palette"></i>
                                 <h3>Beautiful Design</h3>
                                 <p>Enjoy a sophisticated, customizable interface that makes work feel like pleasure.</p>
                             </div>
                             <div class="feature-card">
                                 <i class="fas fa-mobile-alt"></i>
                                 <h3>Mobile First</h3>
                                 <p>Designed for your phone because your business doesn't stop when you're on the go.</p>
                             </div>
                         </div>
                     </div>
                     
                     <div class="about-section">
                         <h2><i class="fas fa-users"></i> For Every Reseller</h2>
                         <p>From weekend thrifters to full-time entrepreneurs, Racks adapts to your workflow. Whether you're tracking a handful of items or managing hundreds, we've got the tools to keep you organized and profitable.</p>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Contact Us Tab -->
         <div class="tab-content" :class="{ active: activeTab === 'contact' }">
             <div class="contact-page">
                 <div class="contact-hero">
                     <h1><i class="fas fa-envelope"></i> Get in Touch</h1>
                     <p class="contact-subtitle">We'd love to hear from you</p>
                 </div>
                 
                 <div class="contact-content">
                     <div class="contact-section">
                         <h2><i class="fas fa-comments"></i> Support & Feedback</h2>
                         <p>Have questions about using Racks? Found a bug? Have an idea for a new feature? We're all ears! Your feedback helps us make Racks better for everyone.</p>
                     </div>
                     
                     <div class="contact-methods">
                         <div class="contact-method">
                             <i class="fas fa-envelope"></i>
                             <h3>Email Us</h3>
                             <p>support@racksapp.com</p>
                             <p class="contact-note">We typically respond within 24 hours</p>
                         </div>
                         
                         <div class="contact-method">
                             <i class="fas fa-bug"></i>
                             <h3>Report a Bug</h3>
                             <p>bugs@racksapp.com</p>
                             <p class="contact-note">Help us squash those pesky issues</p>
                         </div>
                         
                         <div class="contact-method">
                             <i class="fas fa-lightbulb"></i>
                             <h3>Feature Requests</h3>
                             <p>ideas@racksapp.com</p>
                             <p class="contact-note">Your ideas shape our roadmap</p>
                         </div>
                     </div>
                     
                     <div class="contact-section">
                         <h2><i class="fas fa-clock"></i> Response Times</h2>
                         <p>We pride ourselves on quick, helpful responses. Most support inquiries are answered within 24 hours, and we're constantly working to improve our response times.</p>
                     </div>
                     
                     <div class="contact-section">
                         <h2><i class="fas fa-heart"></i> Community</h2>
                         <p>Join our growing community of resellers! Share tips, showcase your finds, and connect with fellow entrepreneurs who understand the thrill of a great flip.</p>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Sign In Tab -->
         <div class="tab-content" :class="{ active: activeTab === 'signin' }">
             <div class="signin-page">
                 <div class="signin-hero">
                     <h1><i class="fas fa-sign-in-alt"></i> Sign In to Racks</h1>
                     <p class="signin-subtitle">Access your account and sync your data</p>
                 </div>
                 
                 <div class="signin-content">
                     <div class="signin-form">
                         <h2>Welcome Back</h2>
                         <form @submit.prevent="handleSignIn()">
                             <div class="form-group">
                                 <label for="email">Email Address</label>
                                 <input type="email" id="email" x-model="signInForm.email" required>
                             </div>
                             
                             <div class="form-group">
                                 <label for="password">Password</label>
                                 <input type="password" id="password" x-model="signInForm.password" required>
                             </div>
                             
                             <div class="form-group">
                                 <label class="checkbox-label">
                                     <input type="checkbox" x-model="signInForm.rememberMe">
                                     <span>Remember me</span>
                                 </label>
                             </div>
                             
                             <button type="submit" class="btn btn-primary btn-full">
                                 <i class="fas fa-sign-in-alt"></i>
                                 Sign In
                             </button>
                         </form>
                         
                         <div class="signin-links">
                             <a href="#" @click.prevent="showForgotPassword = true">Forgot your password?</a>
                             <a href="#" @click.prevent="showSignUp = true">Don't have an account? Sign up</a>
                         </div>
                     </div>
                     
                     <div class="signin-benefits">
                         <h3><i class="fas fa-cloud"></i> Why Sign In?</h3>
                         <ul>
                             <li><i class="fas fa-sync"></i> Sync your data across devices</li>
                             <li><i class="fas fa-shield-alt"></i> Secure cloud backup</li>
                             <li><i class="fas fa-chart-bar"></i> Advanced analytics</li>
                             <li><i class="fas fa-users"></i> Connect with other resellers</li>
                         </ul>
                         
                         <div class="local-storage-note">
                             <p><i class="fas fa-info-circle"></i> Currently using local storage. Your data is saved on this device only. Sign in to access your data anywhere!</p>
                         </div>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Dashboard Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'dashboard' }">
            <div class="dashboard-grid">

                <!-- Inventory Pipeline -->
                <div class="card">
                    <h3><i class="fas fa-stream"></i> Inventory Pipeline</h3>
                    <div class="inventory-pipeline">
                        <!-- Missing Info Stage -->
                        <div class="pipeline-stage" @click="showStatusItems('Missing Info')" :class="{ 'has-items': getItemsByStatus('Missing Info').length > 0 }">
                            <div class="stage-icon missing-info">
                                <i class="fas fa-exclamation-triangle"></i>
                                </div>
                            <div class="stage-content">
                                <div class="stage-title">Missing Info</div>
                                <div class="stage-count" x-text="getItemsByStatus('Missing Info').length">0</div>
                                <div class="stage-value" x-text="'$' + getItemsByStatus('Missing Info').reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2)">$0.00</div>
                                </div>
                            <div class="stage-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- Itemized Stage -->
                        <div class="pipeline-stage" @click="showStatusItems('Itemized')" :class="{ 'has-items': getItemsByStatus('Itemized').length > 0 }">
                            <div class="stage-icon itemized">
                                <i class="fas fa-clipboard-list"></i>
                                </div>
                            <div class="stage-content">
                                <div class="stage-title">Itemized</div>
                                <div class="stage-count" x-text="getItemsByStatus('Itemized').length">0</div>
                                <div class="stage-value" x-text="'$' + getItemsByStatus('Itemized').reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2)">$0.00</div>
                                </div>
                            <div class="stage-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- Sanitize Stage -->
                        <div class="pipeline-stage" @click="showStatusItems('Sanitize')" :class="{ 'has-items': getItemsByStatus('Sanitize').length > 0 }">
                            <div class="stage-icon sanitize">
                                <i class="fas fa-spray-can"></i>
                            </div>
                            <div class="stage-content">
                                <div class="stage-title">Sanitize</div>
                                <div class="stage-count" x-text="getItemsByStatus('Sanitize').length">0</div>
                                <div class="stage-value" x-text="'$' + getItemsByStatus('Sanitize').reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2)">$0.00</div>
                            </div>
                            <div class="stage-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- Racked Stage -->
                        <div class="pipeline-stage" @click="showStatusItems('Racked')" :class="{ 'has-items': getItemsByStatus('Racked').length > 0 }">
                            <div class="stage-icon racked">
                                <i class="fas fa-grip-horizontal"></i>
                                </div>
                            <div class="stage-content">
                                <div class="stage-title">Racked</div>
                                <div class="stage-count" x-text="getItemsByStatus('Racked').length">0</div>
                                <div class="stage-value" x-text="'$' + getItemsByStatus('Racked').reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2)">$0.00</div>
                                </div>
                            <div class="stage-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- Listed Stage -->
                        <div class="pipeline-stage" @click="showStatusItems('Listed')" :class="{ 'has-items': getItemsByStatus('Listed').length > 0 }">
                            <div class="stage-icon listed">
                                <i class="fas fa-tags"></i>
                                </div>
                            <div class="stage-content">
                                <div class="stage-title">Listed</div>
                                <div class="stage-count" x-text="getItemsByStatus('Listed').length">0</div>
                                <div class="stage-value" x-text="'$' + getItemsByStatus('Listed').reduce((sum, item) => sum + (item.listingPrice || 0), 0).toFixed(2)">$0.00</div>
                                </div>
                            <div class="stage-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- Sold Stage -->
                        <div class="pipeline-stage sold-stage" @click="showStatusItems('Sold')" :class="{ 'has-items': getItemsByStatus('Sold').length > 0 }">
                            <div class="stage-icon sold">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stage-content">
                                <div class="stage-title">Sold</div>
                                <div class="stage-count" x-text="getItemsByStatus('Sold').length">0</div>
                                <div class="stage-value profit" x-text="'$' + getItemsByStatus('Sold').reduce((sum, item) => sum + ((item.salePrice || item.listingPrice || 0) - (item.purchasePrice || 0)), 0).toFixed(2)">$0.00</div>
                            </div>
                        </div>
                    </div>

                </div>


                <!-- Garment Type Analytics -->
                <div class="card">
                    <h3><i class="fas fa-tshirt"></i> Garment Type Analytics</h3>
                    <p>Track your inventory composition and performance by garment type</p>
                    
                    <div x-show="Object.keys(garmentTypeStats).length === 0" class="empty-state-small">
                        <i class="fas fa-tshirt" style="font-size: 2rem; color: #d1d5db; margin-bottom: 1rem;"></i>
                        <p>No garment data yet. Add items with garment types to see analytics.</p>
                        <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 1rem; flex-wrap: wrap;">
                            <button @click="debugGarmentData()" class="btn btn-secondary btn-small">
                                ðŸ” Debug Data
                            </button>
                            <button @click="repairGarmentTypes()" class="btn btn-primary btn-small">
                                ðŸ”§ Repair Items
                            </button>
                        </div>
                        <p style="font-size: 0.8rem; color: #6b7280; margin-top: 0.5rem; text-align: center;">Debug: Check console | Repair: Fix missing garment types</p>
                    </div>

                    <div x-show="Object.keys(garmentTypeStats).length > 0">

                        <!-- Top 3 Best Sellers with Enhanced Info -->
                        <div class="best-sellers-section">
                            <div class="best-sellers-header">
                                <div class="best-sellers-content">
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                                        <h4 style="margin: 0; color: #92400e;">ðŸ† Top 3 Best Sellers</h4>
                                        <button @click="showPerformanceInfo = !showPerformanceInfo" 
                                                class="info-toggle-btn" 
                                                :class="{ 'active': showPerformanceInfo }"
                                                title="Learn about performance percentages">
                                            <i class="fas fa-info-circle"></i>
                                        </button>
                                    </div>
                                    
                                    <!-- Collapsible Performance Info -->
                                    <div x-show="showPerformanceInfo" 
                                         x-transition:enter="transition ease-out duration-200"
                                         x-transition:enter-start="opacity-0 transform scale-95"
                                         x-transition:enter-end="opacity-100 transform scale-100"
                                         x-transition:leave="transition ease-in duration-150"
                                         x-transition:leave-start="opacity-100 transform scale-100"
                                         x-transition:leave-end="opacity-0 transform scale-95"
                                         class="performance-info-panel">
                                        <div class="info-header">
                                            <i class="fas fa-chart-bar"></i>
                                            <strong>Performance Percentage Explained</strong>
                                        </div>
                                        <div class="info-content">
                                            <p><strong>Sell-Through Rate:</strong> Shows what percentage of each garment type you've successfully sold.</p>
                                            <div class="info-examples">
                                                <div class="info-example">
                                                    <span class="example-label">ðŸ“ˆ High (70%+):</span>
                                                    <span>Popular items that sell quickly</span>
                                                </div>
                                                <div class="info-example">
                                                    <span class="example-label">ðŸ“Š Medium (30-70%):</span>
                                                    <span>Steady sellers with room to grow</span>
                                                </div>
                                                <div class="info-example">
                                                    <span class="example-label">ðŸ“‰ Low (Under 30%):</span>
                                                    <span>May need pricing or strategy changes</span>
                                                </div>
                                            </div>
                                            <p class="info-tip">ðŸ’¡ <strong>Tip:</strong> Focus on stocking more of your high-performing garment types!</p>
                                        </div>
                                    </div>

                                    <div class="best-sellers-grid">
                                        <template x-for="(garment, index) in topGarmentTypes" :key="garment.type">
                                            <div class="best-seller-item" :class="'rank-' + (index + 1)">
                                                <div class="best-seller-emoji" x-text="getGarmentEmoji(garment.type)"></div>
                                                <div class="best-seller-info">
                                                    <div class="garment-type-name" x-text="garment.type"></div>
                                                    <div class="performance-stats">
                                                        <div class="sold-count" x-text="garment.sold + ' sold'"></div>
                                                        <div class="performance-percentage" 
                                                             x-text="getPerformancePercentage(garment) + '%'"
                                                             :class="getPerformanceClass(garment)"
                                                             :title="'Sell-through rate: ' + getPerformancePercentage(garment) + '% (' + garment.sold + ' of ' + garment.count + ' total items sold)'"></div>
                                                    </div>
                                                </div>
                                                <div class="rank-badge" x-text="index + 1"></div>
                                            </div>
                                        </template>
                                        <div x-show="topGarmentTypes.length === 0" class="no-data-message">
                                            <span>ðŸ“Š Add items to see your best sellers!</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modern Inventory Overview Cards -->
                        <div class="inventory-overview-container">
                            <div class="overview-header">
                                <h4><i class="fas fa-chart-pie"></i> Inventory Overview</h4>
                                <div class="overview-summary">
                                    <div class="summary-stat">
                                        <span class="stat-number" x-text="Object.values(garmentTypeStats).reduce((sum, data) => sum + data.inventory, 0)"></span>
                                        <span class="stat-label">In Stock</span>
                                    </div>
                                    <div class="summary-stat">
                                        <span class="stat-number" x-text="Object.values(garmentTypeStats).reduce((sum, data) => sum + data.sold, 0)"></span>
                                        <span class="stat-label">Sold</span>
                                    </div>
                                    <div class="summary-stat">
                                        <span class="stat-number" x-text="Object.keys(garmentTypeStats).length"></span>
                                        <span class="stat-label">Types</span>
                                    </div>
                                </div>
                            </div>

                            <div class="inventory-cards-grid">
                                <template x-for="[type, data] in Object.entries(garmentTypeStats).sort((a, b) => b[1].count - a[1].count)" :key="type">
                                    <div class="inventory-card" 
                                         :class="{
                                             'low-stock-card': settings.lowStockAlerts && data.inventory <= (settings.garmentThresholds?.[type] || settings.lowStockThreshold || 5),
                                             'expanded': expandedCards && expandedCards[type]
                                         }">
                                        
                                        <!-- Card Header -->
                                        <div class="card-header" @click="toggleCardExpansion(type)">
                                            <div class="card-title-section">
                                                <div class="garment-icon" x-text="getGarmentEmoji(type)"></div>
                                                <div class="card-title">
                                                    <h5 x-text="type"></h5>
                                                    <div class="quick-stats">
                                                        <span class="stock-indicator" x-text="`${data.inventory} available`"></span>
                                                        <span class="sold-indicator" x-text="`${data.sold} sold`"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="card-actions">
                                                <!-- Low Stock Warning -->
                                                <div x-show="settings.lowStockAlerts && data.inventory <= (settings.garmentThresholds?.[type] || settings.lowStockThreshold || 5)" 
                                                     class="stock-warning" title="Low Stock Alert!">
                                                    <i class="fas fa-exclamation-triangle"></i>
                                                </div>
                                                
                                                <!-- Performance Indicator -->
                                                <div class="performance-badge" 
                                                     :class="getPerformanceClass({ sold: data.sold, count: data.count })"
                                                     :title="`${getPerformancePercentage({ sold: data.sold, count: data.count })}% sell-through rate`">
                                                    <span x-text="`${getPerformancePercentage({ sold: data.sold, count: data.count })}%`"></span>
                                                </div>
                                                
                                                <!-- Expand Button -->
                                                <button class="expand-btn" :class="{ 'expanded': expandedCards && expandedCards[type] }">
                                                    <i class="fas fa-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Visual Progress Bar -->
                                        <div class="progress-section">
                                            <div class="progress-bar">
                                                <div class="progress-sold" 
                                                     :style="`width: ${data.count > 0 ? (data.sold / data.count) * 100 : 0}%`"></div>
                                                <div class="progress-stock" 
                                                     :style="`width: ${data.count > 0 ? (data.inventory / data.count) * 100 : 0}%`"></div>
                                            </div>
                                            <div class="progress-labels">
                                                <span class="sold-label">Sold</span>
                                                <span class="total-label" x-text="`${data.count} total`"></span>
                                                <span class="stock-label">In Stock</span>
                                            </div>
                                        </div>

                                        <!-- Expandable Details -->
                                        <div class="card-details" 
                                             x-show="expandedCards && expandedCards[type]"
                                             x-transition:enter="transition ease-out duration-200"
                                             x-transition:enter-start="opacity-0 max-h-0"
                                             x-transition:enter-end="opacity-100 max-h-96"
                                             x-transition:leave="transition ease-in duration-150"
                                             x-transition:leave-start="opacity-100 max-h-96"
                                             x-transition:leave-end="opacity-0 max-h-0">
                                            
                                            <div class="details-grid">
                                                <div class="detail-item">
                                                    <i class="fas fa-box"></i>
                                                    <div>
                                                        <strong>Total Investment</strong>
                                                        <span x-text="`$${data.totalInvestment?.toFixed(2) || '0.00'}`"></span>
                                                    </div>
                                                </div>
                                                
                                                <div class="detail-item">
                                                    <i class="fas fa-dollar-sign"></i>
                                                    <div>
                                                        <strong>Revenue Generated</strong>
                                                        <span x-text="`$${data.totalRevenue?.toFixed(2) || '0.00'}`"></span>
                                                    </div>
                                                </div>
                                                
                                                <div class="detail-item">
                                                    <i class="fas fa-chart-line"></i>
                                                    <div>
                                                        <strong>Profit Margin</strong>
                                                        <span x-text="data.totalRevenue && data.totalInvestment ? 
                                                            `${(((data.totalRevenue - data.totalInvestment) / data.totalInvestment) * 100).toFixed(1)}%` : 
                                                            '0%'"></span>
                                                    </div>
                                                </div>
                                                
                                                <div class="detail-item">
                                                    <i class="fas fa-shipping-fast"></i>
                                                    <div>
                                                        <strong>Turnover Rate</strong>
                                                        <span x-text="`${getPerformancePercentage({ sold: data.sold, count: data.count })}%`"></span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Action Buttons -->
                                            <div class="detail-actions">
                                                <button @click="showGarmentBarAlert(type, data)" class="detail-btn">
                                                    <i class="fas fa-info-circle"></i>
                                                    View Details
                                                </button>
                                                <button @click="filterByGarmentType(type)" class="detail-btn">
                                                    <i class="fas fa-filter"></i>
                                                    Filter Items
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Empty State -->
                                <div x-show="Object.keys(garmentTypeStats).length === 0" class="empty-inventory-state">
                                    <div class="empty-icon">
                                        <i class="fas fa-tshirt"></i>
                                    </div>
                                    <h5>No Inventory Yet</h5>
                                    <p>Start adding items to see your inventory overview</p>
                                    <button @click="activeTab = 'add'" class="btn btn-primary">
                                        <i class="fas fa-plus"></i>
                                        Add First Item
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->

                    
                <!-- Report Generation -->
                <div class="card">
                    <h3><i class="fas fa-file-alt"></i> Business Reports</h3>
                    <p>Generate comprehensive reports for your resale business</p>
                    
                    <div class="report-options">
                        <button @click="generateReport('inventory')" class="btn btn-success report-btn">
                            <i class="fas fa-boxes"></i>
                            <span>Inventory Report</span>
                            <small>Current stock status</small>
                        </button>
                        
                        <button @click="generateReport('garments')" class="btn btn-warning report-btn">
                            <i class="fas fa-tshirt"></i>
                            <span>Garment Analysis</span>
                            <small>Type breakdown & performance</small>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Item Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'add' }">
            <!-- Upload Options Grid -->
            <div class="upload-options-grid">
                <!-- Bulk Upload Option -->
                <div class="upload-option-card" :class="{ 'active': bulkUploadProgress.show }">
                    <div class="option-header">
                        <div class="option-icon bulk-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="option-content">
                            <h3>Bulk Upload</h3>
                            <p>Upload multiple items at once from your gallery</p>
                        </div>
                    </div>
                    
                <div class="bulk-upload-area">
                    <input type="file" 
                           id="bulkUpload" 
                           multiple 
                           accept="image/*" 
                           @change="handleBulkUpload($event)"
                           style="display: none;">
                    <label for="bulkUpload" class="bulk-upload-button">
                        <i class="fas fa-upload"></i>
                            <span>Select Photos</span>
                            <small>Choose multiple images</small>
                    </label>
                </div>
                
                <!-- Enhanced Bulk Upload Progress -->
                <div x-show="bulkUploadProgress.show" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100"
                     class="cute-bulk-progress">
                    
                    <!-- Progress Header with Icons -->
                    <div class="progress-header-enhanced">
                        <div class="progress-icon">
                            <span x-show="!bulkUploadProgress.completed" class="processing-icon">ðŸ“¸</span>
                            <span x-show="bulkUploadProgress.completed" class="completed-icon">ðŸŽ‰</span>
                        </div>
                        <div class="progress-text">
                            <h4>
                                <span x-show="!bulkUploadProgress.completed">Uploading Your Photos</span>
                                <span x-show="bulkUploadProgress.completed">All Photos Uploaded!</span>
                        </h4>
                            <div class="progress-counter">
                                <span class="current-count" x-text="bulkUploadProgress.current"></span>
                                <span class="divider">of</span>
                                <span class="total-count" x-text="bulkUploadProgress.total"></span>
                                <span class="label">photos processed</span>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Progress Bar -->
                    <div class="progress-bar-enhanced">
                        <div class="progress-track">
                            <div class="progress-fill" 
                                 :style="'width: ' + Math.min((bulkUploadProgress.current / bulkUploadProgress.total * 100), 100) + '%'"
                                 :class="{ 'completed': bulkUploadProgress.completed }"></div>
                        </div>
                        <div class="progress-stats">
                            <span class="percentage" x-text="Math.round((bulkUploadProgress.current / bulkUploadProgress.total) * 100) + '%'"></span>
                            <span x-show="bulkUploadProgress.estimatedTimeRemaining && !bulkUploadProgress.completed" 
                                  class="time-remaining" 
                                  x-text="bulkUploadProgress.estimatedTimeRemaining + ' left'"></span>
                        </div>
                    </div>

                    <!-- Success Message -->
                    <div x-show="bulkUploadProgress.completed" 
                         x-transition:enter="transition ease-out duration-500 delay-200"
                         x-transition:enter-start="opacity-0 transform translate-y-2"
                         x-transition:enter-end="opacity-100 transform translate-y-0"
                         class="success-message-enhanced">
                        <div class="success-content">
                            <i class="fas fa-check-circle success-icon"></i>
                            <div class="success-text">
                                <strong>Perfect!</strong> 
                                <span x-text="bulkUploadProgress.total"></span> 
                                <span x-text="bulkUploadProgress.total === 1 ? 'photo' : 'photos'"></span> 
                                ready to sell! âœ¨
                    </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Single Item Upload Option -->
                <div class="upload-option-card single-item-card">
                    <div class="option-header">
                        <div class="option-icon single-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="option-content">
                            <h3>Single Item</h3>
                            <p>Add one item with detailed information</p>
                        </div>
            </div>

                    <form @submit.prevent="addItem()" class="single-item-form">
                    <div class="form-group">
                        <label>Item Photos (up to 5)</label>
                        <div class="photo-options" x-show="newItem.photos.length < 5">
                            <div class="photo-upload" @click="$refs.photoInput.click()">
                                <input type="file" x-ref="photoInput" accept="image/*" @change="handlePhotoUpload($event)" style="display: none;">
                                <div x-show="!showCamera">
                                    <i class="fas fa-upload" style="font-size: 1.5rem; color: #db2777; margin-bottom: 0.5rem;"></i>
                                    <p>Upload from device</p>
                                </div>
                            </div>
                            <div class="camera-option" @click="toggleCamera()">
                                <i class="fas fa-camera" style="font-size: 1.5rem; color: #db2777; margin-bottom: 0.5rem;"></i>
                                <p x-text="showCamera ? 'Close Camera' : 'Take Photo'"></p>
                            </div>
                        </div>
                        
                        <!-- Camera Interface -->
                        <div x-show="showCamera" class="camera-interface">
                            <video x-ref="video" autoplay playsinline class="camera-preview"></video>
                            <canvas x-ref="canvas" style="display: none;"></canvas>
                            <div class="camera-controls">
                                <button type="button" @click="capturePhoto()" class="btn btn-success">
                                    <i class="fas fa-camera"></i> Capture
                                </button>
                                <button type="button" @click="toggleCamera()" class="btn btn-secondary">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>

                        <!-- Photos Gallery -->
                        <div x-show="newItem.photos.length > 0" class="photos-gallery">
                            <template x-for="(photo, index) in newItem.photos" :key="index">
                                <div class="photo-item">
                                    <img :src="photo" class="photo-thumbnail" alt="Item photo">
                                    <button type="button" @click="removePhoto(index)" class="remove-photo-btn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <div x-show="index === 0" class="primary-photo-badge">Primary</div>
                                </div>
                            </template>
                        </div>
                        
                        <div x-show="newItem.photos.length >= 5" class="photo-limit-message">
                            <i class="fas fa-info-circle"></i> Maximum of 5 photos reached
                        </div>
                    </div>

                        <div class="form-section">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h4><i class="fas fa-tshirt"></i> Item Classification</h4>
                                <button type="button" 
                                        @click="detectPriceFromPhoto()" 
                                        class="btn btn-secondary btn-small price-detect-btn"
                                        :disabled="!newItem.photos.length || ocrProcessing"
                                        x-show="newItem.photos.length > 0"
                                        title="AI Scan for price and garment type">
                                    <i class="fas fa-robot" x-show="!ocrProcessing"></i>
                                    <i class="fas fa-spinner fa-spin" x-show="ocrProcessing"></i>
                                    <span x-show="!ocrProcessing">AI Scan</span>
                                    <span x-show="ocrProcessing">Scanning...</span>
                                </button>
                            </div>
                            <div class="form-group">
                                <label for="garmentType">Garment Type *</label>
                                <select id="garmentType" x-model="newItem.garmentType" required class="form-select">
                                    <option value="">Select garment type...</option>
                                    <option value="Shirt">ðŸ‘” Shirt</option>
                                    <option value="Skirt">ðŸ‘— Skirt</option>
                                    <option value="Shorts">ðŸ©³ Shorts</option>
                                    <option value="Pants">ðŸ‘– Pants</option>
                                    <option value="Dress">ðŸ‘— Dress</option>
                                    <option value="Bag">ðŸ‘œ Bag</option>
                                    <option value="Belt">ðŸ‘œ Belt</option>
                                    <option value="Shoes">ðŸ‘  Shoes</option>
                                    <option value="Jacket">ðŸ§¥ Jacket</option>
                                    <option value="Sweater">ðŸ§¥ Sweater</option>
                                    <option value="Accessories">âœ¨ Accessories</option>
                                    <option value="Other">ðŸ“¦ Other</option>
                                </select>
                                <small class="help-text">
                                    <i class="fas fa-info-circle"></i>
                                    Required for inventory tracking and analytics
                                </small>
                            </div>
                        </div>

                        <div class="form-section">
                            <h4><i class="fas fa-dollar-sign"></i> Pricing Information</h4>
                    <div class="form-row">
                 <div class="form-group">
                     <label for="purchasePrice">Purchase Price ($)</label>
                                        <input type="number" id="purchasePrice" x-model="newItem.purchasePrice" step="0.01" min="0" required class="form-input">
                     <div x-show="ocrResults && (ocrResults.suggestedPrice || ocrResults.garmentType)" class="ocr-suggestion">
                         <div x-show="ocrResults.suggestedPrice" class="suggestion-text">
                             <i class="fas fa-lightbulb"></i>
                             Found price: <strong>$<span x-text="ocrResults.suggestedPrice"></span></strong>
                             <button type="button" @click="newItem.purchasePrice = ocrResults.suggestedPrice" class="btn-link">Use this price</button>
                         </div>
                         <div x-show="ocrResults.garmentType" class="suggestion-text" style="margin-top: 0.5rem;">
                             <i class="fas fa-tshirt"></i>
                             Detected type: <strong x-text="ocrResults.garmentType"></strong>
                             <button type="button" @click="newItem.garmentType = ocrResults.garmentType" class="btn-link">Use this type</button>
                         </div>
                     </div>
                     <div x-show="ocrResults && ocrResults.prices && ocrResults.prices.length > 1" class="multiple-prices">
                         <p class="suggestion-text">Other prices found:</p>
                         <div class="price-options">
                             <template x-for="price in (ocrResults?.prices || []).slice(1)" :key="price">
                                 <button type="button" @click="newItem.purchasePrice = price" class="price-option">
                                     $<span x-text="price"></span>
                                 </button>
                             </template>
                         </div>
                     </div>
                     <div x-show="ocrResults && ocrResults.error" class="ocr-error">
                         <p><i class="fas fa-exclamation-triangle"></i> <span x-text="ocrResults.error"></span></p>
                     </div>
                 </div>
                        <div class="form-group">
                            <label for="listingPrice">Listing Price ($)</label>
                            <input type="number" 
                                   id="listingPrice" 
                                   x-model="newItem.listingPrice" 
                                   step="0.01" 
                                   min="0" 
                                   required
                                   :disabled="newItem.useAutoPricing"
                                   :style="newItem.useAutoPricing ? 'background-color: #f3f4f6; cursor: not-allowed;' : ''"
                                   :placeholder="newItem.useAutoPricing ? 'Auto-calculated' : 'Required'">
                            <div class="pricing-option">
                                <label class="toggle-label">
                                    <input type="checkbox" x-model="newItem.useAutoPricing" @change="updateNewItemListingPrice()">
                                    <span class="toggle-switch"></span>
                                    Use automatic pricing
                                </label>
                            </div>
                            <div x-show="newItem.useAutoPricing" class="auto-price-info">
                                <small class="help-text">
                                    <i class="fas fa-info-circle"></i>
                                    Automatically calculated based on your settings
                                    <span x-text="settings.pricingMethod === 'percentage' ? 
                                        '(' + settings.markupValue + '% markup)' : 
                                        '($' + settings.markupValue + ' markup)'"></span>
                                </small>
                            </div>
                        </div>
                    </div>

                            </div>
                        </div>

                        <div class="form-section">
                            <h4><i class="fas fa-info-circle"></i> Item Details</h4>
                    <div class="form-group">
                                <label for="source">
                                    <i class="fas fa-store"></i> Source (optional)
                                </label>
                                <input type="text" id="source" x-model="newItem.source" placeholder="e.g., Thrift Store, Estate Sale, Garage Sale, Facebook Marketplace" class="form-input">
                    </div>

                    <div class="form-group">
                                <label for="description">
                                    <i class="fas fa-pen"></i> Description (optional)
                                </label>
                                <input type="text" id="description" x-model="newItem.description" placeholder="Brief description of the item" class="form-input">
                    </div>

                    <div class="form-group">
                                <label for="manualTags">
                                    <i class="fas fa-tags"></i> Custom Tags (optional)
                                </label>
                        <input type="text" 
                               id="manualTags" 
                               x-model="newItem.manualTags" 
                                       placeholder="vintage, designer, summer, etc."
                                       class="form-input tags-input">
                        <small class="help-text">
                                    <i class="fas fa-magic"></i>
                                    Add custom tags to organize your items. Auto-tags will be generated too!
                        </small>
                            </div>
                    </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-plus"></i> Add Item to Inventory
                    </button>
                        </div>
                </form>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'inventory' }">
            
            <!-- Filter Modal -->
            <div x-show="filtersExpanded" x-transition class="filter-modal" @click.away="filtersExpanded = false">
                <div class="filter-modal-content">
                    <div class="filter-modal-header">
                        <h3 :style="settings.darkMode ? 'color: #000000 !important;' : ''"><i class="fas fa-filter" :style="settings.darkMode ? 'color: #000000 !important;' : ''"></i> Filter Items</h3>
                        <button @click="filtersExpanded = false" class="close-btn" :style="settings.darkMode ? 'color: #000000 !important;' : ''">
                            <i class="fas fa-times" :style="settings.darkMode ? 'color: #000000 !important;' : ''"></i>
                        </button>
                    </div>
                    
                    <div class="filter-options">
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Status</label>
                            <select x-model="filters.status" @change="applyFilters()">
                                <option value="">All Statuses</option>
                                <option value="Missing Info">Missing Info</option>
                                <option value="Itemized">Itemized</option>
                                <option value="Sanitize">Sanitize</option>
                                <option value="Racked">Racked</option>
                                <option value="Listed">Listed</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Sort by Date</label>
                            <select x-model="filters.dateSort" @change="applyFilters()">
                                <option value="newest-first">Newest to Oldest</option>
                                <option value="oldest-first">Oldest to Newest</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Sort by Price</label>
                            <select x-model="filters.priceSort" @change="applyFilters()">
                                <option value="">No Sort</option>
                                <option value="high-to-low">Price: High to Low</option>
                                <option value="low-to-high">Price: Low to High</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Date Added</label>
                            <select x-model="filters.dateRange" @change="applyFilters()">
                                <option value="">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        
                        <!-- Custom Date Range -->
                        <div x-show="filters.dateRange === 'custom'" class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Custom Date Range</label>
                            <div class="date-inputs">
                                <input type="date" x-model="filters.customStartDate" @change="applyFilters()" placeholder="From">
                                <input type="date" x-model="filters.customEndDate" @change="applyFilters()" placeholder="To">
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <div class="returned-filter-switch">
                                <input type="checkbox" 
                                       id="showReturnedFilter" 
                                       x-model="filters.showReturned" 
                                       @change="applyFilters()">
                                <label for="showReturnedFilter">Show Only Returned Items</label>
                            </div>
                        </div>
                        
                        <div class="filter-actions">
                            <button @click="clearFilters()" class="btn-secondary">
                                <i class="fas fa-times"></i> Clear All
                            </button>
                            <button @click="filtersExpanded = false" class="btn-primary">
                                <i class="fas fa-check"></i> Apply
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filter Results Summary -->
                    <div x-show="filteredInventoryItems.length !== inventoryItems.length" class="filter-results">
                        <p>Showing <strong x-text="filteredInventoryItems.length"></strong> of <strong x-text="inventoryItems.length"></strong> items</p>
                    </div>
                </div>
            </div>

            <div x-show="inventoryItems.length === 0" class="empty-state">
                <i class="fas fa-box-open"></i>
                <h3>No items in inventory</h3>
                <p>Add your first item using the "Add Item" tab</p>
            </div>

            <div x-show="inventoryItems.length > 0 && filteredInventoryItems.length === 0" class="empty-state">
                <i class="fas fa-search"></i>
                <h3>No items match your filters</h3>
                <p>Try adjusting your filter criteria</p>
            </div>


            <div x-show="filteredInventoryItems.length > 0" class="items-grid">
                <template x-for="item in filteredInventoryItems" :key="item.id">
                    <div class="item-card" :class="{ 'bulk-selected': bulkSelection.selectedItems.includes(item.id) }">
                        <!-- Bulk Selection Checkbox -->
                        <div x-show="bulkSelection.enabled" class="bulk-checkbox" x-transition>
                            <label class="item-checkbox-label">
                                <input type="checkbox" 
                                       :value="item.id" 
                                       :checked="bulkSelection.selectedItems.includes(item.id)"
                                       @change="toggleItemSelection(item.id)">
                                <span class="item-checkmark"></span>
                            </label>
                        </div>
                        
                        <div class="item-image" x-data="{ currentPhoto: 0 }">
                            <div x-show="item.photos && item.photos.length > 0" class="photo-carousel">
                                <img :src="item.photos[currentPhoto]" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                                <div x-show="item.photos.length > 1" class="photo-nav">
                                    <button @click="currentPhoto = currentPhoto > 0 ? currentPhoto - 1 : item.photos.length - 1" class="photo-nav-btn prev">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <div class="photo-dots">
                                        <template x-for="(photo, index) in item.photos" :key="index">
                                            <button @click="currentPhoto = index" class="photo-dot" :class="{ active: currentPhoto === index }"></button>
                                        </template>
                                    </div>
                                    <button @click="currentPhoto = currentPhoto < item.photos.length - 1 ? currentPhoto + 1 : 0" class="photo-nav-btn next">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div x-show="(!item.photos || item.photos.length === 0) && item.photo" class="single-photo">
                                <img :src="item.photo" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                            </div>
                            <div x-show="(!item.photos || item.photos.length === 0) && !item.photo" class="no-photo">
                                <i class="fas fa-image"></i>
                            </div>
                        </div>
                        <div class="item-content">
                            <div class="item-header">
                                <div class="item-date">
                                    <i class="fas fa-calendar-plus"></i>
                                    <span>Added: </span><span x-text="new Date(item.dateAdded).toLocaleDateString()"></span>
                                </div>
                                <!-- Return indicator dot -->
                                <div x-show="item.returnedMemo" class="return-dot" :title="item.returnedMemo"></div>
                            </div>

                            <div class="item-prices">
                                <div>
                                    <span>Paid: </span>
                                    <span class="price" x-text="'$' + item.purchasePrice.toFixed(2)"></span>
                                </div>
                                <div x-show="item.listingPrice">
                                    <span>Listed: </span>
                                    <span class="price" x-text="'$' + item.listingPrice.toFixed(2)"></span>
                                </div>
                            </div>


                            <div class="status-actions">
                                <!-- Custom Status Dropdown -->
                                <div class="custom-status-dropdown" x-data="{ open: false }" :class="{ 'dropdown-open': open }" :style="open ? 'z-index: 999999 !important; position: relative !important;' : ''"
                                    <button @click="open = !open" class="status-dropdown-trigger" :class="'status-' + item.status.replace(/\s+/g, '-').toLowerCase()">
                                        <span class="status-badge" :class="'status-' + item.status.replace(/\s+/g, '-').toLowerCase()" x-text="item.status"></span>
                                        <i class="fas fa-chevron-down" :class="{ 'rotate-180': open }"></i>
                                    </button>
                                    
                                    <div x-show="open" @click.away="open = false" x-transition class="status-dropdown-menu">
                                        <div class="status-dropdown-options">
                                            <button x-show="item.status !== 'Missing Info'" @click="handleStatusChange(item, 'Missing Info'); open = false" class="status-option-simple">
                                                <span class="status-badge status-missing-info">Missing Info</span>
                                            </button>
                                            
                                            <button x-show="item.status !== 'Itemized'" @click="handleStatusChange(item, 'Itemized'); open = false" class="status-option-simple">
                                                <span class="status-badge status-itemized">Itemized</span>
                                            </button>
                                            
                                            <button x-show="item.status !== 'Sanitize'" @click="handleStatusChange(item, 'Sanitize'); open = false" class="status-option-simple">
                                                <span class="status-badge status-sanitize">Sanitize</span>
                                            </button>
                                            
                                            <button x-show="item.status !== 'Racked'" @click="handleStatusChange(item, 'Racked'); open = false" class="status-option-simple">
                                                    <span class="status-badge status-racked">Racked</span>
                                            </button>
                                            
                                            <button x-show="item.status !== 'Listed'" @click="handleStatusChange(item, 'Listed'); open = false" class="status-option-simple">
                                                <span class="status-badge status-listed">Listed</span>
                                            </button>
                                            
                                            <button x-show="item.status !== 'Sold'" @click="handleStatusChange(item, 'Sold'); open = false" class="status-option-simple">
                                                <span class="status-badge status-sold">Sold</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <button @click="openEditModal(item)" class="btn btn-secondary btn-small">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem(item.id)" class="btn btn-danger btn-small">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Sold Items Tab -->
        <div class="tab-content" :class="{ active: activeTab === 'sold' }">
            
            <!-- Sold Items Filter Modal -->
            <div x-show="soldFiltersExpanded" x-transition class="filter-modal" @click.away="soldFiltersExpanded = false">
                <div class="filter-modal-content">
                    <div class="filter-modal-header">
                        <h3 :style="settings.darkMode ? 'color: #000000 !important;' : ''"><i class="fas fa-filter" :style="settings.darkMode ? 'color: #000000 !important;' : ''"></i> Filter Sold Items</h3>
                        <button @click="soldFiltersExpanded = false" class="close-btn" :style="settings.darkMode ? 'color: #000000 !important;' : ''">
                            <i class="fas fa-times" :style="settings.darkMode ? 'color: #000000 !important;' : ''"></i>
                        </button>
                    </div>
                    
                    <div class="filter-options">
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Sort by Date</label>
                            <select x-model="soldFilters.dateSort" @change="applySoldFilters()">
                                <option value="newest-first">Newest to Oldest</option>
                                <option value="oldest-first">Oldest to First</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Sort by Price</label>
                            <select x-model="soldFilters.priceSort" @change="applySoldFilters()">
                                <option value="">No Sort</option>
                                <option value="low-to-high">Price: Low to High</option>
                                <option value="high-to-low">Price: High to Low</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Sort by Profit</label>
                            <select x-model="soldFilters.profitSort" @change="applySoldFilters()">
                                <option value="">No Sort</option>
                                <option value="low-to-high">Profit: Low to High</option>
                                <option value="high-to-low">Profit: High to Low</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Date Range</label>
                            <select x-model="soldFilters.dateRange" @change="applySoldFilters()">
                                <option value="">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="quarter">This Quarter</option>
                                <option value="year">This Year</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        
                        <!-- Custom Date Range -->
                        <div x-show="soldFilters.dateRange === 'custom'" class="filter-group">
                            <label :style="settings.darkMode ? 'color: #000000 !important;' : ''">Custom Date Range</label>
                            <div class="date-inputs">
                                <input type="date" x-model="soldFilters.customStartDate" @change="applySoldFilters()" placeholder="From">
                                <input type="date" x-model="soldFilters.customEndDate" @change="applySoldFilters()" placeholder="To">
                            </div>
                        </div>

                        <div class="filter-group">
                            <div class="returned-filter-switch">
                                <input type="checkbox" 
                                       id="showReturnedSoldFilter" 
                                       x-model="soldFilters.showReturned" 
                                       @change="applySoldFilters()">
                                <label for="showReturnedSoldFilter">Show Only Returned Items</label>
                        </div>
                    </div>
                        
                        <div class="filter-actions">
                            <button @click="clearSoldFilters()" class="btn-secondary">
                                <i class="fas fa-times"></i> Clear All
                            </button>
                            <button @click="soldFiltersExpanded = false" class="btn-primary">
                                <i class="fas fa-check"></i> Apply
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <div x-show="soldItems.length === 0" class="empty-state">
                <i class="fas fa-dollar-sign"></i>
                <h3>No sold items yet</h3>
                <p>Items marked as sold will appear here</p>
            </div>

            <div x-show="soldItems.length > 0 && filteredSoldItems.length === 0" class="empty-state">
                <i class="fas fa-search"></i>
                <h3>No sold items match your filters</h3>
                <p>Try adjusting your filter criteria</p>
            </div>


            <div x-show="filteredSoldItems.length > 0" class="items-grid">
                <template x-for="item in filteredSoldItems" :key="item.id">
                    <div class="item-card" :class="{ 'bulk-selected': bulkSelection.selectedItems.includes(item.id) }">
                        <!-- Bulk Selection Checkbox -->
                        <div x-show="bulkSelection.enabled" class="bulk-checkbox" x-transition>
                            <label class="item-checkbox-label">
                                <input type="checkbox" 
                                       :value="item.id" 
                                       :checked="bulkSelection.selectedItems.includes(item.id)"
                                       @change="toggleItemSelection(item.id)">
                                <span class="item-checkmark"></span>
                            </label>
                        </div>
                        
                        <div class="item-image" x-data="{ currentPhoto: 0 }">
                            <div x-show="item.photos && item.photos.length > 0" class="photo-carousel">
                                <img :src="item.photos[currentPhoto]" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                                <div x-show="item.photos.length > 1" class="photo-nav">
                                    <button @click="currentPhoto = currentPhoto > 0 ? currentPhoto - 1 : item.photos.length - 1" class="photo-nav-btn prev">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <div class="photo-dots">
                                        <template x-for="(photo, index) in item.photos" :key="index">
                                            <button @click="currentPhoto = index" class="photo-dot" :class="{ active: currentPhoto === index }"></button>
                                        </template>
                                    </div>
                                    <button @click="currentPhoto = currentPhoto < item.photos.length - 1 ? currentPhoto + 1 : 0" class="photo-nav-btn next">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div x-show="(!item.photos || item.photos.length === 0) && item.photo" class="single-photo">
                                <img :src="item.photo" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                            </div>
                            <i x-show="(!item.photos || item.photos.length === 0) && !item.photo" class="fas fa-image"></i>
                        </div>
                        <div class="item-content">
                            <div class="item-header">
                                <div class="item-date">
                                    <i class="fas fa-calendar-check"></i>
                                    <span>Sold: </span><span x-text="item.dateSold ? new Date(item.dateSold).toLocaleDateString() : 'N/A'"></span>
                                </div>
                                <!-- Return indicator dot -->
                                <div x-show="item.returnedMemo" class="return-dot" :title="item.returnedMemo"></div>
                            </div>

                            <div class="item-prices">
                                <div>
                                    <span>Paid: </span>
                                    <span class="price" x-text="'$' + item.purchasePrice.toFixed(2)"></span>
                                </div>
                                <div x-show="item.salePrice">
                                    <span>Sold: </span>
                                    <span class="price" x-text="'$' + item.salePrice.toFixed(2)"></span>
                                </div>
                            </div>

                            <div class="status-actions">
                                <!-- Custom Status Dropdown for Sold Items -->
                                <div class="custom-status-dropdown" x-data="{ open: false }" :class="{ 'dropdown-open': open }" :style="open ? 'z-index: 999999 !important; position: relative !important;' : ''"
                                    <button @click="open = !open" class="status-dropdown-trigger status-sold">
                                        <span class="status-badge status-sold">Sold</span>
                                        <i class="fas fa-chevron-down" :class="{ 'rotate-180': open }"></i>
                                    </button>
                                    
                                    <div x-show="open" @click.away="open = false" x-transition class="status-dropdown-menu">
                                        <div class="status-dropdown-options">
                                            <button @click="markAsReturned(item); open = false" class="status-option return-option">
                                                <div class="status-option-content">
                                                    <span class="status-badge return-badge">
                                                        <i class="fas fa-undo"></i> Mark as Returned
                                                    </span>
                                                    <small class="return-help">Move back to inventory with return memo</small>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <button @click="openEditModal(item)" class="btn btn-secondary btn-small">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem(item.id)" class="btn btn-danger btn-small">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>
         </div>

     <!-- Fixed Bottom Tabs -->
     <div class="bottom-tabs" role="tablist" aria-label="Main application tabs">
         <div class="tabs-container">
             <button class="tab" :class="{ active: activeTab === 'add' }" @click="activeTab = 'add'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'add'" aria-label="Add Item" tabindex="0">
                 <i class="fas fa-plus" aria-hidden="true"></i>
                 <span>Add Item</span>
             </button>
             <button class="tab" :class="{ active: activeTab === 'inventory' }" @click="activeTab = 'inventory'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'inventory'" aria-label="Inventory" tabindex="0">
                 <i class="fas fa-boxes" aria-hidden="true"></i>
                 <span>Inventory</span>
             </button>
             <button class="tab" :class="{ active: activeTab === 'sold' }" @click="activeTab = 'sold'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'sold'" aria-label="Sold Items" tabindex="0">
                 <i class="fas fa-dollar-sign" aria-hidden="true"></i>
                 <span>Sold Items</span>
             </button>
             <button class="tab" :class="{ active: activeTab === 'dashboard' }" @click="activeTab = 'dashboard'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'dashboard'" aria-label="Dashboard" tabindex="0">
                 <i class="fas fa-chart-line" aria-hidden="true"></i>
                 <span>Dashboard</span>
             </button>
             <button class="tab" :class="{ active: activeTab === 'till' }" @click="activeTab = 'till'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'till'" aria-label="Till" tabindex="0">
                 <i class="fas fa-cash-register" aria-hidden="true"></i>
                 <span>Till</span>
             </button>
             <button class="tab" :class="{ active: activeTab === 'settings' }" @click="activeTab = 'settings'; saveActiveTab()" role="tab" :aria-selected="activeTab === 'settings'" aria-label="Settings" tabindex="0">
                 <i class="fas fa-cog" aria-hidden="true"></i>
                 <span>Settings</span>
             </button>
         </div>
     </div>

     <!-- Listing Modal -->
    <div x-show="showListingModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showListingModal = false">
        <div class="card" style="width: 90%; max-width: 500px; margin: 0;">
            <h3>Mark as Racked</h3>
            <div class="form-group">
                <label>Listing Price ($)</label>
                <input type="number" x-model="listingPrice" step="0.01" min="0" :placeholder="selectedItem ? (selectedItem.purchasePrice * 3).toFixed(2) + ' (suggested)' : ''">
            </div>
            <div class="form-group">
                <label>Platform</label>
                <select x-model="listingPlatform">
                    <option value="">Select platform</option>
                    <option value="Facebook Marketplace">Facebook Marketplace</option>
                    <option value="eBay">eBay</option>
                    <option value="Mercari">Mercari</option>
                    <option value="Poshmark">Poshmark</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button @click="confirmListing()" class="btn btn-success">Mark Racked</button>
                <button @click="showListingModal = false" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Status Items Gallery Modal -->
    <div x-show="showStatusModal" x-transition style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px;" @click.self="showStatusModal = false">
        <div class="modal-content" style="background: white; border-radius: 20px; max-width: 1200px; width: 100%; max-height: 85vh; overflow-y: auto;">
            <div class="modal-header" style="padding: 20px 24px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="status-modal-icon" :class="selectedStatus.toLowerCase().replace(' ', '-')">
                        <i x-show="selectedStatus === 'Missing Info'" class="fas fa-exclamation-triangle"></i>
                        <i x-show="selectedStatus === 'Itemized'" class="fas fa-clipboard-list"></i>
                        <i x-show="selectedStatus === 'Sanitize'" class="fas fa-spray-can"></i>
                        <i x-show="selectedStatus === 'Racked'" class="fas fa-grip-horizontal"></i>
                        <i x-show="selectedStatus === 'Listed'" class="fas fa-tags"></i>
                        <i x-show="selectedStatus === 'Sold'" class="fas fa-check-circle"></i>
                        <i x-show="selectedStatus === 'Top 3 Best Sellers'" class="fas fa-medal"></i>
                        <i x-show="selectedStatus === 'Returned'" class="fas fa-undo"></i>
                        <i x-show="!['Missing Info', 'Itemized', 'Sanitize', 'Racked', 'Listed', 'Sold', 'Top 3 Best Sellers', 'Returned'].includes(selectedStatus)" class="fas fa-tshirt"></i>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.3rem;" x-text="selectedStatus + ' Items'"></h3>
                        <div style="font-size: 0.9rem; color: #6b7280; margin-top: 2px;">
                            <span x-text="statusItems.length"></span> items â€¢ 
                            <span x-show="selectedStatus !== 'Sold'" x-text="'$' + statusItems.reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2) + ' invested'"></span>
                            <span x-show="selectedStatus === 'Listed'" x-text="' â€¢ $' + statusItems.reduce((sum, item) => sum + (item.listingPrice || 0), 0).toFixed(2) + ' potential'"></span>
                            <span x-show="selectedStatus === 'Sold'" x-text="'$' + statusItems.reduce((sum, item) => sum + ((item.salePrice || item.listingPrice || 0) - (item.purchasePrice || 0)), 0).toFixed(2) + ' profit'"></span>
                        </div>
                    </div>
                </div>
                <button @click="showStatusModal = false" class="close-btn" style="background: none; border: none; font-size: 1.2rem; color: #666; cursor: pointer; padding: 8px; border-radius: 50%;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" style="padding: 24px;">
                <!-- Status Modal Filters -->
                <div x-show="statusItems.length > 0" class="status-modal-filters" style="margin-bottom: 20px; padding: 16px; background: #f9fafb; border-radius: 8px; border: 1px solid #e5e7eb;">
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-filter" style="color: #6b7280;"></i>
                            <span style="font-weight: 600; color: #374151; font-size: 0.9rem;">Filters:</span>
                        </div>
                        
                        <input type="text" x-model="statusFilters.searchText" @input="applyStatusFilters()" placeholder="Search items..." 
                               style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem; width: 200px;">
                        
                        <select x-model="statusFilters.priceSort" @change="applyStatusFilters()" 
                                style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem;">
                            <option value="">Sort by Price</option>
                            <option value="low-to-high">Price: Low to High</option>
                            <option value="high-to-low">Price: High to Low</option>
                        </select>
                        
                        <select x-model="statusFilters.dateRange" @change="applyStatusFilters()" 
                                style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem;">
                            <option value="">All Dates</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                        
                        <button @click="clearStatusFilters()" x-show="hasActiveStatusFilters" 
                                style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 6px; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                            <i class="fas fa-times"></i>
                            Clear
                        </button>
                        
                        <div style="margin-left: auto; color: #6b7280; font-size: 0.875rem;">
                            <span x-text="filteredStatusItems.length"></span> of <span x-text="statusItems.length"></span> items
                        </div>
                    </div>
                </div>
                
                <div x-show="statusItems.length === 0" class="empty-state" style="text-align: center; padding: 40px 20px; color: #6b7280;">
                    <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <h4 style="margin: 0 0 0.5rem 0;">No items found</h4>
                    <p style="margin: 0;">No items with this status yet.</p>
                </div>
                
                <div x-show="filteredStatusItems.length === 0 && statusItems.length > 0" class="empty-state" style="text-align: center; padding: 40px 20px; color: #6b7280;">
                    <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <h4 style="margin: 0 0 0.5rem 0;">No items match your filters</h4>
                    <p style="margin: 0;">Try adjusting your filter criteria.</p>
                </div>
                
                <div x-show="filteredStatusItems.length > 0" class="status-items-gallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                    <template x-for="item in filteredStatusItems" :key="item.id">
                        <div class="gallery-item-card" style="border: 1px solid #e5e7eb; border-radius: 16px; overflow: hidden; background: white; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" @click="openItemDetail(item)" @mouseenter="$el.style.transform = 'translateY(-4px)'; $el.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)'" @mouseleave="$el.style.transform = 'translateY(0)'; $el.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)'">
                            <!-- Large Image Display -->
                            <div class="gallery-image" style="width: 100%; height: 160px; background: #f3f4f6; display: flex; align-items: center; justify-content: center; position: relative;">
                                <img x-show="item.photos && item.photos.length > 0" :src="item.photos[0]" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                                <img x-show="(!item.photos || item.photos.length === 0) && item.photo" :src="item.photo" style="width: 100%; height: 100%; object-fit: cover;" alt="Item">
                                <i x-show="(!item.photos || item.photos.length === 0) && !item.photo" class="fas fa-image" style="color: #9ca3af; font-size: 2rem;"></i>
                                
                                <!-- Photo Count Badge -->
                                <div x-show="item.photos && item.photos.length > 1" style="position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; display: flex; align-items: center; gap: 4px;">
                                    <i class="fas fa-images"></i>
                                    <span x-text="item.photos.length"></span>
                                </div>
                            </div>
                            
                            <div class="gallery-item-info" style="padding: 12px;">
                                <div class="item-title" style="font-weight: 600; font-size: 0.9rem; margin-bottom: 4px; color: #374151;" x-text="item.description || 'Untitled Item'"></div>
                                <div class="item-source-small" style="font-size: 0.75rem; color: #6b7280; margin-bottom: 8px;" x-text="formatSource(item.source)"></div>
                                
                                <div class="item-prices-small" style="display: flex; gap: 12px; font-size: 0.75rem;">
                                    <div>
                                        <span style="color: #6b7280;">Paid:</span>
                                        <span style="font-weight: 600;" x-text="'$' + item.purchasePrice.toFixed(2)"></span>
                                    </div>
                                    <div x-show="item.salePrice">
                                        <span style="color: #6b7280;">Sold:</span>
                                        <span style="font-weight: 600; color: #059669;" x-text="'$' + item.salePrice.toFixed(2)"></span>
                                    </div>
                                    <div x-show="item.listingPrice && !item.salePrice">
                                        <span style="color: #6b7280;">Listed:</span>
                                        <span style="font-weight: 600;" x-text="'$' + item.listingPrice.toFixed(2)"></span>
                                    </div>
                                </div>
                                
                                <div x-show="item.tags && item.tags.length > 0" class="item-tags-small" style="margin-top: 8px;">
                                    <template x-for="tag in (item.tags || []).slice(0, 3)" :key="tag">
                                        <span class="tag-small" style="background: #f1f5f9; color: #475569; padding: 2px 6px; border-radius: 8px; font-size: 0.65rem; margin-right: 4px; display: inline-block;" x-text="tag"></span>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <!-- Sale Modal -->
    <div x-show="showSaleModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showSaleModal = false">
        <div class="card" style="width: 90%; max-width: 500px; margin: 0;">
            <h3>Mark as Sold</h3>
            <div class="form-group">
                <label>Sale Price ($)</label>
                <input type="number" x-model="salePrice" step="0.01" min="0" :placeholder="selectedItem && selectedItem.listingPrice ? selectedItem.listingPrice.toFixed(2) + ' (listed price)' : ''">
            </div>
            <div class="form-group">
                <label>Platform</label>
                <select x-model="salePlatform">
                    <option value="">Select platform</option>
                    <option value="Facebook Marketplace">Facebook Marketplace</option>
                    <option value="eBay">eBay</option>
                    <option value="Mercari">Mercari</option>
                    <option value="Poshmark">Poshmark</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button @click="confirmSale()" class="btn btn-success">Mark Sold</button>
                <button @click="showSaleModal = false" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
         </div>

     <!-- Edit Item Modal -->
     <div x-show="showEditModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showEditModal = false">
         <div class="card" style="width: 95%; max-width: 600px; margin: 0; max-height: 90vh; overflow-y: auto;">
             <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                 <h3><i class="fas fa-edit"></i> Edit Item</h3>
                 <button @click="showEditModal = false" class="btn btn-secondary btn-small">
                     <i class="fas fa-times"></i>
                 </button>
             </div>

             <form @submit.prevent="saveItemEdits()">
                 <!-- Photos Section -->
                 <div class="form-group">
                     <label>Item Photos (up to 5)</label>
                     <div class="photo-options" x-show="editItem.photos.length < 5">
                         <div class="photo-upload" @click="$refs.editPhotoInput.click()">
                             <input type="file" x-ref="editPhotoInput" accept="image/*" @change="handleEditPhotoUpload($event)" style="display: none;">
                             <div x-show="!showEditCamera">
                                 <i class="fas fa-upload" style="font-size: 1.5rem; color: #db2777; margin-bottom: 0.5rem;"></i>
                                 <p>Upload from device</p>
                             </div>
                         </div>
                         <div class="camera-option" @click="toggleEditCamera()">
                             <i class="fas fa-camera" style="font-size: 1.5rem; color: #db2777; margin-bottom: 0.5rem;"></i>
                             <p x-text="showEditCamera ? 'Close Camera' : 'Take Photo'"></p>
                         </div>
                     </div>
                     
                     <!-- Camera Interface for Edit -->
                     <div x-show="showEditCamera" class="camera-interface">
                         <video x-ref="editVideo" autoplay playsinline class="camera-preview"></video>
                         <canvas x-ref="editCanvas" style="display: none;"></canvas>
                         <div class="camera-controls">
                             <button type="button" @click="captureEditPhoto()" class="btn btn-success">
                                 <i class="fas fa-camera"></i> Capture
                             </button>
                             <button type="button" @click="toggleEditCamera()" class="btn btn-secondary">
                                 <i class="fas fa-times"></i> Cancel
                             </button>
                         </div>
                     </div>

                     <!-- Photos Gallery for Edit -->
                     <div x-show="editItem.photos && editItem.photos.length > 0" class="photos-gallery">
                         <template x-for="(photo, index) in editItem.photos" :key="index">
                             <div class="photo-item">
                                 <img :src="photo" class="photo-thumbnail" alt="Item photo">
                                 <button type="button" @click="removeEditPhoto(index)" class="remove-photo-btn">
                                     <i class="fas fa-times"></i>
                                 </button>
                                 <div x-show="index === 0" class="primary-photo-badge">Primary</div>
                             </div>
                         </template>
                     </div>
                     
                     <div x-show="editItem.photos && editItem.photos.length >= 5" class="photo-limit-message">
                         <i class="fas fa-info-circle"></i> Maximum of 5 photos reached
                     </div>
                 </div>

                 <div class="form-group">
                     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                         <label for="editGarmentType">Garment Type *</label>
                         <button type="button" 
                                 @click="detectPriceFromEditPhoto()" 
                                 class="btn btn-secondary btn-small price-detect-btn"
                                 :disabled="!editItem.photos.length || ocrProcessing"
                                 x-show="editItem.photos.length > 0"
                                 title="AI Scan for price and garment type">
                             <i class="fas fa-robot" x-show="!ocrProcessing"></i>
                             <i class="fas fa-spinner fa-spin" x-show="ocrProcessing"></i>
                             <span x-show="!ocrProcessing">AI Scan</span>
                             <span x-show="ocrProcessing">Scanning...</span>
                         </button>
                     </div>
                     <select id="editGarmentType" x-model="editItem.garmentType" required>
                         <option value="">Select garment type...</option>
                         <option value="Shirt">Shirt</option>
                         <option value="Skirt">Skirt</option>
                         <option value="Shorts">Shorts</option>
                         <option value="Pants">Pants</option>
                         <option value="Dress">Dress</option>
                         <option value="Bag">Bag</option>
                         <option value="Belt">Belt</option>
                         <option value="Shoes">Shoes</option>
                         <option value="Jacket">Jacket</option>
                         <option value="Sweater">Sweater</option>
                         <option value="Accessories">Accessories</option>
                         <option value="Other">Other</option>
                     </select>
                     <small class="help-text">
                         <i class="fas fa-info-circle"></i>
                         Required field for tracking inventory by garment type
                     </small>
                     
                     <!-- OCR Results Display for Edit Modal -->
                     <div x-show="ocrResults && (ocrResults.suggestedPrice || ocrResults.garmentType)" class="ocr-suggestion">
                         <div x-show="ocrResults.suggestedPrice" class="suggestion-text">
                             <i class="fas fa-lightbulb"></i>
                             Found price: <strong>$<span x-text="ocrResults.suggestedPrice"></span></strong>
                             <button type="button" @click="editItem.purchasePrice = ocrResults.suggestedPrice" class="btn-link">Use this price</button>
                         </div>
                         <div x-show="ocrResults.garmentType" class="suggestion-text" style="margin-top: 0.5rem;">
                             <i class="fas fa-tshirt"></i>
                             Detected type: <strong x-text="ocrResults.garmentType"></strong>
                             <button type="button" @click="editItem.garmentType = ocrResults.garmentType" class="btn-link">Use this type</button>
                         </div>
                     </div>
                     <div x-show="ocrResults && ocrResults.prices && ocrResults.prices.length > 1" class="multiple-prices">
                         <p class="suggestion-text">Other prices found:</p>
                         <div class="price-options">
                             <template x-for="price in (ocrResults?.prices || []).slice(1)" :key="price">
                                 <button type="button" @click="editItem.purchasePrice = price" class="price-option">
                                     $<span x-text="price"></span>
                                 </button>
                             </template>
                         </div>
                     </div>
                     <div x-show="ocrResults && ocrResults.error" class="ocr-error">
                         <p><i class="fas fa-exclamation-triangle"></i> <span x-text="ocrResults.error"></span></p>
                     </div>
                 </div>

                 <!-- Price and Details -->
                 <div class="form-row">
                     <div class="form-group">
                         <label for="editPurchasePrice">Purchase Price ($)</label>
                         <input type="number" id="editPurchasePrice" x-model="editItem.purchasePrice" step="0.01" min="0" required>
                     </div>
                     <div class="form-group">
                         <label for="editListingPrice">Listing Price ($)</label>
                         <input type="number" 
                                id="editListingPrice" 
                                x-model="editItem.listingPrice" 
                                step="0.01" 
                                min="0" 
                                required
                                :disabled="editItem.useAutoPricing"
                                :style="editItem.useAutoPricing ? 'background-color: #f3f4f6; cursor: not-allowed;' : ''">
                         <div class="pricing-option">
                             <label class="toggle-label">
                                 <input type="checkbox" x-model="editItem.useAutoPricing" @change="updateEditListingPrice()">
                                 <span class="toggle-switch"></span>
                                 Use automatic pricing
                             </label>
                         </div>
                         <div x-show="editItem.useAutoPricing" class="auto-price-info">
                             <small class="help-text">
                                 <i class="fas fa-info-circle"></i>
                                 Automatically calculated based on your settings
                                 <span x-text="settings.pricingMethod === 'percentage' ? 
                                     '(' + settings.markupValue + '% markup)' : 
                                     '($' + settings.markupValue + ' markup)'"></span>
                             </small>
                         </div>
                     </div>
                 </div>

                 <div class="form-group">
                     <label for="editSource">Source (optional)</label>
                     <input type="text" id="editSource" x-model="editItem.source" placeholder="e.g., Thrift Store, Estate Sale, Garage Sale">
                 </div>

                 <div class="form-group">
                     <label for="editDescription">Description (optional)</label>
                     <input type="text" id="editDescription" x-model="editItem.description" placeholder="Brief description of the item">
                 </div>

                 <div class="form-group">
                     <label for="editManualTags">Custom Tags (optional)</label>
                     <input type="text" 
                            id="editManualTags" 
                            x-model="editItem.manualTags" 
                            placeholder="Enter tags separated by commas (e.g., vintage, designer, summer)"
                            class="tags-input">
                     <small class="help-text">
                         <i class="fas fa-info-circle"></i>
                         Add custom tags to help organize and search for this item. These will be combined with auto-generated tags.
                     </small>
                 </div>

                 <div class="form-group">
                     <label for="editStatus">Status</label>
                                         <select id="editStatus" x-model="editItem.status">
                        <option value="Missing Info">Missing Info</option>
                        <option value="Itemized">Itemized</option>
                        <option value="Sanitize">Sanitize</option>
                        <option value="Racked">Racked</option>
                        <option value="Listed">Listed</option>
                        <option value="Sold">Sold</option>
                    </select>
                 </div>

                 <!-- Sale Information (if sold) -->
                 <div x-show="editItem.status === 'Sold'" class="form-row">
                     <div class="form-group">
                         <label for="editSalePrice">Sale Price ($)</label>
                         <input type="number" id="editSalePrice" x-model="editItem.salePrice" step="0.01" min="0">
                     </div>
                     <div class="form-group">
                         <label for="editPlatform">Platform</label>
                         <select id="editPlatform" x-model="editItem.platform">
                             <option value="">Select platform</option>
                             <option value="Facebook Marketplace">Facebook Marketplace</option>
                             <option value="eBay">eBay</option>
                             <option value="Mercari">Mercari</option>
                             <option value="Poshmark">Poshmark</option>
                             <option value="Depop">Depop</option>
                             <option value="Vinted">Vinted</option>
                             <option value="Other">Other</option>
                         </select>
                     </div>
                 </div>

                 <!-- Return Reason Field (only shows if item is returned) - Moved to bottom -->
                 <div x-show="editItem.returnedMemo" class="form-group" style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #ef4444;">
                     <label for="editReturnReason">
                         <i class="fas fa-undo" style="color: #ef4444; margin-right: 0.5rem;"></i>
                         Return Reason
                     </label>
                     <textarea 
                         id="editReturnReason" 
                         x-model="editItem.returnedMemo" 
                         placeholder="Enter the reason for return..."
                         rows="3"
                         style="width: 100%; padding: 0.75rem; border: 1px solid #ef4444; border-radius: 8px; resize: vertical;"
                     ></textarea>
                     <small class="help-text" style="color: #ef4444;">
                         <i class="fas fa-info-circle"></i>
                         This item was returned. You can update the return reason here.
                     </small>
                 </div>

                 <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                     <button type="submit" class="btn btn-primary">
                         <i class="fas fa-save"></i> Save Changes
                     </button>
                     <button type="button" @click="showEditModal = false" class="btn btn-secondary">Cancel</button>
                 </div>
             </form>
         </div>
    </div>

    <!-- Cute Upload Success Notifications -->
    <div x-show="notification.show" 
         x-transition:enter="transition ease-out duration-500 transform"
         x-transition:enter-start="opacity-0 scale-75 translate-y-4"
         x-transition:enter-end="opacity-100 scale-100 translate-y-0"
         x-transition:leave="transition ease-in duration-300 transform"
         x-transition:leave-start="opacity-100 scale-100 translate-y-0"
         x-transition:leave-end="opacity-0 scale-95 translate-y-2"
         class="cute-notification-toast"
         :class="notification.type">
        <div class="cute-notification-content">
            <!-- Success Icon with Animation -->
            <div class="notification-icon-wrapper">
                <div class="notification-icon" :class="notification.type">
                    <span x-show="notification.type === 'upload-single'" class="notification-emoji">ðŸ“¸</span>
                    <span x-show="notification.type === 'upload-bulk'" class="notification-emoji">ðŸŽ‰</span>
                    <span x-show="notification.type === 'success'" class="notification-emoji">âœ¨</span>
                </div>
                <!-- Sparkle Animation -->
                <div class="sparkles">
                    <div class="sparkle sparkle-1">âœ¨</div>
                    <div class="sparkle sparkle-2">â­</div>
                    <div class="sparkle sparkle-3">ðŸ’«</div>
                </div>
            </div>
            
            <!-- Message Content -->
            <div class="notification-message">
                <div class="notification-title" x-text="notification.title"></div>
                <div class="notification-subtitle" x-text="notification.message"></div>
            </div>
            
            <!-- Close Button -->
            <button @click="notification.show = false" class="cute-notification-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Progress Bar Animation -->
        <div class="notification-progress" :class="notification.type"></div>
    </div>

    <script>
        // IndexedDB Setup for Large File Storage
        class RacksDB {
            constructor() {
                this.dbName = 'RacksDatabase';
                this.version = 1;
                this.db = null;
            }

            async init() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open(this.dbName, this.version);
                    
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => {
                        this.db = request.result;
                        resolve(this.db);
                    };
                    
                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;
                        
                        // Create object store for photos
                        if (!db.objectStoreNames.contains('photos')) {
                            const photoStore = db.createObjectStore('photos', { keyPath: 'id' });
                            photoStore.createIndex('itemId', 'itemId', { unique: false });
                        }
                        
                        // Create object store for large item data
                        if (!db.objectStoreNames.contains('items')) {
                            db.createObjectStore('items', { keyPath: 'id' });
                        }
                    };
                });
            }

            async savePhoto(itemId, photoData, photoIndex = 0) {
                const transaction = this.db.transaction(['photos'], 'readwrite');
                const store = transaction.objectStore('photos');
                
                const photoRecord = {
                    id: `${itemId}_${photoIndex}`,
                    itemId: itemId,
                    data: photoData,
                    index: photoIndex,
                    timestamp: new Date().toISOString()
                };
                
                return store.put(photoRecord);
            }

            async getPhotos(itemId) {
                const transaction = this.db.transaction(['photos'], 'readonly');
                const store = transaction.objectStore('photos');
                const index = store.index('itemId');
                
                return new Promise((resolve, reject) => {
                    const request = index.getAll(itemId);
                    request.onsuccess = () => {
                        const photos = request.result.sort((a, b) => a.index - b.index);
                        resolve(photos.map(photo => photo.data));
                    };
                    request.onerror = () => reject(request.error);
                });
            }

            async deletePhotos(itemId) {
                const transaction = this.db.transaction(['photos'], 'readwrite');
                const store = transaction.objectStore('photos');
                const index = store.index('itemId');
                
                return new Promise((resolve, reject) => {
                    const request = index.getAllKeys(itemId);
                    request.onsuccess = () => {
                        const deletePromises = request.result.map(key => store.delete(key));
                        Promise.all(deletePromises).then(resolve).catch(reject);
                    };
                    request.onerror = () => reject(request.error);
                });
            }

            async saveItem(item) {
                const transaction = this.db.transaction(['items'], 'readwrite');
                const store = transaction.objectStore('items');
                return store.put(item);
            }

            async getItem(itemId) {
                const transaction = this.db.transaction(['items'], 'readonly');
                const store = transaction.objectStore('items');
                return store.get(itemId);
            }

            async getAllItems() {
                const transaction = this.db.transaction(['items'], 'readonly');
                const store = transaction.objectStore('items');
                
                return new Promise((resolve, reject) => {
                    const request = store.getAll();
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = () => reject(request.error);
                });
            }

            async deleteItem(itemId) {
                const transaction = this.db.transaction(['items', 'photos'], 'readwrite');
                const itemStore = transaction.objectStore('items');
                
                // Delete item and its photos
                await this.deletePhotos(itemId);
                return itemStore.delete(itemId);
            }
        }

        // Initialize database
        const racksDB = new RacksDB();

        function resaleApp() {
            return {
                activeTab: localStorage.getItem('lastActiveTab') || 'add',
                items: (() => {
                    console.log('ðŸš€ Initializing app - Loading items from localStorage...');
                    
                    try {
                        const rawData = localStorage.getItem('resaleItems');
                        console.log('ðŸ“¥ Raw localStorage data:', rawData ? (rawData.length / 1024).toFixed(2) + ' KB' : 'null');
                        
                        if (!rawData) {
                            console.log('ðŸ“­ No data found in localStorage - starting with empty array');
                            return [];
                        }
                        
                        const items = JSON.parse(rawData);
                        console.log('âœ… Successfully loaded', items.length, 'items from localStorage');
                        console.log('ðŸ“Š Loaded items:', items);
                        
                        // Validate data integrity
                        const validItems = items.filter(item => item && item.id);
                        if (validItems.length !== items.length) {
                            console.warn('âš ï¸ Found', items.length - validItems.length, 'invalid items, filtering them out');
                        }
                        
                        return validItems;
                        
                    } catch (error) {
                        console.error('âŒ CRITICAL ERROR loading items from localStorage:', error);
                        console.error('Error details:', {
                            name: error.name,
                            message: error.message,
                            rawData: localStorage.getItem('resaleItems')
                        });
                        
                        // Try to recover by returning empty array
                        console.log('ðŸ”„ Recovering with empty array...');
                        return [];
                    }
                })(),
                newItem: {
                    photos: [],
                    purchasePrice: '',
                    listingPrice: '',
                    source: '',
                    description: '',
                    garmentType: '', // Required field for garment classification
                    manualTags: '',
                    useAutoPricing: true // Default to auto-pricing for new items
                },
                showListingModal: false,
                showSaleModal: false,
                selectedItem: null,
                listingPrice: '',
                listingPlatform: '',
                salePrice: '',
                salePlatform: '',
                                 showCamera: false,
                 cameraStream: null,
                showEditModal: false,
                showEditCamera: false,
                editCameraStream: null,
                showPerformanceInfo: false,
                expandedCards: {},
                showInventoryAlerts: false,
                editItem: {},
                showStatusModal: false,
                selectedStatus: '',
                statusItems: [],
                statusFilters: {
                    searchText: '',
                    priceSort: '',
                    dateRange: ''
                },
                paymentMethods: JSON.parse(localStorage.getItem('paymentMethods') || '[]'),
                newPaymentMethod: {
                    name: '',
                    qrUrl: ''
                },
                showQrUrlInput: false,
                showQRModal: false,
                selectedPaymentMethod: null,
                                 accessibleMode: JSON.parse(localStorage.getItem('accessibleMode') || 'false'),
                signInForm: {
                    email: '',
                    password: '',
                    rememberMe: false
                },
                showForgotPassword: false,
                showSignUp: false,
                ocrProcessing: false,
                ocrResults: null,
                showRobotNotification: false,
                robotNotificationState: 'scanning', // 'scanning', 'success', 'error'
                filtersExpanded: false,
                soldFiltersExpanded: false,
                notification: {
                    show: false,
                    message: '',
                    title: '',
                    type: 'success'
                },
                confirmModal: {
                    show: false,
                    title: '',
                    message: '',
                    confirmText: 'Confirm',
                    cancelText: 'Cancel',
                    confirmAction: null,
                    type: 'default' // 'default', 'danger', 'warning'
                },
                bulkUploadProgress: {
                    show: false,
                    current: 0,
                    total: 0,
                    completed: false,
                    startTime: null,
                    estimatedTimeRemaining: null
                },
                filters: JSON.parse(localStorage.getItem('racksFilters') || JSON.stringify({
                    priceSort: '',
                    dateSort: 'newest-first',
                    status: '',
                    dateRange: '',
                    customStartDate: '',
                    customEndDate: '',
                    searchText: '',
                    showReturned: false
                })),
                soldFilters: {
                    searchText: '',
                    dateSort: 'newest-first',
                    priceSort: '',
                    profitSort: '',
                    dateRange: '',
                    customStartDate: '',
                    customEndDate: '',
                    showReturned: false
                },
                settings: JSON.parse(localStorage.getItem('racksSettings') || JSON.stringify({
                    autoPricing: true,
                    pricingMethod: 'percentage',
                    markupValue: 200,
                    showProfitOnCards: true,
                    confirmDeletes: true,
                    darkMode: false,
                    tiledBackground: false,
                    tileSize: 'medium',
                     tileOpacity: 0.3,
                     tileImage: null,
                     colorScheme: 'pastel',
                     extractedColors: null,
                     lowStockAlerts: true,
                     lowStockThreshold: 5,
                     alertOnDashboard: true,
                     alertInReports: true,
                     garmentThresholds: {}
                 })),

                // Bulk selection state
                bulkSelection: {
                    enabled: false,
                    selectedItems: [],
                    selectAll: false
                },
                showBulkEditModal: false,
                bulkEditData: {
                    status: '',
                    source: '',
                    listingPrice: '',
                    garmentType: '',
                    tags: '',
                    applyStatus: false,
                    applySource: false,
                    applyListingPrice: false,
                    applyGarmentType: false,
                    applyTags: false
                },
                showBulkMoveToSoldModal: false,
                bulkMoveToSoldData: {
                    salePrice: '',
                    saleDate: new Date().toISOString().split('T')[0],
                    platform: '',
                    applySamePrice: false,
                    applySamePlatform: false
                },
                showBulkEditSoldModal: false,
                bulkEditSoldData: {
                    salePrice: '',
                    saleDate: '',
                    platform: '',
                    garmentType: '',
                    tags: '',
                    applySalePrice: false,
                    applySaleDate: false,
                    applySalePlatform: false,
                    applyGarmentType: false,
                    applyTags: false
                },
                showBulkReturnModal: false,
                bulkReturnData: {
                    returnReason: ''
                },

                get inventoryItems() {
                    return this.items.filter(item => item.status !== 'Sold');
                },

                get soldItems() {
                    const sold = this.items.filter(item => item.status === 'Sold');
                    console.log('soldItems computed:', sold.length, 'sold items found');
                    
                    // Sort sold items by date sold (newest first), fallback to dateAdded
                    return sold.sort((a, b) => {
                        const dateA = new Date(a.dateSold || a.dateAdded || '2020-01-01');
                        const dateB = new Date(b.dateSold || b.dateAdded || '2020-01-01');
                        
                        // Handle invalid dates
                        if (isNaN(dateA.getTime())) return 1;
                        if (isNaN(dateB.getTime())) return -1;
                        
                        return dateB - dateA; // Newest first
                    });
                },

                get returnedItems() {
                    return this.items.filter(item => item.returnedMemo && item.status !== 'Sold');
                },

                get returnedItemsValue() {
                    return this.returnedItems.reduce((total, item) => {
                        return total + (item.previousSalePrice || 0);
                    }, 0);
                },

                get returnedItemsCount() {
                    return this.returnedItems.length;
                },

                get garmentTypeStats() {
                    const stats = {};
                    console.log('Computing garmentTypeStats for', this.items.length, 'items');
                    
                    this.items.forEach(item => {
                        console.log('Processing item:', item.id, 'garmentType:', item.garmentType, 'status:', item.status);
                        if (item.garmentType) {
                            const type = item.garmentType;
                            if (!stats[type]) {
                                stats[type] = {
                                    count: 0,
                                    totalInvestment: 0,
                                    totalRevenue: 0,
                                    sold: 0,
                                    inventory: 0
                                };
                            }
                            stats[type].count++;
                            stats[type].totalInvestment += item.purchasePrice || 0;
                            
                            if (item.status === 'Sold') {
                                stats[type].sold++;
                                stats[type].totalRevenue += item.salePrice || 0;
                            } else {
                                stats[type].inventory++;
                            }
                        }
                    });
                    
                    console.log('Final garmentTypeStats:', stats);
                    return stats;
                },

                get topGarmentTypes() {
                    const stats = this.garmentTypeStats;
                    return Object.entries(stats)
                        .sort((a, b) => b[1].sold - a[1].sold) // Sort by sold count instead of total count
                        .slice(0, 3) // Top 3 instead of 5
                        .map(([type, data]) => {
                            const threshold = this.settings.garmentThresholds?.[type] || this.settings.lowStockThreshold || 5;
                            return {
                                type,
                                count: data.count,
                                sold: data.sold,
                                inventory: data.inventory,
                                profit: data.totalRevenue - data.totalInvestment,
                                isLowStock: this.settings.lowStockAlerts && data.inventory <= threshold
                            };
                        });
                },

                get lowStockGarmentTypes() {
                    if (!this.settings.lowStockAlerts) return [];
                    
                    return Object.entries(this.garmentTypeStats)
                        .filter(([type, data]) => {
                            const threshold = this.settings.garmentThresholds?.[type] || this.settings.lowStockThreshold || 5;
                            return data.inventory > 0 && data.inventory <= threshold;
                        })
                        .map(([type, data]) => {
                            const threshold = this.settings.garmentThresholds?.[type] || this.settings.lowStockThreshold || 5;
                            return {
                                type,
                                inventory: data.inventory,
                                threshold
                            };
                        })
                        .sort((a, b) => a.inventory - b.inventory);
                },

                get filteredStatusItems() {
                    let filtered = [...this.statusItems];

                    // Apply search filter
                    if (this.statusFilters.searchText) {
                        const searchTerm = this.statusFilters.searchText.toLowerCase();
                        filtered = filtered.filter(item => {
                            const descMatch = item.description && item.description.toLowerCase().includes(searchTerm);
                            const sourceMatch = item.source && item.source.toLowerCase().includes(searchTerm);
                            const garmentMatch = item.garmentType && item.garmentType.toLowerCase().includes(searchTerm);
                            return descMatch || sourceMatch || garmentMatch;
                        });
                    }

                    // Apply date range filter
                    if (this.statusFilters.dateRange) {
                        const today = new Date();
                        let startDate;
                        
                        switch(this.statusFilters.dateRange) {
                            case 'today':
                                startDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                                break;
                            case 'week':
                                startDate = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
                                break;
                            case 'month':
                                startDate = new Date(today.getFullYear(), today.getMonth(), 1);
                                break;
                        }
                        
                        if (startDate) {
                            filtered = filtered.filter(item => {
                                const itemDate = new Date(item.dateAdded || item.dateSold);
                                return itemDate >= startDate;
                            });
                        }
                    }

                    // Apply price sorting
                    if (this.statusFilters.priceSort) {
                        filtered.sort((a, b) => {
                            const priceA = parseFloat(a.salePrice || a.listingPrice || a.purchasePrice || 0);
                            const priceB = parseFloat(b.salePrice || b.listingPrice || b.purchasePrice || 0);
                            return this.statusFilters.priceSort === 'low-to-high' ? priceA - priceB : priceB - priceA;
                        });
                    }

                    return filtered;
                },

                get hasActiveFilters() {
                    return this.filters.searchText || 
                           this.filters.status || 
                           this.filters.priceSort || 
                           this.filters.dateRange ||
                           this.filters.showReturned ||
                           (this.filters.dateSort && this.filters.dateSort !== 'newest-first');
                },

                get filteredInventoryItems() {
                    // Start with inventory items
                    let filtered = [...this.inventoryItems];

                    // Apply status filter
                    if (this.filters.status) {
                        filtered = filtered.filter(item => item.status === this.filters.status);
                    }

                    // Apply date range filter
                    if (this.filters.dateRange) {
                        const now = new Date();
                        let startDate;

                        switch (this.filters.dateRange) {
                            case 'today':
                                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                                break;
                            case 'week':
                                startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                                break;
                            case 'month':
                                startDate = new Date(now.getFullYear(), now.getMonth(), 1);
                                break;
                            case 'custom':
                                if (this.filters.customStartDate) {
                                    startDate = new Date(this.filters.customStartDate);
                                }
                                break;
                        }

                        if (startDate) {
                            filtered = filtered.filter(item => {
                                const itemDate = new Date(item.dateAdded);
                                if (this.filters.dateRange === 'custom' && this.filters.customEndDate) {
                                    const endDate = new Date(this.filters.customEndDate);
                                    return itemDate >= startDate && itemDate <= endDate;
                                }
                                return itemDate >= startDate;
                            });
                        }
                    }

                    // Apply search filter
                    if (this.filters.searchText) {
                        const searchTerm = this.filters.searchText.toLowerCase();
                        filtered = filtered.filter(item => {
                            // Search in description
                            const descMatch = item.description && item.description.toLowerCase().includes(searchTerm);
                            
                            // Search in source
                            const sourceMatch = item.source && item.source.toLowerCase().includes(searchTerm);
                            
                            // Search in tags
                            const tagMatch = item.tags && item.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                            
                            // Search in status
                            const statusMatch = item.status && item.status.toLowerCase().includes(searchTerm);
                            
                            return descMatch || sourceMatch || tagMatch || statusMatch;
                        });
                    }

                    // Apply returned filter
                    if (this.filters.showReturned) {
                        filtered = filtered.filter(item => item.returnedMemo);
                    }

                    // Always apply date sorting (default: newest first)
                    // Use dateSort filter value, defaulting to 'newest-first' if not set
                    const sortOrder = this.filters.dateSort || 'newest-first';
                        filtered = [...filtered].sort((a, b) => {
                        // Handle items without dateAdded by using a fallback date
                        const dateA = new Date(a.dateAdded || '2020-01-01');
                        const dateB = new Date(b.dateAdded || '2020-01-01');
                        
                        // Handle invalid dates by treating them as very old
                        if (isNaN(dateA.getTime())) return 1;
                        if (isNaN(dateB.getTime())) return -1;
                        
                        return sortOrder === 'oldest-first' ? dateA - dateB : dateB - dateA;
                    });

                    // Apply price sorting (overrides date sorting if both are set)
                    if (this.filters.priceSort) {
                        filtered = [...filtered].sort((a, b) => {
                            const priceA = parseFloat(a.purchasePrice) || 0;
                            const priceB = parseFloat(b.purchasePrice) || 0;
                            return this.filters.priceSort === 'high-to-low' ? priceB - priceA : priceA - priceB;
                        });
                    }

                    return filtered;
                },

                get filteredSoldItems() {
                    // Start with sold items
                    let filtered = [...this.soldItems];

                    // Apply search filter - enhanced to match inventory search
                    if (this.soldFilters.searchText) {
                        const searchTerm = this.soldFilters.searchText.toLowerCase();
                        filtered = filtered.filter(item => {
                            // Search in description
                            const descMatch = item.description && item.description.toLowerCase().includes(searchTerm);
                            
                            // Search in source
                            const sourceMatch = item.source && item.source.toLowerCase().includes(searchTerm);
                            
                            // Search in tags
                            const tagMatch = item.tags && item.tags.some && item.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                            
                            // Search in garment type
                            const garmentMatch = item.garmentType && item.garmentType.toLowerCase().includes(searchTerm);
                            
                            return descMatch || sourceMatch || tagMatch || garmentMatch;
                        });
                    }

                    // Apply date range filter
                    if (this.soldFilters.dateRange) {
                        const now = new Date();
                        let startDate;
                        
                        switch (this.soldFilters.dateRange) {
                            case 'today':
                                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                                break;
                            case 'week':
                                startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                                break;
                            case 'month':
                                startDate = new Date(now.getFullYear(), now.getMonth(), 1);
                                break;
                            case 'quarter':
                                const quarterStart = Math.floor(now.getMonth() / 3) * 3;
                                startDate = new Date(now.getFullYear(), quarterStart, 1);
                                break;
                            case 'year':
                                startDate = new Date(now.getFullYear(), 0, 1);
                                break;
                            case 'custom':
                                if (this.soldFilters.customStartDate) {
                                    startDate = new Date(this.soldFilters.customStartDate);
                                    startDate.setHours(0, 0, 0, 0);
                                }
                                break;
                        }
                        
                        if (startDate) {
                            let endDate = now;
                            // Handle custom end date
                            if (this.soldFilters.dateRange === 'custom' && this.soldFilters.customEndDate) {
                                endDate = new Date(this.soldFilters.customEndDate);
                                endDate.setHours(23, 59, 59, 999);
                            }
                            
                            filtered = filtered.filter(item => {
                                const itemDate = new Date(item.dateSold || item.dateAdded);
                                return itemDate >= startDate && itemDate <= endDate;
                            });
                        }
                    }

                    // Apply show returned filter
                    if (this.soldFilters.showReturned) {
                        filtered = filtered.filter(item => item.returnedMemo);
                    }

                    // Apply date sorting
                    if (this.soldFilters.dateSort) {
                        filtered = [...filtered].sort((a, b) => {
                            const dateA = new Date(a.dateSold || a.dateAdded || '2020-01-01');
                            const dateB = new Date(b.dateSold || b.dateAdded || '2020-01-01');
                            
                            if (isNaN(dateA.getTime())) return 1;
                            if (isNaN(dateB.getTime())) return -1;
                            
                            return this.soldFilters.dateSort === 'oldest-first' ? dateA - dateB : dateB - dateA;
                        });
                    }

                    // Apply price sorting
                    if (this.soldFilters.priceSort) {
                        filtered = [...filtered].sort((a, b) => {
                            const priceA = parseFloat(a.salePrice || a.listingPrice) || 0;
                            const priceB = parseFloat(b.salePrice || b.listingPrice) || 0;
                            return this.soldFilters.priceSort === 'high-to-low' ? priceB - priceA : priceA - priceB;
                        });
                    }

                    // Apply profit sorting
                    if (this.soldFilters.profitSort) {
                        filtered = [...filtered].sort((a, b) => {
                            const profitA = (a.salePrice || a.listingPrice || 0) - (a.purchasePrice || 0);
                            const profitB = (b.salePrice || b.listingPrice || 0) - (b.purchasePrice || 0);
                            return this.soldFilters.profitSort === 'high-to-low' ? profitB - profitA : profitA - profitB;
                        });
                    }

                    return filtered;
                },

                get hasActiveSoldFilters() {
                    return this.soldFilters.searchText || 
                           this.soldFilters.dateRange || 
                           this.soldFilters.showReturned ||
                           (this.soldFilters.priceSort && this.soldFilters.priceSort !== '') ||
                           (this.soldFilters.profitSort && this.soldFilters.profitSort !== '');
                },

                get totalProfit() {
                    return this.soldItems.reduce((total, item) => {
                        return total + (item.salePrice - item.purchasePrice);
                    }, 0);
                },


                get recentItems() {
                    return [...this.items]
                        .sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded))
                        .slice(0, 5);
                },

                get itemsThisWeek() {
                    const weekAgo = new Date();
                    weekAgo.setDate(weekAgo.getDate() - 7);
                    return this.items.filter(item => new Date(item.dateAdded) >= weekAgo).length;
                },

                get soldThisWeek() {
                    const weekAgo = new Date();
                    weekAgo.setDate(weekAgo.getDate() - 7);
                    return this.soldItems.filter(item => 
                        item.dateSold && new Date(item.dateSold) >= weekAgo
                    ).length;
                },

                get bestProfitItem() {
                    if (this.soldItems.length === 0) return null;
                    return this.soldItems.reduce((best, item) => {
                        const profit = item.salePrice - item.purchasePrice;
                        const bestProfit = best ? best.salePrice - best.purchasePrice : 0;
                        return profit > bestProfit ? item : best;
                    }, null);
                },

                                 calculateListingPrice(purchasePrice) {
                     if (!this.settings.autoPricing || !purchasePrice) return '';
                     
                     const price = parseFloat(purchasePrice);
                     if (isNaN(price)) return '';
                     
                     if (this.settings.pricingMethod === 'percentage') {
                         const markup = parseFloat(this.settings.markupValue) || 200;
                         return (price * (1 + markup / 100)).toFixed(2);
                     } else {
                         const markup = parseFloat(this.settings.markupValue) || 0;
                         return (price + markup).toFixed(2);
                     }
                 },

                 async handlePhotoUpload(event) {
                     const file = event.target.files[0];
                     if (file && this.newItem.photos.length < 5) {
                         try {
                             // Use smart compression for single photo uploads (high quality)
                             const compressedDataURL = await this.smartCompressImage(file, false);
                             this.newItem.photos.push(compressedDataURL);
                         } catch (error) {
                             console.error('Error compressing image:', error);
                             // Fallback to original method if compression fails
                             const reader = new FileReader();
                             reader.onload = (e) => {
                                 this.newItem.photos.push(e.target.result);
                             };
                             reader.readAsDataURL(file);
                         }
                     }
                     // Reset file input
                     event.target.value = '';
                 },

                  async handleBulkUpload(event) {
                      const files = Array.from(event.target.files);
                      if (files.length === 0) return;

                      console.log('Starting bulk upload of', files.length, 'files');

                      // Reset progress
                      this.bulkUploadProgress = {
                          show: true,
                          current: 0,
                          total: files.length,
                          completed: false,
                          startTime: Date.now(),
                          estimatedTimeRemaining: null
                      };

                      try {
                          let processedCount = 0;
                          const batchSize = 5; // Process in smaller batches
                          
                          // Process files in batches for better performance
                          for (let i = 0; i < files.length; i += batchSize) {
                              const batch = files.slice(i, i + batchSize);
                              
                              // Process batch in parallel for speed
                              const batchPromises = batch.map(async (file, batchIndex) => {
                                  const fileIndex = i + batchIndex;
                                  console.log(`Processing file ${fileIndex + 1}/${files.length}:`, file.name);
                              
                              try {
                                  // Validate file type
                                  if (!file.type.startsWith('image/')) {
                                      console.warn('Skipping non-image file:', file.name);
                                          return null;
                                  }

                                      // Use faster compression for bulk upload
                                  let dataURL;
                                  try {
                                          dataURL = await this.fastBulkCompressImage(file);
                                      console.log('Compressed image for:', file.name);
                                  } catch (compressionError) {
                                      console.warn('Compression failed for', file.name, 'using fallback:', compressionError);
                                          // Fallback to basic FileReader with size limit
                                      dataURL = await new Promise((resolve, reject) => {
                                          const reader = new FileReader();
                                          reader.onload = (e) => resolve(e.target.result);
                                          reader.onerror = reject;
                                          reader.readAsDataURL(file);
                                      });
                                  }

                                  // Create new item with this photo
                                  const now = new Date().toISOString();
                                  const description = file.name.replace(/\.[^/.]+$/, "") || `Item ${processedCount + 1}`;
                                  
                                  // Determine status based on classification completeness
                                  const hasAllClassificationFields = false; // Bulk uploads always start with missing info since fields are empty
                                  
                                  const newItem = {
                                          id: Date.now() + fileIndex + Math.random(),
                                      photos: [dataURL],
                                      purchasePrice: 0,
                                      listingPrice: 0,
                                      source: '',
                                      description: description,
                                      garmentType: '', // Will need to be filled in during editing
                                      status: 'Missing Info', // Always Missing Info for bulk uploads since classification fields are empty
                                      dateAdded: now,
                                      useAutoPricing: this.settings.autoPricing,
                                      tags: this.generateAutoTags(description, '', 0)
                                  };
                                  
                                      return newItem;
                                  
                              } catch (error) {
                                  console.error('Error processing file:', file.name, error);
                                      return null;
                                  }
                              });
                              
                              // Wait for batch to complete
                              const batchResults = await Promise.all(batchPromises);
                              
                              // Add successful items to the array
                              batchResults.forEach(item => {
                                  if (item) {
                                      this.items.push(item);
                                      processedCount++;
                                  }
                              });
                              
                              // Save after each batch to prevent data loss
                              this.saveItems();
                              
                              // Update progress
                              this.bulkUploadProgress.current = Math.min(i + batchSize, files.length);
                              
                              // Calculate estimated time remaining
                              if (i > 0) {
                                  const elapsedTime = Date.now() - this.bulkUploadProgress.startTime;
                                  const averageTimePerItem = elapsedTime / this.bulkUploadProgress.current;
                                  const remainingItems = files.length - this.bulkUploadProgress.current;
                                  const estimatedRemainingMs = remainingItems * averageTimePerItem;
                                  
                                  // Format time remaining
                                  if (estimatedRemainingMs > 60000) {
                                      const minutes = Math.ceil(estimatedRemainingMs / 60000);
                                      this.bulkUploadProgress.estimatedTimeRemaining = minutes + (minutes === 1 ? ' minute' : ' minutes');
                                  } else {
                                      const seconds = Math.ceil(estimatedRemainingMs / 1000);
                                      this.bulkUploadProgress.estimatedTimeRemaining = seconds + (seconds === 1 ? ' second' : ' seconds');
                                  }
                              }
                              
                              // Small delay between batches to prevent browser freezing
                              if (i + batchSize < files.length) {
                                  await new Promise(resolve => setTimeout(resolve, 100));
                              }
                          }
                          
                          // Final save to ensure everything is persisted
                          this.saveItems();
                          
                          // Show cute bulk upload notification
                          this.showCuteUploadNotification(
                              'upload-bulk', 
                              'Bulk Upload Complete!', 
                              `Amazing! ${processedCount} items added to your inventory! ðŸŽ‰âœ¨`
                          );
                          
                          // Mark as completed
                          this.bulkUploadProgress.completed = true;
                          
                      } catch (error) {
                          console.error('Bulk upload error:', error);
                          
                          // Save any items that were processed before the error
                          if (processedCount > 0) {
                              this.saveItems();
                              this.showCuteUploadNotification(
                                  'upload-bulk', 
                                  'Partial Success!', 
                                  `${processedCount} items saved! Some files had issues, but your progress is safe! ðŸ’ªâœ¨`
                              );
                          } else {
                              this.showCuteUploadNotification(
                                  'success', 
                                  'Upload Issue', 
                                  'No items could be processed. Try fewer files or check image formats! ðŸ¤”'
                              );
                          }
                          
                          this.bulkUploadProgress.completed = true;
                      } finally {
                          // Reset file input to allow re-uploading same files
                          event.target.value = '';
                          
                          // Hide progress after a delay
                          setTimeout(() => {
                              this.bulkUploadProgress.show = false;
                              this.bulkUploadProgress.completed = false;
                          }, 3000);
                      }
                  },

                  async toggleCamera() {
                    if (this.showCamera) {
                        // Close camera
                        this.stopCamera();
                        this.showCamera = false;
                    } else {
                        // Open camera
                        try {
                            const stream = await navigator.mediaDevices.getUserMedia({ 
                                video: { 
                                    width: { ideal: 1280 },
                                    height: { ideal: 720 },
                                    facingMode: 'environment' // Use back camera on mobile if available
                                } 
                            });
                            this.cameraStream = stream;
                            this.showCamera = true;
                            
                            // Wait for Alpine to render the video element
                            this.$nextTick(() => {
                                if (this.$refs.video) {
                                    this.$refs.video.srcObject = stream;
                                }
                            });
                        } catch (error) {
                            console.error('Error accessing camera:', error);
                            this.showMessage('Unable to access camera. Please check your camera permissions and try again.', 'error');
                        }
                    }
                },

                stopCamera() {
                    if (this.cameraStream) {
                        this.cameraStream.getTracks().forEach(track => track.stop());
                        this.cameraStream = null;
                    }
                },

                capturePhoto() {
                    const video = this.$refs.video;
                    const canvas = this.$refs.canvas;
                    
                    if (video && canvas && this.newItem.photos.length < 5) {
                        // Set canvas dimensions to match video
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        
                        // Draw video frame to canvas
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(video, 0, 0);
                        
                        // Convert canvas to data URL with high quality and add to photos array
                        this.newItem.photos.push(canvas.toDataURL('image/jpeg', 0.92));
                        
                        // Close camera after capture
                        this.stopCamera();
                        this.showCamera = false;
                    }
                },

                removePhoto(index) {
                    this.newItem.photos.splice(index, 1);
                },

                addItem() {
                    // Validate required fields
                    if (!this.newItem.garmentType) {
                        this.showAlert('Please select a garment type before adding the item.', 'error');
                        return;
                    }
                    
                    if (!this.newItem.purchasePrice || this.newItem.purchasePrice <= 0) {
                        this.showAlert('Please enter a valid purchase price.', 'error');
                        return;
                    }

                    console.log('Adding item with garment type:', this.newItem.garmentType);
                    
                    // Generate auto tags
                    const autoTags = this.generateAutoTags(this.newItem.description, this.newItem.source, parseFloat(this.newItem.purchasePrice));
                    
                    // Parse manual tags
                    const manualTags = this.newItem.manualTags 
                        ? this.newItem.manualTags.split(',').map(tag => tag.trim().toLowerCase()).filter(tag => tag.length > 0)
                        : [];
                    
                    // Combine and deduplicate tags
                    const allTags = [...new Set([...autoTags, ...manualTags])];
                    
                    // Determine status based on classification completeness
                    const hasAllClassificationFields = this.newItem.garmentType && 
                                                      this.newItem.purchasePrice && 
                                                      this.newItem.source && 
                                                      this.newItem.description && 
                                                      this.newItem.photos.length > 0;
                    
                    const item = {
                        id: Date.now(),
                        photos: [...this.newItem.photos],
                        photo: this.newItem.photos[0] || null, // Keep for backward compatibility
                        purchasePrice: parseFloat(this.newItem.purchasePrice),
                        listingPrice: this.newItem.listingPrice ? parseFloat(this.newItem.listingPrice) : null,
                        source: this.newItem.source,
                        description: this.newItem.description,
                        garmentType: this.newItem.garmentType,
                        status: hasAllClassificationFields ? 'Itemized' : 'Missing Info',
                        dateAdded: new Date().toISOString(),
                        tags: allTags
                    };

                    console.log('Created item object:', item);

                    this.items.push(item);
                    this.saveItems();
                    
                    console.log('Item added. Total items now:', this.items.length);
                    console.log('Items with garment types:', this.items.filter(i => i.garmentType).length);
                    
                    // Show cute upload notification for single item
                    this.showCuteUploadNotification(
                        'upload-single', 
                        'Item Added!', 
                        `"${item.description || 'Untitled Item'}" is ready to sell! ðŸ“¸âœ¨`
                    );
                    
                    this.resetForm();
                    // Stay on add tab instead of switching to inventory
                },

                                 resetForm() {
                     this.newItem = {
                         photos: [],
                         purchasePrice: '',
                         listingPrice: '',
                         source: '',
                         description: '',
                         garmentType: '',
                         manualTags: '',
                         useAutoPricing: true // Default to auto-pricing for new items
                     };
                     // Close camera if it's open
                     if (this.showCamera) {
                         this.stopCamera();
                         this.showCamera = false;
                     }
                     // Reset file input
                     if (this.$refs.photoInput) {
                         this.$refs.photoInput.value = '';
                     }
                 },

                                                 updateItemStatus(itemId, newStatus) {
                    console.log('ðŸ”„ === UPDATE ITEM STATUS ===');
                    console.log('ðŸ†” Item ID:', itemId);
                    console.log('ðŸ“Š New Status:', newStatus);
                    console.log('ðŸ“‹ Current items array length:', this.items.length);
                    
                    // FIXED: Use findIndex instead of find, and splice for proper reactivity
                    const itemIndex = this.items.findIndex(i => i.id === itemId);
                    console.log('ðŸ” Found item at index:', itemIndex);
                    
                    if (itemIndex !== -1) {
                        console.log('ðŸ“ Original item data:', { ...this.items[itemIndex] });
                        
                        // Create a new object to ensure Alpine.js reactivity
                        const updatedItem = {
                            ...this.items[itemIndex],
                            status: newStatus,
                            dateModified: new Date().toISOString()
                        };
                        
                        console.log('ðŸ“ Updated item data:', updatedItem);
                        
                        // Replace the item in the array to trigger reactivity
                        this.items.splice(itemIndex, 1, updatedItem);
                        
                        console.log('ðŸ’¾ Calling saveItems...');
                        this.saveItems();
                        console.log('âœ… Status update completed');
                    } else {
                        console.error('âŒ Item not found for status update!');
                    }
                },

                 handleStatusChange(item, newStatus) {
                     
                     if (newStatus === 'Racked') {
                         // Open listing modal for Racked status
                         this.openListingModal(item);
                     } else if (newStatus === 'Sold') {
                         // Open sale modal for Sold status
                         this.openSaleModal(item);
                     } else {
                         // For other statuses, update directly
                         this.updateItemStatus(item.id, newStatus);
                     }
                 },

                                 openListingModal(item) {
                     this.selectedItem = item;
                     this.listingPrice = item.listingPrice || (item.purchasePrice * 3).toFixed(2);
                     this.listingPlatform = '';
                     this.showListingModal = true;
                 },

                confirmListing() {
                    console.log('ðŸ“‹ === CONFIRM LISTING ===');
                    console.log('ðŸŽ¯ Selected item:', this.selectedItem);
                    console.log('ðŸ’° Listing price:', this.listingPrice);
                    console.log('ðŸ“Š Items array length before:', this.items.length);
                    
                    if (this.selectedItem && this.listingPrice) {
                        // FIXED: Use the same safe approach as confirmSale()
                        // Find the item in the main items array and update it properly
                        const itemIndex = this.items.findIndex(item => item.id === this.selectedItem.id);
                        console.log('ðŸ” Found item at index:', itemIndex);
                        
                        if (itemIndex !== -1) {
                            console.log('ðŸ“ Original item data:', { ...this.items[itemIndex] });
                            
                            // Create a new object to ensure Alpine.js reactivity
                            const updatedItem = {
                                ...this.items[itemIndex],
                                status: 'Racked',
                                listingPrice: parseFloat(this.listingPrice),
                                platform: this.listingPlatform,
                                dateModified: new Date().toISOString()
                            };
                            
                            console.log('ðŸ“ Updated item data:', updatedItem);
                            
                            // Replace the item in the array to trigger reactivity
                            this.items.splice(itemIndex, 1, updatedItem);
                            
                            console.log('ðŸ“Š Items array length after update:', this.items.length);
                            console.log('ðŸ’¾ Calling saveItems...');
                            
                        this.saveItems();
                            
                            console.log('âœ… Listing confirmation completed');
                        } else {
                            console.error('âŒ Could not find item in array to update');
                        }
                        
                        this.showListingModal = false;
                    } else {
                        console.error('âŒ Missing selectedItem or listingPrice');
                    }
                },

                                 openSaleModal(item) {
                     this.selectedItem = item;
                     this.salePrice = item.listingPrice ? item.listingPrice.toFixed(2) : '';
                     this.salePlatform = item.platform || '';
                     this.showSaleModal = true;
                 },

                confirmSale() {
                    console.log('confirmSale called', { selectedItem: this.selectedItem, salePrice: this.salePrice });
                    
                    if (this.selectedItem && this.salePrice) {
                        
                        // Find the item in the main items array and update it directly
                        const itemIndex = this.items.findIndex(item => item.id === this.selectedItem.id);
                        console.log('Found item at index:', itemIndex);
                        
                        if (itemIndex !== -1) {
                            // Create a new object to ensure Alpine.js reactivity
                            const updatedItem = {
                                ...this.items[itemIndex],
                                previousStatus: this.items[itemIndex].status, // Save previous status
                                status: 'Sold',
                                salePrice: parseFloat(this.salePrice),
                                platform: this.salePlatform || '',
                                dateSold: new Date().toISOString(),
                                dateModified: new Date().toISOString()
                            };
                            
                            console.log('Updated item:', updatedItem);
                            
                            // Replace the item in the array to trigger reactivity
                            this.items.splice(itemIndex, 1, updatedItem);
                            
                            console.log('Items array after update:', this.items.length, 'items');
                            console.log('Sold items count:', this.soldItems.length);
                            
                            // Force save immediately
                            this.saveItems();
                            
                            // Double-check the save worked
                            setTimeout(() => {
                                const savedItems = JSON.parse(localStorage.getItem('resaleItems') || '[]');
                                const savedSoldItems = savedItems.filter(item => item.status === 'Sold');
                                console.log('Verification - saved sold items:', savedSoldItems.length);
                                
                                if (savedSoldItems.length === 0) {
                                    this.showAlert('Warning: There may be an issue saving sold items. Please check the console and try again.', 'error');
                                }
                            }, 100);
                            
                            this.showSaleModal = false;
                            
                            // Reset form
                            this.salePrice = '';
                            this.salePlatform = '';
                            this.selectedItem = null;
                            
                            this.showMessage('Item marked as sold successfully!');
                        } else {
                            console.error('Could not find item in array to update');
                            this.showAlert('Error: Could not find item to update. Please try again.', 'error');
                        }
                    } else {
                        this.showAlert('Please enter a sale price to mark this item as sold.', 'error');
                    }
                },

                markAsReturned(item) {
                    // Set up bulk selection for this single item to reuse the styled modal
                    this.bulkSelection.selectedItems = [item.id];
                    this.bulkSelection.enabled = true;
                    
                    // Reset return reason form
                    this.bulkReturnData = {
                        returnReason: ''
                    };
                    
                    // Show the styled return modal
                    this.showBulkReturnModal = true;
                },

                                 deleteItem(itemId) {
                     const shouldConfirm = this.settings.confirmDeletes;
                     if (!shouldConfirm) {
                         this.items = this.items.filter(item => item.id !== itemId);
                         this.saveItems();
                         this.showMessage('Item deleted successfully');
                     } else {
                         this.showConfirmation(
                             'Delete Item',
                             'Are you sure you want to delete this item? This action cannot be undone.',
                             () => {
                                 this.items = this.items.filter(item => item.id !== itemId);
                                 this.saveItems();
                                 this.showMessage('Item deleted successfully');
                             },
                             { type: 'danger', confirmText: 'Delete' }
                         );
                     }
                 },

                // Bulk Operation Functions
                toggleBulkMode() {
                    if (!this.bulkSelection.enabled) {
                        // Reset selection when enabling bulk mode
                        this.bulkSelection.selectedItems = [];
                        this.bulkSelection.selectAll = false;
                    }
                },

                toggleItemSelection(itemId) {
                    const index = this.bulkSelection.selectedItems.indexOf(itemId);
                    if (index === -1) {
                        this.bulkSelection.selectedItems.push(itemId);
                    } else {
                        this.bulkSelection.selectedItems.splice(index, 1);
                    }
                    
                    // Update select all state
                    const currentItems = this.activeTab === 'inventory' ? this.filteredInventoryItems : this.filteredSoldItems;
                    this.bulkSelection.selectAll = this.bulkSelection.selectedItems.length === currentItems.length;
                },

                selectAllInventory() {
                    if (this.bulkSelection.selectAll) {
                        this.bulkSelection.selectedItems = [];
                        this.bulkSelection.selectAll = false;
                    } else {
                        this.bulkSelection.selectedItems = this.filteredInventoryItems.map(item => item.id);
                        this.bulkSelection.selectAll = true;
                    }
                },

                selectAllSold() {
                    if (this.bulkSelection.selectAll) {
                        this.bulkSelection.selectedItems = [];
                        this.bulkSelection.selectAll = false;
                    } else {
                        this.bulkSelection.selectedItems = this.filteredSoldItems.map(item => item.id);
                        this.bulkSelection.selectAll = true;
                    }
                },

                bulkDeleteItems() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    const count = this.bulkSelection.selectedItems.length;
                    const shouldConfirm = this.settings.confirmDeletes;
                    
                    if (!shouldConfirm) {
                        this.items = this.items.filter(item => !this.bulkSelection.selectedItems.includes(item.id));
                        this.saveItems();
                        
                        // Reset bulk selection
                        this.bulkSelection.selectedItems = [];
                        this.bulkSelection.selectAll = false;
                        this.bulkSelection.enabled = false;
                        
                        this.showMessage(`${count} item(s) deleted successfully`);
                    } else {
                        this.showConfirmation(
                            'Delete Items',
                            `Are you sure you want to delete ${count} selected item(s)? This action cannot be undone.`,
                            () => {
                                this.items = this.items.filter(item => !this.bulkSelection.selectedItems.includes(item.id));
                                this.saveItems();

                                // Reset bulk selection
                                this.bulkSelection.selectedItems = [];
                                this.bulkSelection.selectAll = false;
                                this.bulkSelection.enabled = false;

                                this.showMessage(`${count} item(s) deleted successfully`);
                            },
                            { type: 'danger', confirmText: 'Delete All' }
                        );
                    }
                },

                bulkEditItems() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    // Reset bulk edit form
                    this.bulkEditData = {
                        status: '',
                        source: '',
                        listingPrice: '',
                        garmentType: '',
                        tags: '',
                        applyStatus: false,
                        applySource: false,
                        applyListingPrice: false,
                        applyGarmentType: false,
                        applyTags: false
                    };
                    
                    this.showBulkEditModal = true;
                },

                confirmBulkEdit() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    let updatedCount = 0;
                    
                    this.items = this.items.map(item => {
                        if (this.bulkSelection.selectedItems.includes(item.id)) {
                            const updatedItem = { ...item };
                            
                            if (this.bulkEditData.applyStatus && this.bulkEditData.status) {
                                updatedItem.status = this.bulkEditData.status;
                            }
                            
                            if (this.bulkEditData.applySource && this.bulkEditData.source) {
                                updatedItem.source = this.bulkEditData.source;
                            }
                            
                            if (this.bulkEditData.applyListingPrice && this.bulkEditData.listingPrice) {
                                updatedItem.listingPrice = parseFloat(this.bulkEditData.listingPrice);
                            }
                            
                            if (this.bulkEditData.applyGarmentType && this.bulkEditData.garmentType) {
                                updatedItem.garmentType = this.bulkEditData.garmentType;
                            }
                            
                            if (this.bulkEditData.applyTags && this.bulkEditData.tags) {
                                // Parse new tags and add to existing tags
                                const newTags = this.bulkEditData.tags.split(',').map(tag => tag.trim()).filter(tag => tag);
                                const existingTags = updatedItem.tags || [];
                                
                                // Combine and deduplicate tags
                                const allTags = [...existingTags, ...newTags];
                                updatedItem.tags = [...new Set(allTags)];
                            }
                            
                            updatedItem.dateModified = new Date().toISOString();
                            updatedCount++;
                            return updatedItem;
                        }
                        return item;
                    });
                    
                    this.saveItems();
                    
                    // Reset bulk selection and close modal
                    this.bulkSelection.selectedItems = [];
                    this.bulkSelection.selectAll = false;
                    this.bulkSelection.enabled = false;
                    this.showBulkEditModal = false;
                    
                    this.showMessage(`${updatedCount} item(s) updated successfully`);
                },

                bulkMoveToSold() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    // Reset bulk move to sold form
                    this.bulkMoveToSoldData = {
                        salePrice: '',
                        saleDate: new Date().toISOString().split('T')[0],
                        platform: '',
                        applySamePrice: false,
                        applySamePlatform: false
                    };
                    
                    this.showBulkMoveToSoldModal = true;
                },

                confirmBulkMoveToSold() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    console.log('Moving items to sold:', this.bulkSelection.selectedItems);
                    
                    const selectedItems = this.items.filter(item => 
                        this.bulkSelection.selectedItems.includes(item.id)
                    );
                    
                    console.log('Selected items found:', selectedItems.length);
                    
                    let movedCount = 0;
                    
                    this.items = this.items.map(item => {
                        if (this.bulkSelection.selectedItems.includes(item.id)) {
                            const updatedItem = { ...item };
                            
                            // Save previous status before moving to sold
                            updatedItem.previousStatus = item.status;
                            
                            // Move to sold
                            updatedItem.status = 'Sold';
                            updatedItem.dateSold = new Date(this.bulkMoveToSoldData.saleDate).toISOString(); // Fixed: use dateSold instead of saleDate
                            updatedItem.dateModified = new Date().toISOString();
                            
                            // Apply same price to all if enabled
                            if (this.bulkMoveToSoldData.applySamePrice && this.bulkMoveToSoldData.salePrice) {
                                updatedItem.salePrice = parseFloat(this.bulkMoveToSoldData.salePrice);
                            } else if (!updatedItem.salePrice && this.bulkMoveToSoldData.salePrice) {
                                // Set price if item doesn't have one
                                updatedItem.salePrice = parseFloat(this.bulkMoveToSoldData.salePrice);
                            }
                            
                            // Apply same platform to all if enabled
                            if (this.bulkMoveToSoldData.applySamePlatform && this.bulkMoveToSoldData.platform) {
                                updatedItem.platform = this.bulkMoveToSoldData.platform;
                            } else if (!updatedItem.platform && this.bulkMoveToSoldData.platform) {
                                // Set platform if item doesn't have one
                                updatedItem.platform = this.bulkMoveToSoldData.platform;
                            }
                            
                            console.log('Updated item:', updatedItem.id, 'status:', updatedItem.status, 'dateSold:', updatedItem.dateSold);
                            movedCount++;
                            return updatedItem;
                        }
                        return item;
                    });
                    
                    this.saveItems();
                    
                    // Verify the move worked
                    setTimeout(() => {
                        const soldItemsAfter = this.items.filter(item => item.status === 'Sold');
                        console.log('Sold items after move:', soldItemsAfter.length);
                    }, 100);
                    
                    // Reset bulk selection and close modal
                    this.bulkSelection.selectedItems = [];
                    this.bulkSelection.selectAll = false;
                    this.bulkSelection.enabled = false;
                    this.showBulkMoveToSoldModal = false;
                    
                    this.showMessage(`${movedCount} item(s) moved to sold successfully`);
                },

                bulkEditSoldItems() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    // Reset bulk edit sold form
                    this.bulkEditSoldData = {
                        salePrice: '',
                        saleDate: '',
                        platform: '',
                        garmentType: '',
                        tags: '',
                        applySalePrice: false,
                        applySaleDate: false,
                        applySalePlatform: false,
                        applyGarmentType: false,
                        applyTags: false
                    };
                    
                    this.showBulkEditSoldModal = true;
                },

                confirmBulkEditSold() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    let updatedCount = 0;
                    
                    this.items = this.items.map(item => {
                        if (this.bulkSelection.selectedItems.includes(item.id)) {
                            const updatedItem = { ...item };
                            
                            if (this.bulkEditSoldData.applySalePrice && this.bulkEditSoldData.salePrice) {
                                updatedItem.salePrice = parseFloat(this.bulkEditSoldData.salePrice);
                            }
                            
                            if (this.bulkEditSoldData.applySaleDate && this.bulkEditSoldData.saleDate) {
                                updatedItem.dateSold = new Date(this.bulkEditSoldData.saleDate).toISOString();
                            }
                            
                            if (this.bulkEditSoldData.applySalePlatform && this.bulkEditSoldData.platform) {
                                updatedItem.platform = this.bulkEditSoldData.platform;
                            }
                            
                            if (this.bulkEditSoldData.applyGarmentType && this.bulkEditSoldData.garmentType) {
                                updatedItem.garmentType = this.bulkEditSoldData.garmentType;
                            }
                            
                            if (this.bulkEditSoldData.applyTags && this.bulkEditSoldData.tags) {
                                // Parse new tags and add to existing tags
                                const newTags = this.bulkEditSoldData.tags.split(',').map(tag => tag.trim()).filter(tag => tag);
                                const existingTags = updatedItem.tags || [];
                                
                                // Combine and deduplicate tags
                                const allTags = [...existingTags, ...newTags];
                                updatedItem.tags = [...new Set(allTags)];
                            }
                            
                            updatedItem.dateModified = new Date().toISOString();
                            updatedCount++;
                            return updatedItem;
                        }
                        return item;
                    });
                    
                    this.saveItems();
                    
                    // Reset bulk selection and close modal
                    this.bulkSelection.selectedItems = [];
                    this.bulkSelection.selectAll = false;
                    this.bulkSelection.enabled = false;
                    this.showBulkEditSoldModal = false;
                    
                    this.showMessage(`${updatedCount} sold item(s) updated successfully`);
                },

                bulkMoveToInventory() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    // Reset return reason form
                    this.bulkReturnData = {
                        returnReason: ''
                    };
                    
                    this.showBulkReturnModal = true;
                },

                confirmBulkMoveToInventory() {
                    if (this.bulkSelection.selectedItems.length === 0) return;
                    
                    const count = this.bulkSelection.selectedItems.length;
                    const shouldConfirm = this.settings.confirmDeletes; // Reuse the confirm setting
                    
                    const doMove = () => {
                        console.log('Moving items back to inventory:', this.bulkSelection.selectedItems);
                        
                        let movedCount = 0;
                        
                        this.items = this.items.map(item => {
                            if (this.bulkSelection.selectedItems.includes(item.id)) {
                                const updatedItem = { ...item };
                                
                                // Move back to inventory (use previous status or default to 'Listed')
                                updatedItem.status = item.previousStatus || 'Listed';
                                
                                // Keep sale information for record keeping but mark as previous
                                if (updatedItem.salePrice) {
                                    updatedItem.previousSalePrice = updatedItem.salePrice;
                                    updatedItem.previousSaleDate = updatedItem.dateSold;
                                    updatedItem.previousSalePlatform = updatedItem.platform;
                                }
                                
                                // Add return information
                                updatedItem.returnedMemo = `Returned${this.bulkReturnData.returnReason ? ': ' + this.bulkReturnData.returnReason : ''}`;
                                updatedItem.dateReturned = new Date().toISOString();
                                
                                // Remove current sale data completely
                                delete updatedItem.dateSold;
                                if (updatedItem.salePrice !== undefined) delete updatedItem.salePrice;
                                if (updatedItem.platform !== undefined) delete updatedItem.platform;
                                updatedItem.dateModified = new Date().toISOString();
                                
                                console.log('Moved item back to inventory:', updatedItem.id, 'new status:', updatedItem.status);
                                movedCount++;
                                return updatedItem;
                            }
                            return item;
                        });
                        
                        this.saveItems();
                        
                        // Verify the move worked
                        setTimeout(() => {
                            const inventoryItemsAfter = this.items.filter(item => item.status !== 'Sold');
                            const soldItemsAfter = this.items.filter(item => item.status === 'Sold');
                            console.log('Inventory items after move:', inventoryItemsAfter.length);
                            console.log('Sold items after move:', soldItemsAfter.length);
                        }, 100);
                        
                        // Reset bulk selection and close modal
                        this.bulkSelection.selectedItems = [];
                        this.bulkSelection.selectAll = false;
                        this.bulkSelection.enabled = false;
                        this.showBulkReturnModal = false;
                        
                        this.showMessage(`${movedCount} item(s) returned to inventory`);
                    };
                    
                            doMove();
                },

                extractManualTags(item) {
                    // This is a simple approach - in a real app you might store manual tags separately
                    // For now, we'll assume any tags that aren't auto-generated are manual
                    if (!item.tags || !item.description || !item.source) return '';
                    
                    const autoTags = this.generateAutoTags(item.description, item.source, item.purchasePrice);
                    const manualTags = item.tags.filter(tag => !autoTags.includes(tag));
                    
                    return manualTags.join(', ');
                },

                 openEditModal(item) {
                     console.log('ðŸ”§ === OPENING EDIT MODAL ===');
                     console.log('ðŸ“ Original item:', item);
                     console.log('ðŸ‘• Original garment type:', item.garmentType);
                     
                     // Extract manual tags from existing tags (if any)
                     const manualTags = this.extractManualTags(item);
                     
                     // Create a deep copy of the item for editing
                     this.editItem = {
                         ...item,
                         photos: [...(item.photos || [])],
                         purchasePrice: item.purchasePrice,
                         listingPrice: item.listingPrice || '',
                         source: item.source,
                         description: item.description || '',
                         status: item.status,
                         salePrice: item.salePrice || '',
                         platform: item.platform || '',
                         manualTags: manualTags,
                         useAutoPricing: false // Default to manual pricing for existing items
                     };
                     
                     console.log('ðŸ“‹ Edit item created:', this.editItem);
                     console.log('ðŸ‘• Edit item garment type:', this.editItem.garmentType);
                     
                     this.showEditModal = true;
                 },

                 async handleEditPhotoUpload(event) {
                     const file = event.target.files[0];
                     if (file && this.editItem.photos.length < 5) {
                         try {
                             // Use smart compression for edit photo uploads (high quality)
                             const compressedDataURL = await this.smartCompressImage(file, false);
                             this.editItem.photos.push(compressedDataURL);
                         } catch (error) {
                             console.error('Error compressing image:', error);
                             // Fallback to original method if compression fails
                             const reader = new FileReader();
                             reader.onload = (e) => {
                                 this.editItem.photos.push(e.target.result);
                             };
                             reader.readAsDataURL(file);
                         }
                     }
                     // Reset file input
                     event.target.value = '';
                 },

                 async toggleEditCamera() {
                     if (this.showEditCamera) {
                         // Close camera
                         this.stopEditCamera();
                         this.showEditCamera = false;
                     } else {
                         // Open camera
                         try {
                             const stream = await navigator.mediaDevices.getUserMedia({ 
                                 video: { 
                                     width: { ideal: 1280 },
                                     height: { ideal: 720 },
                                     facingMode: 'environment'
                                 } 
                             });
                             this.editCameraStream = stream;
                             this.showEditCamera = true;
                             
                             this.$nextTick(() => {
                                 if (this.$refs.editVideo) {
                                     this.$refs.editVideo.srcObject = stream;
                                 }
                             });
                        } catch (error) {
                            console.error('Error accessing camera:', error);
                            this.showCuteUploadNotification(
                                'error',
                                'Camera Access Issue',
                                'Unable to access camera. Please check your camera permissions and try again. ðŸ“·'
                            );
                        }
                     }
                 },

                 stopEditCamera() {
                     if (this.editCameraStream) {
                         this.editCameraStream.getTracks().forEach(track => track.stop());
                         this.editCameraStream = null;
                     }
                 },

                 captureEditPhoto() {
                     const video = this.$refs.editVideo;
                     const canvas = this.$refs.editCanvas;
                     
                     if (video && canvas && this.editItem.photos.length < 5) {
                         canvas.width = video.videoWidth;
                         canvas.height = video.videoHeight;
                         
                         const ctx = canvas.getContext('2d');
                         ctx.drawImage(video, 0, 0);
                         
                         this.editItem.photos.push(canvas.toDataURL('image/jpeg', 0.92));
                         
                         this.stopEditCamera();
                         this.showEditCamera = false;
                     }
                 },

                 removeEditPhoto(index) {
                     this.editItem.photos.splice(index, 1);
                 },

                 updateEditListingPrice() {
                     if (this.editItem.useAutoPricing && this.editItem.purchasePrice) {
                         this.editItem.listingPrice = this.calculateListingPrice(this.editItem.purchasePrice);
                     }
                 },

                 updateNewItemListingPrice() {
                     if (this.newItem.useAutoPricing && this.newItem.purchasePrice) {
                         this.newItem.listingPrice = this.calculateListingPrice(this.newItem.purchasePrice);
                     }
                 },

                                 saveItemEdits() {
                    console.log('âœï¸ === SAVING ITEM EDITS ===');
                    console.log('ðŸ“ Edit item data:', this.editItem);
                    console.log('ðŸ“Š Current items array length:', this.items.length);
                    
                    try {
                        // Find the item in the array and update it
                        const itemIndex = this.items.findIndex(item => item.id === this.editItem.id);
                        console.log('ðŸ” Found item at index:', itemIndex);
                        
                        if (itemIndex !== -1) {
                            // Generate auto tags based on current data
                            const autoTags = this.generateAutoTags(this.editItem.description, this.editItem.source, parseFloat(this.editItem.purchasePrice));
                            
                            // Parse manual tags
                            const manualTags = this.editItem.manualTags 
                                ? this.editItem.manualTags.split(',').map(tag => tag.trim().toLowerCase()).filter(tag => tag.length > 0)
                                : [];
                            
                            // Combine and deduplicate tags
                            const allTags = [...new Set([...autoTags, ...manualTags])];
                            
                            // Re-evaluate status based on classification completeness (only if not manually set to other statuses)
                            const hasAllClassificationFields = this.editItem.garmentType && 
                                                              this.editItem.purchasePrice && 
                                                              this.editItem.source && 
                                                              this.editItem.description && 
                                                              this.editItem.photos.length > 0;
                            
                            // Auto-update status if currently Missing Info or Itemized
                            if (this.editItem.status === 'Missing Info' || this.editItem.status === 'Itemized') {
                                this.editItem.status = hasAllClassificationFields ? 'Itemized' : 'Missing Info';
                            }
                            
                            // Save previous status if status is changing to Sold
                            const originalItem = this.items[itemIndex];
                            const statusChangingToSold = (originalItem.status !== 'Sold' && this.editItem.status === 'Sold');
                            
                            // Update the item with edited data
                            this.items[itemIndex] = {
                                ...this.editItem,
                                purchasePrice: parseFloat(this.editItem.purchasePrice) || 0,
                                listingPrice: this.editItem.listingPrice ? parseFloat(this.editItem.listingPrice) : null,
                                salePrice: this.editItem.salePrice ? parseFloat(this.editItem.salePrice) : null,
                                photo: this.editItem.photos[0] || null, // Keep backward compatibility
                                tags: allTags,
                                dateModified: new Date().toISOString()
                            };
                            
                            // If status is changing to sold, save previous status
                            if (statusChangingToSold) {
                                this.items[itemIndex].previousStatus = originalItem.status;
                            }
                            
                            // If status is sold, ensure dateSold is set
                            if (this.editItem.status === 'Sold') {
                                if (!this.items[itemIndex].dateSold) {
                                    this.items[itemIndex].dateSold = new Date().toISOString();
                                }
                                // Ensure salePrice is set for sold items
                                if (!this.items[itemIndex].salePrice && this.editItem.salePrice) {
                                    this.items[itemIndex].salePrice = parseFloat(this.editItem.salePrice);
                                }
                            }
                            
                            console.log('ðŸ’¾ Updated item at index', itemIndex, ':', this.items[itemIndex]);
                            console.log('ðŸ“Š Items array length after update:', this.items.length);
                            
                            this.saveItems();
                            
                            console.log('âœ… Edit save completed');
                            
                            this.showMessage('Item updated successfully');
                        }
                    } catch (error) {
                        console.error('Error saving item edits:', error);
                    } finally {
                        // Always close the modal regardless of success or failure
                        this.showEditModal = false;
                        
                        // Close camera if open
                        if (this.showEditCamera) {
                            this.stopEditCamera();
                            this.showEditCamera = false;
                        }
                    }
                },

                getItemsByStatus(status) {
                    return this.items.filter(item => item.status === status);
                },

                formatDate(dateString) {
                    const date = new Date(dateString);
                    const now = new Date();
                    const diffTime = Math.abs(now - date);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 1) return 'Today';
                    if (diffDays === 2) return 'Yesterday';
                    if (diffDays <= 7) return `${diffDays - 1} days ago`;
                    return date.toLocaleDateString();
                },

                formatSource(source) {
                    const sources = {
                        'thrift': 'Thrift Store',
                        'estate': 'Estate Sale',
                        'garage': 'Garage Sale',
                        'facebook': 'Facebook Marketplace',
                        'other': 'Other'
                    };
                    return sources[source] || source;
                },

                toggleAccessibleMode() {
                    this.accessibleMode = !this.accessibleMode;
                    localStorage.setItem('accessibleMode', JSON.stringify(this.accessibleMode));
                    this.applyAccessibleMode();
                },

                                 applyAccessibleMode() {
                     if (this.accessibleMode) {
                         document.body.classList.add('accessible-mode');
                     } else {
                         document.body.classList.remove('accessible-mode');
                     }
                 },

                                 saveItems() {
                     console.log('ðŸ”„ saveItems called with', this.items.length, 'items');
                     console.log('ðŸ“Š Current items array:', this.items);
                     
                     try {
                         // Check localStorage quota before saving
                         const itemsString = JSON.stringify(this.items);
                         console.log('ðŸ’¾ Data size to save:', (itemsString.length / 1024).toFixed(2), 'KB');
                         
                         // Check current localStorage usage
                         let totalSize = 0;
                         for (let key in localStorage) {
                             if (localStorage.hasOwnProperty(key)) {
                                 totalSize += localStorage[key].length;
                             }
                         }
                         console.log('ðŸ“ˆ Current localStorage usage:', (totalSize / 1024).toFixed(2), 'KB');
                         
                         localStorage.setItem('resaleItems', itemsString);
                         console.log('âœ… Items saved to localStorage successfully');
                         
                         // Immediate verification
                     const savedItems = JSON.parse(localStorage.getItem('resaleItems') || '[]');
                         console.log('ðŸ” Immediate verification: Retrieved', savedItems.length, 'items from localStorage');
                         
                         if (savedItems.length !== this.items.length) {
                             console.error('âŒ CRITICAL: Save verification failed!', {
                                 expected: this.items.length,
                                 actual: savedItems.length,
                                 originalData: this.items,
                                 savedData: savedItems
                             });
                             
                             // Try to save again with a delay
                             setTimeout(() => {
                                 console.log('ðŸ”„ Retrying save...');
                                 try {
                                     localStorage.setItem('resaleItems', JSON.stringify(this.items));
                                     const retryVerify = JSON.parse(localStorage.getItem('resaleItems') || '[]');
                                     console.log('ðŸ”„ Retry verification:', retryVerify.length, 'items');
                                 } catch (retryError) {
                                     console.error('âŒ Retry save failed:', retryError);
                                 }
                             }, 100);
                         } else {
                             console.log('âœ… Save verification passed!');
                         }
                         
                     } catch (error) {
                         console.error('âŒ CRITICAL ERROR saving items to localStorage:', error);
                         console.error('Error details:', {
                             name: error.name,
                             message: error.message,
                             stack: error.stack
                         });
                         
                         // Check if it's a quota exceeded error
                         if (error.name === 'QuotaExceededError' || error.code === 22) {
                             console.error('ðŸš¨ localStorage quota exceeded! Need to clean up data.');
                             this.showAlert('Storage quota exceeded! Your data cannot be saved. Please export your data and clear some items.', 'error');
                         } else {
                             console.error('ðŸš¨ Unknown save error. Data may be lost!');
                         }
                     }
                 },

                                 saveSettings() {
                    localStorage.setItem('racksSettings', JSON.stringify(this.settings));
                    this.showMessage('Settings saved successfully');
                },

                setPricingMethod(method) {
                    // Toggle the selected method - if it's already selected, do nothing
                    // If it's not selected, select it and deselect the other
                    if (this.settings.pricingMethod !== method) {
                        this.settings.pricingMethod = method;
                        this.saveSettings();
                        
                        // Recalculate any auto-pricing items
                        if (this.newItem.useAutoPricing && this.newItem.purchasePrice) {
                            this.newItem.listingPrice = this.calculateListingPrice(this.newItem.purchasePrice);
                        }
                    }
                },

                toggleCardExpansion(garmentType) {
                    if (!this.expandedCards) {
                        this.expandedCards = {};
                    }
                    this.expandedCards[garmentType] = !this.expandedCards[garmentType];
                },

                filterByGarmentType(garmentType) {
                    // Set filter and switch to inventory tab
                    this.searchTerm = '';
                    this.selectedGarmentType = garmentType;
                    this.activeTab = 'inventory';
                    this.showMessage(`Filtered to show only ${garmentType} items`, 'info');
                },

                updateGarmentThreshold(garmentType, threshold) {
                    if (!this.settings.garmentThresholds) {
                        this.settings.garmentThresholds = {};
                    }
                    this.settings.garmentThresholds[garmentType] = parseInt(threshold);
                    this.saveSettings();
                },

                saveFilters() {
                    localStorage.setItem('racksFilters', JSON.stringify(this.filters));
                },

                saveActiveTab() {
                    localStorage.setItem('lastActiveTab', this.activeTab);
                },

                applyFilters() {
                    // This function is called when filters change
                    // The computed property handles the actual filtering
                    this.saveFilters();
                },

                clearFilters() {
                    this.filters.priceSort = '';
                    this.filters.dateSort = 'newest-first'; // Reset to default
                    this.filters.status = '';
                    this.filters.dateRange = '';
                    this.filters.customStartDate = '';
                    this.filters.customEndDate = '';
                    this.filters.searchText = '';
                    this.filters.showReturned = false;
                    this.saveFilters();
                },


                applySoldFilters() {
                    // This function is called when sold filters change
                    // The computed property handles the actual filtering
                },

                clearSoldFilters() {
                    this.soldFilters.searchText = '';
                    this.soldFilters.dateSort = 'newest-first';
                    this.soldFilters.priceSort = '';
                    this.soldFilters.profitSort = '';
                    this.soldFilters.dateRange = '';
                    this.soldFilters.customStartDate = '';
                    this.soldFilters.customEndDate = '';
                    this.soldFilters.showReturned = false;
                },

                showMessage(message) {
                    // Use the existing notification system instead of alert
                    this.notification = {
                        show: true,
                        message: message,
                        title: 'Notice',
                        type: 'info'
                    };
                    
                    // Auto-hide after 4 seconds
                    setTimeout(() => {
                        this.notification.show = false;
                    }, 4000);
                },

                showSuccessNotification(message) {
                    // Create and show a toast notification
                    this.notification = {
                        show: true,
                        message: message,
                        type: 'success'
                    };
                    
                    // Auto-hide after 3 seconds
                    setTimeout(() => {
                        this.notification.show = false;
                    }, 3000);
                },

                showCuteUploadNotification(type, title, message) {
                    // Create adorable upload notification
                    this.notification = {
                        show: true,
                        type: type, // 'upload-single', 'upload-bulk', or 'success'
                        title: title,
                        message: message
                    };
                    
                    // Auto-hide after 4 seconds (longer for cute notifications)
                    setTimeout(() => {
                        this.notification.show = false;
                    }, 4000);
                },

                // Unified confirmation system
                showConfirmation(title, message, confirmAction, options = {}) {
                    this.confirmModal = {
                        show: true,
                        title: title,
                        message: message,
                        confirmText: options.confirmText || 'Confirm',
                        cancelText: options.cancelText || 'Cancel',
                        confirmAction: confirmAction,
                        type: options.type || 'default'
                    };
                },

                confirmAction() {
                    if (this.confirmModal.confirmAction) {
                        this.confirmModal.confirmAction();
                    }
                    this.confirmModal.show = false;
                },

                cancelAction() {
                    this.confirmModal.show = false;
                },

                // Replace alert() with animated notification
                showAlert(message, type = 'info') {
                    this.showCuteUploadNotification(type, type === 'error' ? 'Error' : 'Notice', message);
                },

                // Debug function to check localStorage health
                checkStorageHealth() {
                    console.log('ðŸ¥ === STORAGE HEALTH CHECK ===');
                    
                    try {
                        // Check if localStorage is available
                        if (typeof Storage === "undefined") {
                            console.error('âŒ localStorage not supported in this browser');
                            return false;
                        }
                        
                        // Check current data
                        const rawData = localStorage.getItem('resaleItems');
                        console.log('ðŸ“¥ Raw data exists:', !!rawData);
                        console.log('ðŸ“ Raw data size:', rawData ? (rawData.length / 1024).toFixed(2) + ' KB' : '0 KB');
                        
                        if (rawData) {
                            const parsedData = JSON.parse(rawData);
                            console.log('ðŸ“Š Parsed items count:', parsedData.length);
                            console.log('ðŸ” Sample item:', parsedData[0]);
                        }
                        
                        // Check total localStorage usage
                        let totalSize = 0;
                        let keyCount = 0;
                        for (let key in localStorage) {
                            if (localStorage.hasOwnProperty(key)) {
                                totalSize += localStorage[key].length;
                                keyCount++;
                                console.log(`ðŸ”‘ ${key}: ${(localStorage[key].length / 1024).toFixed(2)} KB`);
                            }
                        }
                        console.log('ðŸ“ˆ Total localStorage usage:', (totalSize / 1024).toFixed(2), 'KB across', keyCount, 'keys');
                        
                        // Test write capability
                        const testKey = 'test_write_' + Date.now();
                        const testData = 'test_data_' + Math.random();
                        localStorage.setItem(testKey, testData);
                        const retrieved = localStorage.getItem(testKey);
                        localStorage.removeItem(testKey);
                        
                        if (retrieved === testData) {
                            console.log('âœ… localStorage write/read test passed');
                            return true;
                        } else {
                            console.error('âŒ localStorage write/read test failed');
                            return false;
                        }
                        
                    } catch (error) {
                        console.error('âŒ Storage health check failed:', error);
                        return false;
                    }
                },

                showStatusItems(status) {
                    this.selectedStatus = status;
                    this.statusItems = this.getItemsByStatus(status);
                    this.showStatusModal = true;
                    // Initialize filters for the status modal
                    this.statusFilters = {
                        searchText: '',
                        dateSort: 'newest-first',
                        priceSort: ''
                    };
                },

                showReturnedItems() {
                    this.selectedStatus = 'Returned';
                    this.statusItems = this.returnedItems;
                    this.showStatusModal = true;
                    // Initialize filters for the status modal
                    this.statusFilters = {
                        searchText: '',
                        dateSort: 'newest-first',
                        priceSort: ''
                    };
                },

                showGarmentDetails(garmentType) {
                    this.selectedStatus = garmentType;
                    this.statusItems = this.items.filter(item => item.garmentType === garmentType);
                    this.showStatusModal = true;
                    // Initialize filters for the status modal
                    this.statusFilters = {
                        searchText: '',
                        dateSort: 'newest-first',
                        priceSort: ''
                    };
                },

                showTopBestSellers() {
                    this.selectedStatus = 'Top 3 Best Sellers';
                    this.statusItems = [];
                    
                    // Get top 3 garment types and their items
                    this.topGarmentTypes.forEach(garment => {
                        const garmentItems = this.items.filter(item => item.garmentType === garment.type);
                        this.statusItems = [...this.statusItems, ...garmentItems];
                    });
                    
                    this.showStatusModal = true;
                    this.statusFilters = {
                        searchText: '',
                        dateSort: 'newest-first',
                        priceSort: ''
                    };
                },

                showGarmentBarAlert(garmentType, data) {
                    const threshold = this.settings.garmentThresholds?.[garmentType] || this.settings.lowStockThreshold || 5;
                    const isLowStock = this.settings.lowStockAlerts && data.inventory <= threshold;
                    
                    if (isLowStock) {
                        this.showAlert(
                            `${garmentType}: Low Stock Alert!\n\nCurrent stock: ${data.inventory} items\nThreshold: ${threshold} items\n\nClick OK to view all ${garmentType} items.`,
                            'warning'
                        );
                        
                        // After alert, show the garment details
                        setTimeout(() => {
                            this.showGarmentDetails(garmentType);
                        }, 100);
                    } else {
                        // Just show garment details if not low stock
                        this.showGarmentDetails(garmentType);
                    }
                },

                applyStatusFilters() {
                    // This function is called when status modal filters change
                    // The computed property handles the actual filtering
                },

                clearStatusFilters() {
                    this.statusFilters.searchText = '';
                    this.statusFilters.priceSort = '';
                    this.statusFilters.dateRange = '';
                },

                get hasActiveStatusFilters() {
                    return this.statusFilters.searchText || 
                           this.statusFilters.priceSort || 
                           this.statusFilters.dateRange;
                },

                getGarmentEmoji(garmentType) {
                    const emojiMap = {
                        'Shirt': 'ðŸ‘”',
                        'Skirt': 'ðŸ‘—',
                        'Shorts': 'ðŸ©³',
                        'Pants': 'ðŸ‘–',
                        'Dress': 'ðŸ‘—',
                        'Bag': 'ðŸ‘œ',
                        'Belt': 'ðŸ‘ž',
                        'Shoes': 'ðŸ‘Ÿ',
                        'Jacket': 'ðŸ§¥',
                        'Sweater': 'ðŸ§¶',
                        'Accessories': 'ðŸ’',
                        'Other': 'ðŸ‘•'
                    };
                    return emojiMap[garmentType] || 'ðŸ‘•';
                },

                getPerformancePercentage(garment) {
                    // Calculate sell-through rate: (sold / total) * 100
                    if (garment.count === 0) return 0;
                    
                    const percentage = ((garment.sold / garment.count) * 100);
                    return Math.round(percentage * 10) / 10; // Round to 1 decimal place
                },

                getPerformanceClass(garment) {
                    const percentage = this.getPerformancePercentage(garment);
                    if (percentage >= 70) return 'high-performance';
                    if (percentage >= 30) return 'medium-performance';
                    return 'low-performance';
                },

                // Debug function to check garment data
                debugGarmentData() {
                    console.log('=== GARMENT DEBUG INFO ===');
                    console.log('Total items:', this.items.length);
                    console.log('Items with garment types:', this.items.filter(i => i.garmentType).length);
                    console.log('Items without garment types:', this.items.filter(i => !i.garmentType).length);
                    
                    console.log('\nSample items:');
                    this.items.slice(0, 5).forEach((item, index) => {
                        console.log(`Item ${index + 1}:`, {
                            id: item.id,
                            garmentType: item.garmentType,
                            status: item.status,
                            description: item.description
                        });
                    });
                    
                    console.log('\nGarment type stats:', this.garmentTypeStats);
                    console.log('Top garment types:', this.topGarmentTypes);
                    
                    // Check localStorage directly
                    console.log('\n=== LOCALSTORAGE CHECK ===');
                    const rawData = localStorage.getItem('resaleItems');
                    if (rawData) {
                        try {
                            const savedItems = JSON.parse(rawData);
                            console.log('Items in localStorage:', savedItems.length);
                            console.log('Items with garment types in localStorage:', savedItems.filter(i => i.garmentType).length);
                            
                            console.log('\nFirst 3 items from localStorage:');
                            savedItems.slice(0, 3).forEach((item, index) => {
                                console.log(`Saved Item ${index + 1}:`, {
                                    id: item.id,
                                    garmentType: item.garmentType,
                                    status: item.status,
                                    description: item.description
                                });
                            });
                        } catch (e) {
                            console.error('Error parsing localStorage data:', e);
                        }
                    } else {
                        console.log('No data in localStorage');
                    }
                    
                    // Test save/load cycle
                    console.log('\n=== TESTING SAVE/LOAD CYCLE ===');
                    this.testSaveLoadCycle();
                    
                    console.log('===========================');
                },

                // Test function to verify save/load cycle
                testSaveLoadCycle() {
                    if (this.items.length === 0) {
                        console.log('No items to test with');
                        return;
                    }
                    
                    // Test with first item that has a garment type
                    const testItem = this.items.find(i => i.garmentType);
                    if (!testItem) {
                        console.log('No items with garment types to test with');
                        return;
                    }
                    
                    console.log('Testing with item:', testItem.id);
                    console.log('Original garment type:', testItem.garmentType);
                    
                    // Create a test save
                    const testKey = 'test_garment_save';
                    localStorage.setItem(testKey, JSON.stringify([testItem]));
                    
                    // Load it back
                    const loadedItems = JSON.parse(localStorage.getItem(testKey));
                    console.log('Loaded garment type:', loadedItems[0].garmentType);
                    
                    // Clean up
                    localStorage.removeItem(testKey);
                    
                    // Compare
                    if (testItem.garmentType === loadedItems[0].garmentType) {
                        console.log('âœ… Save/load cycle test PASSED');
                    } else {
                        console.log('âŒ Save/load cycle test FAILED');
                    }
                },

                // Repair function to fix items missing garment types
                repairGarmentTypes() {
                    console.log('ðŸ”§ === REPAIRING GARMENT TYPES ===');
                    
                    const itemsWithoutGarmentType = this.items.filter(item => !item.garmentType);
                    console.log('Found', itemsWithoutGarmentType.length, 'items without garment types');
                    
                    if (itemsWithoutGarmentType.length === 0) {
                        this.showAlert('All items already have garment types! âœ…', 'success');
                        return;
                    }
                    
                    this.showConfirmation(
                        'Repair Garment Types',
                        `Found ${itemsWithoutGarmentType.length} items without garment types. Set them to "Other" as default?`,
                        () => {
                            let repairedCount = 0;
                            this.items.forEach(item => {
                                if (!item.garmentType) {
                                    item.garmentType = 'Other';
                                    repairedCount++;
                                }
                            });
                            
                            this.saveItems();
                            
                            this.showAlert(`Repaired ${repairedCount} items! They are now set to "Other" garment type. You can edit them individually to set the correct type.`, 'success');
                            
                            console.log('âœ… Repair completed:', repairedCount, 'items fixed');
                        },
                        { confirmText: 'Repair Items' }
                    );
                },

                openItemDetail(item) {
                    // Close status modal and open edit modal for the item
                    this.showStatusModal = false;
                    this.openEditModal(item);
                },

                handleSignIn() {
                    // Placeholder for sign-in functionality
                    this.showAlert('Sign-in functionality coming soon! For now, your data is safely stored locally on this device.', 'info');
                    this.signInForm.email = '';
                    this.signInForm.password = '';
                    this.signInForm.rememberMe = false;
                },

                addPaymentMethod() {
                    if (this.newPaymentMethod.name && this.newPaymentMethod.qrUrl) {
                        let finalQrUrl = this.newPaymentMethod.qrUrl.trim();
                        
                        // Check if the URL is a direct image URL or needs QR generation
                        if (!this.isImageUrl(finalQrUrl)) {
                            // Generate QR code for the URL
                            finalQrUrl = this.generateQRCodeUrl(finalQrUrl);
                            console.log('Generated QR code URL for:', this.newPaymentMethod.qrUrl, 'â†’', finalQrUrl);
                        }
                        
                        const paymentMethod = {
                            id: Date.now(),
                            name: this.newPaymentMethod.name.trim(),
                            qrUrl: finalQrUrl,
                            originalUrl: this.newPaymentMethod.qrUrl.trim(), // Store original URL
                            dateAdded: new Date().toISOString(),
                            error: false
                        };
                        
                        this.paymentMethods.push(paymentMethod);
                        this.savePaymentMethods();
                        
                        // Reset form
                        this.newPaymentMethod = {
                            name: '',
                            qrUrl: ''
                        };
                        
                        this.showAlert('Payment method added successfully! QR code generated from your URL.', 'success');
                    }
                },

                // Check if URL is a direct image URL
                isImageUrl(url) {
                    const imageExtensions = ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp'];
                    const lowerUrl = url.toLowerCase();
                    return imageExtensions.some(ext => lowerUrl.includes(ext)) || lowerUrl.includes('data:image');
                },

                // Generate QR code URL from any URL
                generateQRCodeUrl(url) {
                    // Use QR Server API (free service) to generate QR codes
                    const qrApiUrl = 'https://api.qrserver.com/v1/create-qr-code/';
                    const params = new URLSearchParams({
                        size: '300x300',
                        data: url,
                        format: 'png',
                        ecc: 'M', // Error correction level
                        margin: '10'
                    });
                    
                    return qrApiUrl + '?' + params.toString();
                },

                removePaymentMethod(id) {
                    this.showConfirmation(
                        'Remove Payment Method',
                        'Are you sure you want to remove this payment method?',
                        () => {
                        this.paymentMethods = this.paymentMethods.filter(method => method.id !== id);
                        this.savePaymentMethods();
                        this.showMessage('Payment method removed successfully!');
                        },
                        { type: 'danger', confirmText: 'Remove' }
                    );
                },

                savePaymentMethods() {
                    localStorage.setItem('paymentMethods', JSON.stringify(this.paymentMethods));
                },

                async handleQrPhotoUpload(event) {
                    const file = event.target.files[0];
                    if (!file) return;

                    try {
                        // Compress and convert to base64
                        const compressedDataURL = await this.compressImage(file, 800, 0.8);
                        
                        // Set the QR URL to the compressed image
                        this.newPaymentMethod.qrUrl = compressedDataURL;
                        
                        // Hide URL input since we have a photo
                        this.showQrUrlInput = false;
                        
                        console.log('QR photo uploaded and compressed successfully');
                        
                    } catch (error) {
                        console.error('Error processing QR photo:', error);
                        this.showAlert('Error processing QR photo. Please try again.', 'error');
                    }
                },

                showPaymentFullscreen(method) {
                    this.selectedPaymentMethod = method;
                    this.showQRModal = true;
                },

                generateReport(type) {
                    console.log('Generating report:', type);
                    
                    const reportData = {
                        timestamp: new Date().toISOString(),
                        type: type,
                        businessName: 'Racks Resale Business',
                        totalItems: this.items.length,
                        soldItems: this.soldItems.length,
                        inventoryItems: this.inventoryItems.length,
                        totalRevenue: this.totalRevenue,
                        totalProfit: this.totalProfit,
                        itemsThisWeek: this.itemsThisWeek,
                        soldThisWeek: this.soldThisWeek,
                        garmentTypeStats: this.garmentTypeStats,
                        topGarmentTypes: this.topGarmentTypes
                    };

                    let reportContent = '';
                    
                    switch(type) {
                        case 'inventory':
                            reportContent = this.generateInventoryReport(reportData);
                            break;
                        case 'garments':
                            reportContent = this.generateGarmentReport(reportData);
                            break;
                    }

                    // Create and download the report
                    const blob = new Blob([reportContent], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `racks-${type}-report-${new Date().toISOString().split('T')[0]}.txt`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    this.showCuteUploadNotification('success', 'Report Generated!', `Your ${type} report has been downloaded! ðŸ“Šâœ¨`);
                },



                generateInventoryReport(data) {
                    let content = `
RACKS RESALE BUSINESS - INVENTORY REPORT
Generated: ${new Date(data.timestamp).toLocaleString()}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“¦ INVENTORY OVERVIEW
â€¢ Total Items in Inventory: ${data.inventoryItems}
â€¢ Items by Status:
  - Missing Info: ${this.getItemsByStatus('Missing Info').length}
  - Itemized: ${this.getItemsByStatus('Itemized').length}
  - Sanitize: ${this.getItemsByStatus('Sanitize').length}
  - Racked: ${this.getItemsByStatus('Racked').length}
  - Listed: ${this.getItemsByStatus('Listed').length}

ðŸ’µ INVENTORY VALUE
â€¢ Total Investment: $${this.inventoryItems.reduce((sum, item) => sum + (item.purchasePrice || 0), 0).toFixed(2)}
â€¢ Potential Revenue: $${this.inventoryItems.reduce((sum, item) => sum + (item.listingPrice || 0), 0).toFixed(2)}

ðŸ“‹ CURRENT INVENTORY ITEMS
                    `;

                    this.inventoryItems.forEach((item, index) => {
                        content += `${index + 1}. ${item.description || 'Untitled'} - Status: ${item.status} - Purchase: $${(item.purchasePrice || 0).toFixed(2)}\n`;
                    });

                    content += `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Report generated by Racks Resale Management System
                    `;
                    
                    return content.trim();
                },


                generateGarmentReport(data) {
                    let content = `
RACKS RESALE BUSINESS - GARMENT TYPE ANALYSIS REPORT
Generated: ${new Date(data.timestamp).toLocaleString()}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ‘” GARMENT TYPE SUMMARY
â€¢ Total Garment Types: ${Object.keys(data.garmentTypeStats).length}
â€¢ Total Items Tracked: ${Object.values(data.garmentTypeStats).reduce((sum, stats) => sum + stats.count, 0)}
â€¢ Total Investment: $${Object.values(data.garmentTypeStats).reduce((sum, stats) => sum + stats.totalInvestment, 0).toFixed(2)}
â€¢ Total Revenue: $${Object.values(data.garmentTypeStats).reduce((sum, stats) => sum + stats.totalRevenue, 0).toFixed(2)}

ðŸ“Š TOP PERFORMING GARMENT TYPES
                    `;

                    data.topGarmentTypes.forEach((garment, index) => {
                        const sellThrough = garment.count > 0 ? ((garment.sold / garment.count) * 100).toFixed(1) : '0.0';
                        content += `${index + 1}. ${garment.type}
   â€¢ Total Items: ${garment.count}
   â€¢ Sold: ${garment.sold} (${sellThrough}% sell-through)
   â€¢ In Stock: ${garment.inventory}
   â€¢ Profit: $${garment.profit.toFixed(2)}

`;
                    });

                    content += `ðŸ“ˆ DETAILED GARMENT BREAKDOWN
                    `;

                    Object.entries(data.garmentTypeStats)
                        .sort((a, b) => b[1].count - a[1].count)
                        .forEach(([type, stats]) => {
                            const avgInvestment = stats.count > 0 ? (stats.totalInvestment / stats.count).toFixed(2) : '0.00';
                            const avgRevenue = stats.sold > 0 ? (stats.totalRevenue / stats.sold).toFixed(2) : '0.00';
                            const sellThrough = stats.count > 0 ? ((stats.sold / stats.count) * 100).toFixed(1) : '0.0';
                            content += `
${type.toUpperCase()}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Total Count: ${stats.count}
â€¢ Sold: ${stats.sold} (${sellThrough}% sell-through rate)
â€¢ In Inventory: ${stats.inventory}
â€¢ Total Investment: $${stats.totalInvestment.toFixed(2)}
â€¢ Total Revenue: $${stats.totalRevenue.toFixed(2)}
â€¢ Total Profit: $${(stats.totalRevenue - stats.totalInvestment).toFixed(2)}
â€¢ Avg Investment per Item: $${avgInvestment}
â€¢ Avg Sale Price: $${avgRevenue}
`;
                        });

                    content += `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ’¡ INSIGHTS & RECOMMENDATIONS
`;

                    // Add low stock warnings if enabled
                    if (this.settings.lowStockAlerts && this.settings.alertInReports && this.lowStockGarmentTypes.length > 0) {
                        content += `
ðŸš¨ LOW STOCK ALERTS
`;
                        this.lowStockGarmentTypes.forEach(item => {
                            content += `â€¢ ${item.type}: Only ${item.inventory} items remaining (threshold: ${item.threshold})\n`;
                        });
                        content += `\n`;
                    }

                    // Add recommendations based on data
                    const bestPerformer = data.topGarmentTypes[0];
                    const worstPerformer = data.topGarmentTypes[data.topGarmentTypes.length - 1];
                    
                    if (bestPerformer) {
                        content += `â€¢ Best Performer: ${bestPerformer.type} with $${bestPerformer.profit.toFixed(2)} profit\n`;
                    }
                    
                    if (worstPerformer && worstPerformer.profit < 0) {
                        content += `â€¢ Needs Attention: ${worstPerformer.type} with $${worstPerformer.profit.toFixed(2)} loss\n`;
                    }

                    // Find slow-moving inventory
                    const slowMovers = Object.entries(data.garmentTypeStats)
                        .filter(([type, stats]) => {
                            const sellThrough = stats.count > 0 ? (stats.sold / stats.count) : 0;
                            return sellThrough < 0.3 && stats.inventory > 0;
                        })
                        .map(([type]) => type);

                    if (slowMovers.length > 0) {
                        content += `â€¢ Slow Movers: ${slowMovers.join(', ')} - consider promotions or markdown\n`;
                    }

                    content += `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Report generated by Racks Resale Management System
                    `;
                    
                    return content.trim();
                },

                handleQRError(event, method) {
                    console.error('Failed to load QR code for', method.name, method.qrUrl);
                    method.error = true;
                },

                copyPaymentInfo(method) {
                    const info = method.originalUrl 
                        ? `Payment Method: ${method.name}\nPayment URL: ${method.originalUrl}\nQR Code: ${method.qrUrl}`
                        : `Payment Method: ${method.name}\nQR Code: ${method.qrUrl}`;
                    
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(info).then(() => {
                            this.showAlert('Payment info copied to clipboard!', 'success');
                        }).catch(() => {
                            this.fallbackCopyTextToClipboard(info);
                        });
                    } else {
                        this.fallbackCopyTextToClipboard(info);
                    }
                },

                fallbackCopyTextToClipboard(text) {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    
                    try {
                        document.execCommand('copy');
                        this.showMessage('Payment info copied to clipboard!');
                    } catch (err) {
                        this.showMessage('Failed to copy payment info');
                    }
                    
                    document.body.removeChild(textArea);
                },


                async compressAndConvertImage(file) {
                    return new Promise((resolve, reject) => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        const img = new Image();
                        
                        img.onload = () => {
                            // Calculate new dimensions (max 800px width/height)
                            const maxSize = 800;
                            let { width, height } = img;
                            
                            if (width > height) {
                                if (width > maxSize) {
                                    height = (height * maxSize) / width;
                                    width = maxSize;
                                }
                            } else {
                                if (height > maxSize) {
                                    width = (width * maxSize) / height;
                                    height = maxSize;
                                }
                            }
                            
                            // Set canvas size and draw compressed image
                            canvas.width = width;
                            canvas.height = height;
                            ctx.drawImage(img, 0, 0, width, height);
                            
                            // Convert to compressed data URL (JPEG, 0.7 quality)
                            const compressedDataURL = canvas.toDataURL('image/jpeg', 0.7);
                            resolve(compressedDataURL);
                        };
                        
                        img.onerror = reject;
                        
                        // Create object URL for the image
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            img.src = e.target.result;
                        };
                        reader.onerror = reject;
                        reader.readAsDataURL(file);
                    });
                },

                // Fast compression specifically for bulk uploads
                async fastBulkCompressImage(file) {
                    return new Promise((resolve, reject) => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        const img = new Image();
                        
                        img.onload = () => {
                            let { width, height } = img;
                            
                            // Aggressive compression for bulk uploads - prioritize speed
                            const maxSize = 600; // Smaller size for faster processing
                            const quality = 0.5; // Lower quality for speed
                            
                            // Calculate new dimensions while maintaining aspect ratio
                            const ratio = Math.min(maxSize / width, maxSize / height);
                            if (ratio < 1) {
                                width = Math.floor(width * ratio);
                                height = Math.floor(height * ratio);
                            }
                            
                            // Set canvas size and draw image
                            canvas.width = width;
                            canvas.height = height;
                            
                            // Disable smoothing for speed
                            ctx.imageSmoothingEnabled = false;
                            ctx.drawImage(img, 0, 0, width, height);
                            
                            // Fast compression
                            const compressedDataURL = canvas.toDataURL('image/jpeg', quality);
                            
                            // Clean up
                            URL.revokeObjectURL(img.src);
                            resolve(compressedDataURL);
                        };
                        
                        img.onerror = () => {
                            URL.revokeObjectURL(img.src);
                            reject(new Error('Failed to load image'));
                        };
                        
                        // Create object URL for faster loading
                        img.src = URL.createObjectURL(file);
                    });
                },

                async smartCompressImage(file, isBulkUpload = false) {
                    return new Promise((resolve, reject) => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        const img = new Image();
                        
                        img.onload = () => {
                            let { width, height } = img;
                            let quality, maxSize;
                            
                            // Smart compression based on context and original file size
                            const fileSizeMB = file.size / (1024 * 1024);
                            
                            if (isBulkUpload) {
                                // For bulk uploads: balance quality and speed
                                if (fileSizeMB > 5) {
                                    maxSize = 800; // Larger files get more compression
                                    quality = 0.6;
                                } else {
                                    maxSize = 1000; // Smaller files keep more quality
                                    quality = 0.75;
                                }
                            } else {
                                // For single uploads: prioritize quality
                                if (fileSizeMB > 10) {
                                    maxSize = 1200; // Very large files
                                    quality = 0.8;
                                } else {
                                    maxSize = 1400; // Normal files get high quality
                                    quality = 0.9;
                                }
                            }
                            
                            // Calculate new dimensions while maintaining aspect ratio
                            const ratio = Math.min(maxSize / width, maxSize / height);
                            if (ratio < 1) {
                                width = Math.floor(width * ratio);
                                height = Math.floor(height * ratio);
                            }
                            
                            // Set canvas size and draw image
                            canvas.width = width;
                            canvas.height = height;
                            
                            // Enable high-quality smoothing
                            ctx.imageSmoothingEnabled = true;
                            ctx.imageSmoothingQuality = 'high';
                            ctx.drawImage(img, 0, 0, width, height);
                            
                            // Use smart quality compression
                            const compressedDataURL = canvas.toDataURL('image/jpeg', quality);
                            
                            // Clean up blob URL
                            URL.revokeObjectURL(img.src);
                            resolve(compressedDataURL);
                        };
                        
                        img.onerror = () => {
                            URL.revokeObjectURL(img.src);
                            reject(new Error('Image load failed'));
                        };
                        
                        // Direct blob URL for fastest loading
                        img.src = URL.createObjectURL(file);
                    });
                },

                async detectPriceInImage(imageDataURL) {
                    try {
                        console.log('detectPriceInImage called');
                        console.log('imageDataURL type:', typeof imageDataURL);
                        console.log('imageDataURL exists:', !!imageDataURL);
                        if (imageDataURL && typeof imageDataURL === 'string') {
                            console.log('imageDataURL starts with:', imageDataURL.substring(0, 50));
                        }
                        
                        this.ocrProcessing = true;
                        this.ocrResults = null;
                        this.showRobotNotification = true;
                        this.robotNotificationState = 'scanning';
                        
                        // Convert data URL to base64 (remove the data:image/...;base64, prefix)
                        if (!imageDataURL || typeof imageDataURL !== 'string') {
                            console.error('Invalid imageDataURL:', imageDataURL);
                            throw new Error('Invalid image data - expected string, got ' + typeof imageDataURL);
                        }
                        const base64Image = imageDataURL.split(',')[1];
                        
                        if (!base64Image) {
                            throw new Error('Failed to extract base64 data from image');
                        }
                        
                        // Prepare the Gemini API request
                        const requestBody = {
                            contents: [
                                {
                                    parts: [
                        {
                            text: "Analyze this image and extract: 1) All visible price tags, price stickers, or monetary values. Look for dollar signs ($), numbers with decimals that could be prices. 2) Identify the type of clothing/item shown. Return ONLY a JSON object with this exact format: {\"prices\": [array of numeric values], \"suggestedPrice\": lowest_price_found, \"garmentType\": \"detected_type\"}. For garmentType, choose from these options only: \"Shirt\", \"Skirt\", \"Shorts\", \"Pants\", \"Dress\", \"Bag\", \"Belt\", \"Shoes\", \"Jacket\", \"Sweater\", \"Accessories\", \"Other\". If unclear, use \"Other\". If no prices found, use null for suggestedPrice and empty array for prices. Focus on price tags, not model numbers."
                        },
                                        {
                                            inline_data: {
                                                mime_type: "image/jpeg",
                                                data: base64Image
                                            }
                                        }
                                    ]
                                }
                            ],
                            generationConfig: {
                                temperature: 0.1,
                                maxOutputTokens: 2000,
                                responseMimeType: "application/json",
                                thinkingConfig: {
                                    thinkingBudget: 0
                                }
                            }
                        };
                        
                        console.log('Sending image to Gemini API for price detection...');
                        console.log('Base64 image length:', base64Image.length);
                        console.log('Using model: gemini-2.5-flash');
                        console.log('Config:', { maxOutputTokens: 2000, thinkingBudget: 0 });
                        
                        // Use proxy endpoint (no API key needed from client side)
                        // The proxy will be at /api/gemini-proxy when deployed to Vercel
                        const apiEndpoint = '/api/gemini-proxy';
                        
                        // Make the API call through the proxy
                        const response = await fetch(apiEndpoint, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(requestBody)
                        });
                        
                        console.log('API Response status:', response.status, response.statusText);
                        
                        if (!response.ok) {
                            const errorBody = await response.text();
                            console.error('API Error body:', errorBody);
                            throw new Error(`Gemini API error: ${response.status} ${response.statusText}`);
                        }
                        
                        const data = await response.json();
                        console.log('Gemini API response:', data);
                        console.log('Response has candidates:', !!data.candidates);
                        console.log('finishReason:', data.candidates?.[0]?.finishReason);
                        
                        // Extract the response text
                        if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0]) {
                            const responseText = data.candidates[0].content.parts[0].text;
                            console.log('Gemini response text:', responseText);
                            console.log('Response text length:', responseText.length);
                            
                            try {
                                // Try to parse the JSON response
                                const cleanedResponse = responseText.replace(/```json\n?|\n?```/g, '').trim();
                                const parsedResult = JSON.parse(cleanedResponse);
                                
                                // Validate and process the results
                                let prices = parsedResult.prices || [];
                                prices = prices.filter(price => typeof price === 'number' && price > 0 && price < 10000);
                                
                                this.ocrResults = {
                                    text: responseText,
                                    prices: prices,
                                    suggestedPrice: parsedResult.suggestedPrice || (prices.length > 0 ? Math.min(...prices) : null),
                                    garmentType: parsedResult.garmentType || null
                                };
                                
                                console.log('Parsed ocrResults:', this.ocrResults);
                                
                                // Set success state if we found useful data
                                if (this.ocrResults.suggestedPrice || this.ocrResults.garmentType) {
                                    this.robotNotificationState = 'success';
                                    console.log('âœ… AI scan successful');
                                } else {
                                    this.robotNotificationState = 'error';
                                    console.log('âš ï¸ No price or garment type found');
                                }
                                
                            } catch (parseError) {
                                console.error('Failed to parse Gemini JSON response:', parseError);
                                
                                // Fallback: try to extract prices using regex from the response text
                                const pricePatterns = [
                                    /\$\s*(\d+(?:\.\d{2})?)/g,           // $5.99, $10, $ 5.99
                                    /(\d+(?:\.\d{2})?)\s*\$/g,           // 5.99$, 10$
                                    /(\d+(?:\.\d{2})?)\s*dollars?/gi,    // 5.99 dollars, 10 dollar
                                    /price\s*:?\s*\$?\s*(\d+(?:\.\d{2})?)/gi, // Price: $5.99, Price 10
                                    /(\d+(?:\.\d{2})?)\s*each/gi,        // 5.99 each, 10 each
                                ];
                                
                                const foundPrices = [];
                                
                                for (const pattern of pricePatterns) {
                                    let match;
                                    while ((match = pattern.exec(responseText)) !== null) {
                                        const price = parseFloat(match[1]);
                                        if (price > 0 && price < 10000) {
                                            foundPrices.push(price);
                                        }
                                    }
                                }
                                
                                const uniquePrices = [...new Set(foundPrices)].sort((a, b) => a - b);
                                
                                // Try to extract garment type from response text
                                const garmentTypes = ["Shirt", "Skirt", "Shorts", "Pants", "Dress", "Bag", "Belt", "Shoes", "Jacket", "Sweater", "Accessories"];
                                let detectedGarmentType = null;
                                
                                for (const type of garmentTypes) {
                                    if (responseText.toLowerCase().includes(type.toLowerCase())) {
                                        detectedGarmentType = type;
                                        break;
                                    }
                                }
                                
                                this.ocrResults = {
                                    text: responseText,
                                    prices: uniquePrices,
                                    suggestedPrice: uniquePrices.length > 0 ? uniquePrices[0] : null,
                                    garmentType: detectedGarmentType
                                };
                                
                                // Set success state if we found useful data
                                if (this.ocrResults.suggestedPrice || this.ocrResults.garmentType) {
                                    this.robotNotificationState = 'success';
                                } else {
                                    this.robotNotificationState = 'error';
                                }
                            }
                        } else {
                            throw new Error('Invalid response format from Gemini API');
                        }
                        
                        return this.ocrResults;
                        
                    } catch (error) {
                        console.error('Gemini OCR Error:', error);
                        console.error('Error stack:', error.stack);
                        this.ocrResults = { error: 'Could not read price from image: ' + error.message };
                        this.robotNotificationState = 'error';
                        
                        // Show error alert to user
                        this.showAlert('AI scan failed: ' + error.message, 'error');
                        
                        return null;
                    } finally {
                        this.ocrProcessing = false;
                        // Hide notification after a delay to let users see the result
                        setTimeout(() => {
                            this.showRobotNotification = false;
                        }, 2500);
                    }
                },

                async detectPriceFromPhoto() {
                    console.log('detectPriceFromPhoto called');
                    console.log('newItem.photos:', this.newItem.photos);
                    console.log('photos array length:', this.newItem.photos?.length);
                    console.log('photos array type:', Array.isArray(this.newItem.photos));
                    
                    if (!this.newItem.photos || !this.newItem.photos.length) {
                        this.showAlert('Please add a photo first', 'error');
                        return;
                    }
                    
                    // Sequential scanning: try each photo until we find one with a price
                    for (let i = 0; i < this.newItem.photos.length; i++) {
                        console.log(`Scanning photo ${i + 1} of ${this.newItem.photos.length} for price tags...`);
                        
                        const photoData = this.newItem.photos[i];
                        console.log(`Photo ${i + 1} exists:`, !!photoData);
                        
                        if (!photoData) {
                            console.warn(`Photo ${i + 1} is empty, skipping...`);
                            continue;
                        }
                        
                        const result = await this.detectPriceInImage(photoData);
                        
                        if (result && (result.suggestedPrice || result.garmentType)) {
                            let message = `Detected from photo ${i + 1}: `;
                            let detectedItems = [];
                            
                            // Auto-fill the purchase price field if detected
                            if (result.suggestedPrice) {
                                this.newItem.purchasePrice = result.suggestedPrice;
                                detectedItems.push(`Price $${result.suggestedPrice}`);
                                
                                // Update listing price if auto-pricing is enabled
                                if (this.newItem.useAutoPricing) {
                                    this.newItem.listingPrice = this.calculateListingPrice(this.newItem.purchasePrice);
                                }
                            }
                            
                            // Auto-fill the garment type field if detected and not already set
                            if (result.garmentType && !this.newItem.garmentType) {
                                this.newItem.garmentType = result.garmentType;
                                detectedItems.push(`Type: ${result.garmentType}`);
                            }
                            
                            if (detectedItems.length > 0) {
                                message += detectedItems.join(', ');
                                console.log(`Detection results from photo ${i + 1}:`, result);
                                this.showAlert(message, 'success');
                                return; // Stop scanning once we find useful data
                            }
                        }
                    }
                    
                    // If no useful data was found in any photo
                    if (!this.ocrResults || (!this.ocrResults.suggestedPrice && !this.ocrResults.garmentType)) {
                        this.showAlert('No price tags or garment types detected in any of the photos. Try retaking photos with clear price tags and items visible.', 'warning');
                    }
                },

                async detectPriceFromEditPhoto() {
                    console.log('detectPriceFromEditPhoto called');
                    console.log('editItem.photos:', this.editItem.photos);
                    console.log('photos array length:', this.editItem.photos?.length);
                    console.log('photos array type:', Array.isArray(this.editItem.photos));
                    
                    if (!this.editItem.photos || !this.editItem.photos.length) {
                        this.showAlert('Please add a photo first', 'error');
                        return;
                    }
                    
                    // Sequential scanning: try each photo until we find one with a price
                    for (let i = 0; i < this.editItem.photos.length; i++) {
                        console.log(`Scanning edit photo ${i + 1} of ${this.editItem.photos.length} for price tags...`);
                        
                        const photoData = this.editItem.photos[i];
                        console.log(`Edit photo ${i + 1} exists:`, !!photoData);
                        
                        if (!photoData) {
                            console.warn(`Edit photo ${i + 1} is empty, skipping...`);
                            continue;
                        }
                        
                        const result = await this.detectPriceInImage(photoData);
                        
                        if (result && (result.suggestedPrice || result.garmentType)) {
                            let message = `Detected from photo ${i + 1}: `;
                            let detectedItems = [];
                            
                            // Auto-fill the purchase price field if detected
                            if (result.suggestedPrice) {
                                this.editItem.purchasePrice = result.suggestedPrice;
                                detectedItems.push(`Price $${result.suggestedPrice}`);
                                
                                // Update listing price if auto-pricing is enabled
                                if (this.editItem.useAutoPricing) {
                                    this.editItem.listingPrice = this.calculateListingPrice(this.editItem.purchasePrice);
                                }
                            }
                            
                            // Auto-fill the garment type field if detected and not already set
                            if (result.garmentType && !this.editItem.garmentType) {
                                this.editItem.garmentType = result.garmentType;
                                detectedItems.push(`Type: ${result.garmentType}`);
                            }
                            
                            if (detectedItems.length > 0) {
                                message += detectedItems.join(', ');
                                console.log(`Detection results from edit photo ${i + 1}:`, result);
                                this.showAlert(message, 'success');
                                return; // Stop scanning once we find useful data
                            }
                        }
                    }
                    
                    // If no useful data was found in any photo
                    if (!this.ocrResults || (!this.ocrResults.suggestedPrice && !this.ocrResults.garmentType)) {
                        this.showAlert('No price tags or garment types detected in any of the photos. Try retaking photos with clear price tags and items visible.', 'warning');
                    }
                },

                generateAutoTags(description, source, price) {
                    const tags = [];
                    
                    // Remove price-based tags - they were creating unwanted tags like 'affordable', 'under-15'
                    // Users can add their own pricing tags manually if needed
                    
                    // Source-based tags
                    if (source) {
                        const sourceWords = source.toLowerCase().split(/\s+/);
                        sourceWords.forEach(word => {
                            if (word.length > 2) tags.push(word);
                        });
                        
                        // Common source categories
                        if (source.toLowerCase().includes('thrift')) tags.push('thrifted', 'secondhand');
                        if (source.toLowerCase().includes('estate')) tags.push('estate-sale', 'vintage');
                        if (source.toLowerCase().includes('garage')) tags.push('garage-sale', 'yard-sale');
                        if (source.toLowerCase().includes('goodwill')) tags.push('goodwill', 'thrift-store');
                        if (source.toLowerCase().includes('salvation')) tags.push('salvation-army', 'thrift-store');
                    }
                    
                    // Description-based tags
                    if (description) {
                        const desc = description.toLowerCase();
                        
                        // Clothing categories
                        const clothingTypes = ['shirt', 'dress', 'pants', 'jeans', 'jacket', 'coat', 'sweater', 'hoodie', 'blouse', 'skirt', 'shorts', 'top', 'tee', 't-shirt'];
                        clothingTypes.forEach(type => {
                            if (desc.includes(type)) tags.push(type, 'clothing');
                        });
                        
                        // Brands (common resale brands)
                        const brands = ['nike', 'adidas', 'lululemon', 'anthropologie', 'free people', 'zara', 'h&m', 'forever 21', 'urban outfitters', 'american eagle', 'hollister', 'abercrombie', 'gap', 'old navy', 'target', 'walmart'];
                        brands.forEach(brand => {
                            if (desc.includes(brand)) tags.push(brand, 'branded');
                        });
                        
                        // Colors
                        const colors = ['black', 'white', 'red', 'blue', 'green', 'yellow', 'pink', 'purple', 'orange', 'brown', 'gray', 'grey', 'navy', 'beige', 'tan'];
                        colors.forEach(color => {
                            if (desc.includes(color)) tags.push(color);
                        });
                        
                        // Sizes
                        const sizes = ['xs', 'small', 'medium', 'large', 'xl', 'xxl', 'size 0', 'size 2', 'size 4', 'size 6', 'size 8', 'size 10', 'size 12', 'size 14', 'size 16'];
                        sizes.forEach(size => {
                            if (desc.includes(size)) tags.push(size.replace(' ', '-'));
                        });
                        
                        // Conditions/descriptors
                        if (desc.includes('vintage')) tags.push('vintage', 'retro');
                        if (desc.includes('new') || desc.includes('nwt')) tags.push('new', 'unused');
                        if (desc.includes('designer')) tags.push('designer', 'luxury');
                        if (desc.includes('handmade')) tags.push('handmade', 'artisan');
                        if (desc.includes('leather')) tags.push('leather');
                        if (desc.includes('denim')) tags.push('denim');
                        if (desc.includes('cotton')) tags.push('cotton');
                        if (desc.includes('wool')) tags.push('wool');
                        if (desc.includes('silk')) tags.push('silk');
                    }
                    
                    // Remove duplicates and return
                    return [...new Set(tags)];
                },

                 exportData() {
                     const data = {
                         items: this.items,
                         settings: this.settings,
                         exportDate: new Date().toISOString(),
                         version: '1.0'
                     };
                     
                     const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                     const url = URL.createObjectURL(blob);
                     const a = document.createElement('a');
                     a.href = url;
                     a.download = `racks-backup-${new Date().toISOString().split('T')[0]}.json`;
                     document.body.appendChild(a);
                     a.click();
                     document.body.removeChild(a);
                     URL.revokeObjectURL(url);
                 },

                 handleImportFile(event) {
                     const file = event.target.files[0];
                     if (!file) return;

                     // Check if it's a JSON file
                     if (!file.name.toLowerCase().endsWith('.json')) {
                         this.showAlert('Please select a valid JSON backup file.', 'error');
                         return;
                     }

                     const reader = new FileReader();
                     reader.onload = (e) => {
                         try {
                             const importedData = JSON.parse(e.target.result);
                             this.importData(importedData);
                         } catch (error) {
                             this.showAlert('Error reading file: Invalid JSON format. Please check your backup file.', 'error');
                             console.error('Import error:', error);
                         }
                     };
                     reader.readAsText(file);
                     
                     // Reset file input
                     event.target.value = '';
                 },

                 importData(data) {
                     // Validate the data structure
                     if (!data || typeof data !== 'object') {
                         this.showAlert('Invalid backup file format.', 'error');
                         return;
                     }

                     // Check for required fields
                     if (!data.items || !Array.isArray(data.items)) {
                         this.showAlert('Invalid backup file: Missing or invalid items data.', 'error');
                         return;
                     }

                     // Confirm import with user
                     const itemCount = data.items.length;
                     const confirmMessage = `This will import ${itemCount} items and replace your current data.\n\nCurrent items: ${this.items.length}\nImported items: ${itemCount}\n\nDo you want to continue?`;
                     
                     // Show confirmation modal instead of browser confirm
                     this.showConfirmation(
                         'Import Data',
                         confirmMessage,
                         () => {
                             this.performImport(data);
                         },
                         { type: 'warning', confirmText: 'Import Data' }
                     );
                 },

                 performImport(data) {

                     try {
                         // Import items
                         this.items = data.items;

                         // Import settings if available
                         if (data.settings && typeof data.settings === 'object') {
                             // Merge settings, keeping current ones as fallback
                             this.settings = { ...this.settings, ...data.settings };
                             this.saveSettings();
                         }

                         // Save imported items
                         this.saveItems();

                         // Apply imported settings
                         this.applyDarkMode();
                         this.applyColorScheme();

                         // Show success notification
                         this.showSuccessNotification(`Successfully imported ${itemCount} items!`);

                         // Optionally switch to inventory tab to show imported items
                         this.activeTab = 'inventory';
                         this.saveActiveTab();

                     } catch (error) {
                         this.showAlert('Error importing data. Please try again or check your backup file.', 'error');
                         console.error('Import error:', error);
                     }
                 },

                 clearAllData() {
                    this.showConfirmation(
                        'âš ï¸ Delete All Data',
                        'This will permanently delete ALL your data including items, settings, and photos. This cannot be undone.\n\nAre you absolutely sure?',
                        () => {
                            // Second confirmation for such a destructive action
                            this.showConfirmation(
                                'ðŸš¨ Final Warning',
                                'Last chance! This will delete everything. Continue?',
                                () => {
                             localStorage.removeItem('resaleItems');
                             localStorage.removeItem('racksSettings');
                             localStorage.removeItem('accessibleMode');
                             window.location.reload();
                                },
                                { type: 'danger', confirmText: 'Delete Everything' }
                            );
                        },
                        { type: 'danger', confirmText: 'Yes, Delete All' }
                    );
                 },

                 applyDarkMode() {
                     if (this.settings.darkMode) {
                         document.body.classList.add('dark-mode');
                     } else {
                         document.body.classList.remove('dark-mode');
                     }
                 },

                 handleTileImageUpload(event) {
                     const file = event.target.files[0];
                     if (file) {
                         const reader = new FileReader();
                         reader.onload = (e) => {
                             this.settings.tileImage = e.target.result;
                             this.saveSettings();
                             this.applyTiledBackground();
                             
                             // Extract colors from the uploaded image
                             if (this.settings.dynamicColors) {
                                 this.extractColorsFromImage(e.target.result);
                             }
                         };
                         reader.readAsDataURL(file);
                     }
                     // Reset file input
                     event.target.value = '';
                 },

                 removeTileImage() {
                     this.settings.tileImage = null;
                     this.settings.extractedColors = null;
                     this.saveSettings();
                     this.applyTiledBackground();
                     this.applyDynamicColors();
                 },

                 getTiledBackgroundStyle() {
                     if (!this.settings.tileImage) return '';
                     
                     const sizeMap = {
                         tiny: '25px',
                         small: '50px',
                         medium: '100px',
                         large: '150px',
                         xlarge: '200px',
                         jumbo: '300px',
                         massive: '400px'
                     };
                     
                     return {
                         'background-image': `url(${this.settings.tileImage})`,
                         '--tile-size': sizeMap[this.settings.tileSize] || '100px',
                         '--tile-opacity': this.settings.tileOpacity,
                         'background-size': sizeMap[this.settings.tileSize] || '100px'
                     };
                 },

                 applyTiledBackground() {
                     // This function is called to trigger reactivity when settings change
                     // The actual styling is handled by getTiledBackgroundStyle()
                 },

                 extractColorsFromImage(imageDataUrl) {
                     return new Promise((resolve) => {
                         const img = new Image();
                         img.crossOrigin = 'anonymous';
                         img.onload = () => {
                             const canvas = document.createElement('canvas');
                             const ctx = canvas.getContext('2d');
                             
                             // Resize image for faster processing
                             const maxSize = 150;
                             const ratio = Math.min(maxSize / img.width, maxSize / img.height);
                             canvas.width = img.width * ratio;
                             canvas.height = img.height * ratio;
                             
                             ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                             
                             try {
                                 const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                                 const colors = this.analyzeImageColors(imageData);
                                 
                                 this.settings.extractedColors = colors;
                                 this.saveSettings();
                                 this.applyDynamicColors();
                                 resolve(colors);
                             } catch (error) {
                                 console.error('Error extracting colors:', error);
                                 resolve(null);
                             }
                         };
                         img.src = imageDataUrl;
                     });
                 },

                 analyzeImageColors(imageData) {
                     const data = imageData.data;
                     const colorCounts = {};
                     const sampleRate = 4; // Sample every 4th pixel for performance
                     
                     // Extract colors
                     for (let i = 0; i < data.length; i += 4 * sampleRate) {
                         const r = data[i];
                         const g = data[i + 1];
                         const b = data[i + 2];
                         const a = data[i + 3];
                         
                         // Skip transparent pixels
                         if (a < 125) continue;
                         
                         // Group similar colors (reduce precision)
                         const key = `${Math.floor(r/20)*20}-${Math.floor(g/20)*20}-${Math.floor(b/20)*20}`;
                         colorCounts[key] = (colorCounts[key] || 0) + 1;
                     }
                     
                     // Sort colors by frequency
                     const sortedColors = Object.entries(colorCounts)
                         .sort(([,a], [,b]) => b - a)
                         .slice(0, 10) // Top 10 colors
                         .map(([color]) => {
                             const [r, g, b] = color.split('-').map(Number);
                             return { r, g, b };
                         });
                     
                     return this.generateColorScheme(sortedColors);
                 },

                 generateColorScheme(dominantColors) {
                     if (dominantColors.length === 0) return null;
                     
                     // Get the most dominant color as base
                     const baseColor = dominantColors[0];
                     
                     // Create soft, muted primary color for easier viewing
                     const primaryColor = this.createSoftColor(baseColor);
                     
                     // Create harmonious secondary color
                     const secondaryColor = this.createHarmoniousSecondary(primaryColor);
                     
                     // Create gentle accent color
                     const accentColor = this.createGentleAccent(primaryColor);
                     
                     return {
                         primary: this.rgbToHex(primaryColor),
                         secondary: this.rgbToHex(secondaryColor),
                         accent: this.rgbToHex(accentColor),
                         bgLight: `rgba(${primaryColor.r}, ${primaryColor.g}, ${primaryColor.b}, 0.02)`,
                         bgDark: `rgba(${primaryColor.r}, ${primaryColor.g}, ${primaryColor.b}, 0.05)`,
                         textLight: '#ffffff',
                         textDark: '#1f2937'
                     };
                 },

                 createSoftColor(color) {
                     const hsl = this.rgbToHsl(color);
                     
                     // Make it soft and muted for easy viewing
                     hsl.s = Math.min(Math.max(hsl.s, 25), 60); // Moderate saturation (25-60%)
                     hsl.l = Math.min(Math.max(hsl.l, 45), 75); // Mid-range lightness (45-75%)
                     
                     return this.hslToRgb(hsl);
                 },

                 createHarmoniousSecondary(primaryColor) {
                     const hsl = this.rgbToHsl(primaryColor);
                     
                     // Shift hue by 30-60 degrees for harmony
                     hsl.h = (hsl.h + 45) % 360;
                     
                     // Make it slightly more muted
                     hsl.s = Math.max(hsl.s * 0.8, 20);
                     hsl.l = Math.min(hsl.l * 1.1, 80);
                     
                     return this.hslToRgb(hsl);
                 },

                 createGentleAccent(primaryColor) {
                     const hsl = this.rgbToHsl(primaryColor);
                     
                     // Analogous color (close hue) for gentle accent
                     hsl.h = (hsl.h + 120) % 360;
                     
                     // Keep it soft and pleasant
                     hsl.s = Math.min(hsl.s * 0.9, 50);
                     hsl.l = Math.min(Math.max(hsl.l, 50), 70);
                     
                     return this.hslToRgb(hsl);
                 },

                 findContrastingColor(colors, primaryColor) {
                     // Look for a color with sufficient contrast and different hue
                     for (let color of colors) {
                         const distance = this.getColorDistance(primaryColor, color);
                         const contrastRatio = this.getContrastRatio(primaryColor, color);
                         
                         if (distance > 120 && contrastRatio > 2.5) {
                             return this.enhanceColorForVisibility(color);
                         }
                     }
                     return null;
                 },

                 generateContrastingSecondary(primaryColor) {
                     const hsl = this.rgbToHsl(primaryColor);
                     
                     // Shift hue by 60-120 degrees for pleasing contrast
                     hsl.h = (hsl.h + 90) % 360;
                     
                     // Adjust lightness for contrast
                     if (hsl.l > 50) {
                         hsl.l = Math.max(hsl.l - 30, 25); // Darken if light
                     } else {
                         hsl.l = Math.min(hsl.l + 30, 75); // Lighten if dark
                     }
                     
                     // Ensure good saturation
                     hsl.s = Math.max(hsl.s, 45);
                     
                     return this.hslToRgb(hsl);
                 },

                 getHighContrastComplement(color) {
                     const hsl = this.rgbToHsl(color);
                     
                     // True complementary (180 degrees)
                     hsl.h = (hsl.h + 180) % 360;
                     
                     // Boost saturation for vibrancy
                     hsl.s = Math.min(hsl.s * 1.3, 85);
                     
                     // Ensure good contrast by adjusting lightness
                     const originalBrightness = this.getBrightness(color);
                     if (originalBrightness > 128) {
                         hsl.l = Math.max(hsl.l - 25, 35); // Make darker if original is light
                     } else {
                         hsl.l = Math.min(hsl.l + 25, 65); // Make lighter if original is dark
                     }
                     
                     return this.hslToRgb(hsl);
                 },

                 getContrastRatio(color1, color2) {
                     const l1 = this.getRelativeLuminance(color1);
                     const l2 = this.getRelativeLuminance(color2);
                     const lighter = Math.max(l1, l2);
                     const darker = Math.min(l1, l2);
                     return (lighter + 0.05) / (darker + 0.05);
                 },

                 getRelativeLuminance(color) {
                     const rs = color.r / 255;
                     const gs = color.g / 255;
                     const bs = color.b / 255;
                     
                     const r = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);
                     const g = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);
                     const b = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);
                     
                     return 0.2126 * r + 0.7152 * g + 0.0722 * b;
                 },

                 ensureTextContrast(textColor, backgroundColor) {
                     const textRgb = this.hexToRgb(textColor);
                     const contrastRatio = this.getContrastRatio(textRgb, backgroundColor);
                     
                     // WCAG AA standard requires 4.5:1 for normal text
                     if (contrastRatio >= 4.5) {
                         return textColor;
                     }
                     
                     // If contrast is poor, return high contrast alternative
                     const bgBrightness = this.getBrightness(backgroundColor);
                     return bgBrightness > 128 ? '#000000' : '#ffffff';
                 },

                 hexToRgb(hex) {
                     const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                     return result ? {
                         r: parseInt(result[1], 16),
                         g: parseInt(result[2], 16),
                         b: parseInt(result[3], 16)
                     } : { r: 0, g: 0, b: 0 };
                 },

                 getColorDistance(color1, color2) {
                     return Math.sqrt(
                         Math.pow(color1.r - color2.r, 2) +
                         Math.pow(color1.g - color2.g, 2) +
                         Math.pow(color1.b - color2.b, 2)
                     );
                 },

                 getComplementaryColor(color) {
                     // Convert to HSL for better color harmony
                     const hsl = this.rgbToHsl(color);
                     
                     // Rotate hue by 180 degrees for complementary
                     hsl.h = (hsl.h + 180) % 360;
                     
                     // Adjust saturation and lightness for better contrast
                     hsl.s = Math.min(hsl.s * 1.2, 100);
                     hsl.l = hsl.l > 50 ? hsl.l * 0.7 : hsl.l * 1.3;
                     
                     return this.hslToRgb(hsl);
                 },

                 getBrightness(color) {
                     return (color.r * 299 + color.g * 587 + color.b * 114) / 1000;
                 },

                 rgbToHex(color) {
                     const toHex = (n) => {
                         const hex = Math.round(Math.max(0, Math.min(255, n))).toString(16);
                         return hex.length === 1 ? '0' + hex : hex;
                     };
                     return `#${toHex(color.r)}${toHex(color.g)}${toHex(color.b)}`;
                 },

                 rgbToHsl(color) {
                     const r = color.r / 255;
                     const g = color.g / 255;
                     const b = color.b / 255;
                     
                     const max = Math.max(r, g, b);
                     const min = Math.min(r, g, b);
                     let h, s, l = (max + min) / 2;
                     
                     if (max === min) {
                         h = s = 0;
                     } else {
                         const d = max - min;
                         s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                         switch (max) {
                             case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                             case g: h = (b - r) / d + 2; break;
                             case b: h = (r - g) / d + 4; break;
                         }
                         h /= 6;
                     }
                     
                     return { h: h * 360, s: s * 100, l: l * 100 };
                 },

                 hslToRgb(hsl) {
                     const h = hsl.h / 360;
                     const s = hsl.s / 100;
                     const l = hsl.l / 100;
                     
                     const hue2rgb = (p, q, t) => {
                         if (t < 0) t += 1;
                         if (t > 1) t -= 1;
                         if (t < 1/6) return p + (q - p) * 6 * t;
                         if (t < 1/2) return q;
                         if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                         return p;
                     };
                     
                     let r, g, b;
                     if (s === 0) {
                         r = g = b = l;
                     } else {
                         const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                         const p = 2 * l - q;
                         r = hue2rgb(p, q, h + 1/3);
                         g = hue2rgb(p, q, h);
                         b = hue2rgb(p, q, h - 1/3);
                     }
                     
                     return {
                         r: Math.round(r * 255),
                         g: Math.round(g * 255),
                         b: Math.round(b * 255)
                     };
                 },

                                applyColorScheme() {
                   // Remove all theme classes
                   document.body.classList.remove('color-scheme', 'theme-pastel', 'theme-rawr');
                   
                   // Apply selected theme
                   document.body.classList.add('color-scheme', `theme-${this.settings.colorScheme}`);
                   
                   // Auto-enable dark mode for rawr xd theme
                   if (this.settings.colorScheme === 'rawr') {
                       this.settings.darkMode = true;
                       this.applyDarkMode();
                       this.saveSettings();
                   }
                   
                   if (false) {
                       this.accessibleMode = false;
                       this.applyAccessibleMode();
                       localStorage.setItem('accessibleMode', JSON.stringify(this.accessibleMode));
                   }
                   
               },

                                 init() {
                     // Apply accessibility mode on load
                     this.applyAccessibleMode();
                     
                     // Apply dark mode on load
                     this.applyDarkMode();
                     
                     // Apply color scheme on load
                     this.applyColorScheme();
                     
                     // Watch for purchase price changes to auto-calculate listing price
                     this.$watch('newItem.purchasePrice', (newValue) => {
                         if (this.newItem.useAutoPricing && newValue) {
                             this.newItem.listingPrice = this.calculateListingPrice(newValue);
                         }
                     });
                     
                     // Watch for pricing settings changes to recalculate
                     this.$watch('settings.pricingMethod', () => {
                         if (this.newItem.useAutoPricing && this.newItem.purchasePrice) {
                             this.newItem.listingPrice = this.calculateListingPrice(this.newItem.purchasePrice);
                         }
                     });
                     
                     this.$watch('settings.markupValue', () => {
                         if (this.newItem.useAutoPricing && this.newItem.purchasePrice) {
                             this.newItem.listingPrice = this.calculateListingPrice(this.newItem.purchasePrice);
                         }
                     });

                     // Watch for edit item purchase price changes to auto-calculate listing price
                     this.$watch('editItem.purchasePrice', (newValue) => {
                         if (this.editItem.useAutoPricing && newValue) {
                             this.editItem.listingPrice = this.calculateListingPrice(newValue);
                         }
                     });
                 }
            }
        }
    </script>
    
    <!-- Bulk Edit Modal -->
    <div x-show="showBulkEditModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showBulkEditModal = false">
        <div class="modal-content" style="background: white; border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%;">
            <div class="modal-header" style="margin-bottom: 1.5rem;">
                <h3 style="margin: 0;"><i class="fas fa-edit"></i> Bulk Edit Items</h3>
                <p style="color: #6b7280; margin: 0.5rem 0 0 0;" x-text="`Editing ${bulkSelection.selectedItems.length} selected item(s)`"></p>
            </div>
            
            <form @submit.prevent="confirmBulkEdit()">
                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditData.applyStatus">
                        <span class="toggle-switch"></span>
                        Update Status
                    </label>
                    <select x-show="bulkEditData.applyStatus" x-model="bulkEditData.status" style="margin-top: 0.5rem;">
                        <option value="">Select Status</option>
                        <option value="Missing Info">Missing Info</option>
                        <option value="Itemized">Itemized</option>
                        <option value="Sanitize">Sanitize</option>
                        <option value="Racked">Racked</option>
                        <option value="Listed">Listed</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditData.applySource">
                        <span class="toggle-switch"></span>
                        Update Source
                    </label>
                    <input x-show="bulkEditData.applySource" type="text" x-model="bulkEditData.source" placeholder="e.g., Thrift Store, Estate Sale" style="margin-top: 0.5rem;">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditData.applyListingPrice">
                        <span class="toggle-switch"></span>
                        Update Listing Price
                    </label>
                    <input x-show="bulkEditData.applyListingPrice" type="number" x-model="bulkEditData.listingPrice" step="0.01" placeholder="0.00" style="margin-top: 0.5rem;">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditData.applyGarmentType">
                        <span class="toggle-switch"></span>
                        Update Garment Type
                    </label>
                    <select x-show="bulkEditData.applyGarmentType" x-model="bulkEditData.garmentType" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                        <option value="">Select garment type...</option>
                        <option value="Shirt">ðŸ‘” Shirt</option>
                        <option value="Skirt">ðŸ‘— Skirt</option>
                        <option value="Shorts">ðŸ©³ Shorts</option>
                        <option value="Pants">ðŸ‘– Pants</option>
                        <option value="Dress">ðŸ‘— Dress</option>
                        <option value="Bag">ðŸ‘œ Bag</option>
                        <option value="Belt">ðŸ‘œ Belt</option>
                        <option value="Shoes">ðŸ‘  Shoes</option>
                        <option value="Jacket">ðŸ§¥ Jacket</option>
                        <option value="Sweater">ðŸ§¥ Sweater</option>
                        <option value="Accessories">âœ¨ Accessories</option>
                        <option value="Other">ðŸ“¦ Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditData.applyTags">
                        <span class="toggle-switch"></span>
                        Update Tags
                    </label>
                    <div x-show="bulkEditData.applyTags" style="margin-top: 0.5rem;">
                        <input type="text" x-model="bulkEditData.tags" placeholder="Enter tags separated by commas (e.g., vintage, designer, summer)" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; margin-bottom: 0.5rem;">
                        <small style="color: #6b7280; font-size: 0.875rem;">
                            <i class="fas fa-info-circle"></i>
                            Tags will be added to existing tags. Use commas to separate multiple tags.
                        </small>
                    </div>
                </div>

                <div class="form-actions" style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="button" @click="showBulkEditModal = false" class="btn btn-secondary" style="flex: 1;">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        <i class="fas fa-save"></i> Update Items
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Move to Sold Modal -->
    <div x-show="showBulkMoveToSoldModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showBulkMoveToSoldModal = false">
        <div class="modal-content" style="background: white; border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%;">
            <div class="modal-header" style="margin-bottom: 1.5rem;">
                <h3 style="margin: 0;"><i class="fas fa-dollar-sign" style="color: #10b981;"></i> Move Items to Sold</h3>
                <p style="color: #6b7280; margin: 0.5rem 0 0 0;" x-text="`Moving ${bulkSelection.selectedItems.length} selected item(s) to sold`"></p>
            </div>
            
            <form @submit.prevent="confirmBulkMoveToSold()">
                <div class="form-group">
                    <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;">Sale Date</label>
                    <input type="date" x-model="bulkMoveToSoldData.saleDate" required style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkMoveToSoldData.applySamePrice">
                        <span class="toggle-switch"></span>
                        Set same sale price for all items
                    </label>
                    <input x-show="bulkMoveToSoldData.applySamePrice" type="number" x-model="bulkMoveToSoldData.salePrice" step="0.01" placeholder="Sale price (e.g., 25.00)" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                    <p x-show="!bulkMoveToSoldData.applySamePrice" style="color: #6b7280; font-size: 12px; margin-top: 0.5rem;">Individual sale prices will be preserved if already set</p>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkMoveToSoldData.applySamePlatform">
                        <span class="toggle-switch"></span>
                        Set same platform for all items
                    </label>
                    <select x-show="bulkMoveToSoldData.applySamePlatform" x-model="bulkMoveToSoldData.platform" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                        <option value="">Select Platform</option>
                        <option value="Mercari">Mercari</option>
                        <option value="Depop">Depop</option>
                        <option value="Poshmark">Poshmark</option>
                        <option value="Vinted">Vinted</option>
                        <option value="eBay">eBay</option>
                        <option value="Facebook Marketplace">Facebook Marketplace</option>
                        <option value="Local Sale">Local Sale</option>
                        <option value="Other">Other</option>
                    </select>
                    <p x-show="!bulkMoveToSoldData.applySamePlatform" style="color: #6b7280; font-size: 12px; margin-top: 0.5rem;">Individual platforms will be preserved if already set</p>
                </div>

                <div class="form-actions" style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="button" @click="showBulkMoveToSoldModal = false" class="btn btn-secondary" style="flex: 1;">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-success" style="flex: 1;">
                        <i class="fas fa-dollar-sign"></i> Move to Sold
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Edit Sold Items Modal -->
    <div x-show="showBulkEditSoldModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showBulkEditSoldModal = false">
        <div class="modal-content" style="background: white; border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%;">
            <div class="modal-header" style="margin-bottom: 1.5rem;">
                <h3 style="margin: 0;"><i class="fas fa-edit" style="color: #3b82f6;"></i> Bulk Edit Sold Items</h3>
                <p style="color: #6b7280; margin: 0.5rem 0 0 0;" x-text="`Editing ${bulkSelection.selectedItems.length} selected sold item(s)`"></p>
            </div>
            
            <form @submit.prevent="confirmBulkEditSold()">
                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditSoldData.applySalePrice">
                        <span class="toggle-switch"></span>
                        Update Sale Price
                    </label>
                    <input x-show="bulkEditSoldData.applySalePrice" type="number" x-model="bulkEditSoldData.salePrice" step="0.01" placeholder="Sale price (e.g., 25.00)" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditSoldData.applySaleDate">
                        <span class="toggle-switch"></span>
                        Update Sale Date
                    </label>
                    <input x-show="bulkEditSoldData.applySaleDate" type="date" x-model="bulkEditSoldData.saleDate" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditSoldData.applySalePlatform">
                        <span class="toggle-switch"></span>
                        Update Sale Platform
                    </label>
                    <select x-show="bulkEditSoldData.applySalePlatform" x-model="bulkEditSoldData.platform" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                        <option value="">Select Platform</option>
                        <option value="Mercari">Mercari</option>
                        <option value="Depop">Depop</option>
                        <option value="Poshmark">Poshmark</option>
                        <option value="Vinted">Vinted</option>
                        <option value="eBay">eBay</option>
                        <option value="Facebook Marketplace">Facebook Marketplace</option>
                        <option value="Local Sale">Local Sale</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditSoldData.applyGarmentType">
                        <span class="toggle-switch"></span>
                        Update Garment Type
                    </label>
                    <select x-show="bulkEditSoldData.applyGarmentType" x-model="bulkEditSoldData.garmentType" style="margin-top: 0.5rem; width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                        <option value="">Select garment type...</option>
                        <option value="Shirt">ðŸ‘” Shirt</option>
                        <option value="Skirt">ðŸ‘— Skirt</option>
                        <option value="Shorts">ðŸ©³ Shorts</option>
                        <option value="Pants">ðŸ‘– Pants</option>
                        <option value="Dress">ðŸ‘— Dress</option>
                        <option value="Bag">ðŸ‘œ Bag</option>
                        <option value="Belt">ðŸ‘œ Belt</option>
                        <option value="Shoes">ðŸ‘  Shoes</option>
                        <option value="Jacket">ðŸ§¥ Jacket</option>
                        <option value="Sweater">ðŸ§¥ Sweater</option>
                        <option value="Accessories">âœ¨ Accessories</option>
                        <option value="Other">ðŸ“¦ Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <input type="checkbox" x-model="bulkEditSoldData.applyTags">
                        <span class="toggle-switch"></span>
                        Update Tags
                    </label>
                    <div x-show="bulkEditSoldData.applyTags" style="margin-top: 0.5rem;">
                        <input type="text" x-model="bulkEditSoldData.tags" placeholder="Enter tags separated by commas (e.g., vintage, designer, summer)" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; margin-bottom: 0.5rem;">
                        <small style="color: #6b7280; font-size: 0.875rem;">
                            <i class="fas fa-info-circle"></i>
                            Tags will be added to existing tags. Use commas to separate multiple tags.
                        </small>
                    </div>
                </div>

                <div class="form-actions" style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="button" @click="showBulkEditSoldModal = false" class="btn btn-secondary" style="flex: 1;">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        <i class="fas fa-save"></i> Update Items
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Return Modal -->
    <div x-show="showBulkReturnModal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;" @click.self="showBulkReturnModal = false">
        <div style="background: white; padding: 2rem; border-radius: 15px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <div style="margin-bottom: 1.5rem;">
                <h3 style="margin: 0;"><i class="fas fa-undo" style="color: #f59e0b;"></i> Return Items to Inventory</h3>
                <p style="color: #6b7280; margin: 0.5rem 0 0 0;" x-text="`Returning ${bulkSelection.selectedItems.length} selected item(s) to inventory`"></p>
            </div>

            <form @submit.prevent="confirmBulkMoveToInventory()">
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">
                        <i class="fas fa-comment-alt"></i> Reason for Return (Optional)
                    </label>
                    <textarea x-model="bulkReturnData.returnReason" 
                             placeholder="e.g., Defect found, Customer complaint, Quality issue..." 
                             style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; min-height: 80px; resize: vertical;"></textarea>
                </div>

                <div class="form-actions" style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="button" @click="showBulkReturnModal = false" class="btn btn-secondary" style="flex: 1;">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-warning" style="flex: 1;">
                        <i class="fas fa-undo"></i> Return to Inventory
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div x-show="confirmModal.show" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="confirm-modal" 
         @click.self="cancelAction()">
        <div class="confirm-modal-content">
            <div class="confirm-modal-header">
                <h3 class="confirm-modal-title" x-text="confirmModal.title"></h3>
                <p class="confirm-modal-message" x-text="confirmModal.message"></p>
            </div>
            <div class="confirm-modal-actions">
                <button @click="cancelAction()" class="cancel-btn" x-text="confirmModal.cancelText"></button>
                <button @click="confirmAction()" 
                        class="confirm-btn" 
                        :class="confirmModal.type" 
                        x-text="confirmModal.confirmText"></button>
            </div>
        </div>
    </div>

    <!-- Cute Robot AI Scan Notification -->
    <div x-show="showRobotNotification" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-75"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-75"
         class="ai-robot-notification"
         :class="{ 'success': robotNotificationState === 'success', 'error': robotNotificationState === 'error' }">
        
        <div class="robot-container">
            <div class="robot-body">
                ðŸ¤–
                <div class="robot-eyes">
                    <div class="robot-eye"></div>
                    <div class="robot-eye"></div>
                </div>
                <div class="robot-antenna"></div>
            </div>
        </div>
        
        <div class="scan-message" x-text="robotNotificationState === 'success' ? 'ðŸŽ‰ Scan Complete!' : robotNotificationState === 'error' ? 'ðŸ˜µ Scan Failed' : 'ðŸ” AI Scanning...'"></div>
        
        <div class="scan-details">
            <span x-show="robotNotificationState === 'scanning'">Analyzing your photos for prices and item details</span>
            <span x-show="robotNotificationState === 'success'">Found price and item information! Check the suggestions below.</span>
            <span x-show="robotNotificationState === 'error'">Please try again with clearer photos showing price tags.</span>
        </div>
        
        <div x-show="robotNotificationState === 'scanning'" class="scanning-progress">
            <div class="scan-dot"></div>
            <div class="scan-dot"></div>
            <div class="scan-dot"></div>
        </div>
        
        <div x-show="robotNotificationState === 'success'" class="success-sparkles">
            <div class="sparkle">âœ¨</div>
            <div class="sparkle">â­</div>
            <div class="sparkle">ðŸ’«</div>
            <div class="sparkle">ðŸŒŸ</div>
        </div>
    </div>

</body>
</html>

